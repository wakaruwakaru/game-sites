
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>将棋</title>
<style type="text/css">
* {
	padding: 0;
	margin: 0;
}

html, body {

	height: 100%;

	overflow: auto;

	font-family: sans-serif;

}

#main_holder {

	position: relative;

	width: 100%;
	height: 100%;

}

#main_header {

	display: block;
	position: fixed;

	z-index: 1;

	width: 100%;
	height: 2.4rem;

	left: 0;
	top: 0;

	background: #d8d8d8;

}

#main_contents {

	width: 100%;
	min-height: calc(100% - 2.4rem);

	display: flex;
	flex-direction: row;
	align-items: stretch;

	padding-top: 2.4rem;

}

#main_footer {

	width: 100%;
	height: 2.4rem;

	background: linear-gradient(to bottom, #fafdfd, #f7fbfb);

}

#contents_article {

	width: calc(100% - 348px);

	flex-grow: 1;
	order: 1;

	background: #fafdfd;

}

#contents_aside_a {

	width: 166px;

	flex-grow: 0;
	order: 0;

	background: linear-gradient(to right, #f5fafa, #fafdfd);

}

#contents_aside_b {

	width: 182px;

	flex-grow: 0;
	order: 2;

	background: linear-gradient(to right, #fafdfd, #f5fafa);

}

#header_nav {

	display: inline-block;

}

#header_nav_items {

	display: inline-block;

}

#header_nav_items li {

	display: inline;

	margin-left: 0.25rem;
	margin-right: 0.5rem;

}

#aside_ad {

	width: 162px;

	margin-top: 2.1rem;

	margin-left: auto;
	margin-right: auto;

}

h1 {

	font-size: 1.6rem;

	text-align: center;

	margin-top: 0.5rem;
	margin-bottom: 0.5rem;

	font-family: serif;

}

h2 {

	font-size: 1.3rem;

	margin-top: 0.5rem;
	margin-bottom: 0.5rem;

}

h3 {

	font-size: 1.15rem;

	margin-top: 0.5rem;
	margin-bottom: 0.5rem;

}

p {

	font-size: 1.0rem;

	line-height: 1.25;

	margin-left: 0.25rem;
	margin-right: 0.25rem;
	margin-top: 0.5rem;
	margin-bottom: 0.5rem;

}

ol {

	list-style-position: inside;
	padding: 0.25rem;

}

ul {

	list-style-position: inside;
	padding: 0.25rem;

}

.code_box {

	max-width: 98%;

	margin-left: auto;
	margin-right: auto;

	border: 1px solid;
	background: e0e0e0;

}

.code_holder {

	overflow: auto;

	overflow-wrap: break-word;
	white-space: pre-wrap;

	padding: 0.25rem;

}

#contents_footer_ad {

	margin-top: 0.75rem;
	margin-bottom: 0.75rem;
	margin-left: auto;
	margin-right: auto;

	width: 92%;
	max-height: 124px;

}

#main_footer_info {

	text-align: center;

	height: 2.4rem;
	line-height: 2.4rem;

}

@media screen and (max-width: 640px) {

	#main_contents {

		flex-direction: column;

		width: 100%;

	}

	#main_footer {

		background: #ffffff;

	}

	#contents_article {

		width: 100%;

		order: 0;
		stretch: 1;

		background: #ffffff;

	}

	#contents_aside_a {

		width: 100%;
		height: 164px;

		order: 1;

		background: #ffffff;

	}

	#contents_aside_b {

		width: 100%;
		height: 64px;

		order: 2;

		background: #ffffff;

	}

	#aside_ad {

		width: 162px;
		height: 162px;

		margin-top: 2.1rem;

		margin-left: auto;
		margin-right: auto;

	}

	#contents_footer_ad {
		display: none;
	}

}

/* フローティングボタンの共通デザイン */
.floating-btn{
    position: fixed;
    right: 20px;
    bottom: 20px;
    width: 58px;
    height: 58px;
    border-radius: 50%;
    background: #111;
    border: 2px solid #4da6ff;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 26px;
    color: #bcdfff;
    cursor: pointer;
    transition: 0.25s;
    box-shadow: 0 0 10px #3d8cff88;
}

/* ホバー時に光る */
.floating-btn:hover{
    background: #4da6ff33;
    box-shadow: 0 0 16px #4da6ffcc;
}

/* クリック時に縮む */
.floating-btn:active{
    transform: scale(0.9);
}

/* ボタン位置調整 */
#reloadBtn{
    bottom: 90px; /* logout の上に配置 */
}

#logoutBtn{
    bottom: 20px;
}
</style>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="https://wakaruwakaru.github.io/game-sites/index/icon/icon1.png" >
</head>
<body>

<div id="main_holder">
<header id="main_header">
<nav><ul id="header_nav_items"></ul></nav></header>
<section id="main_contents">
<article id="contents_article">
﻿<h1>Web将棋</h1>
<script>
function SG99A_Piece() {

	this.images = new Array(9);

}

SG99A_Piece.prototype.createPieceImages = function(cell_width, cell_height) {

	for (var i = SG99A_Piece.MIN;i <= SG99A_Piece.MAX;i++) {

		var piece_width = 0, piece_height = 0;

		switch (Math.abs(i)) {

		case SG99A_Piece.OU:

			piece_width = Math.floor(cell_width * 0.94);
			piece_height = Math.floor(cell_height * 0.94);

			break;

		case SG99A_Piece.KIN:
		case SG99A_Piece.SHA:
		case SG99A_Piece.KAKU:
		case SG99A_Piece.SHA_P:
		case SG99A_Piece.KAKU_P:

			piece_width = Math.floor(cell_width * 0.90);
			piece_height = Math.floor(cell_height * 0.90);

			break;

		case SG99A_Piece.GIN:
		case SG99A_Piece.KEI:
		case SG99A_Piece.KYO:
		case SG99A_Piece.GIN_P:
		case SG99A_Piece.KEI_P:
		case SG99A_Piece.KYO_P:

			piece_width = Math.floor(cell_width * 0.86);
			piece_height = Math.floor(cell_height * 0.86);

			break;

		case SG99A_Piece.FU:
		case SG99A_Piece.FU_P:

			piece_width = Math.floor(cell_width * 0.82);
			piece_height = Math.floor(cell_height * 0.82);

			break;

		}

		if (piece_width > 0) {
			this.images[i] = this.createPieceImage(i, cell_width, cell_height, piece_width, piece_height);
		}

	}

}

SG99A_Piece.prototype.createPieceImage = function(piece, img_width, img_height, width, height) {

	var cv = document.createElement("canvas");

	var upset = piece < 0;

	if (upset) {
		piece *= -1;
	}

	cv.width = width;
	cv.height = height;

	var context = cv.getContext("2d");

	context.fillStyle = "#e8e4a0";
	context.strokeStyle = "#101018";
	context.lineWidth = 2.0;

	context.beginPath();

	context.moveTo(Math.floor(width / 2), 1);
	context.lineTo(Math.floor(width * 0.12), Math.floor(height * 0.2));
	context.lineTo(1, height - 2);
	context.lineTo(width - 2, height - 2);
	context.lineTo(Math.floor(width * 0.88), Math.floor(height * 0.2));
	context.lineTo(Math.floor(width / 2), 1);

	context.closePath();

	context.fill();
	context.stroke();

	var chars = [];

	var color_1 = '#080810';
	var color_2 = '#cc0810';

	switch (piece) {

	case SG99A_Piece.OU:

		chars.push(this.createCharCanvas("王", Math.floor(width * 0.44), Math.floor(width * 0.30), color_1));
		chars.push(this.createCharCanvas("将", Math.floor(width * 0.46), Math.floor(width * 0.35), color_1));

		break;

	case SG99A_Piece.KIN:

		chars.push(this.createCharCanvas("金", Math.floor(width * 0.44), Math.floor(width * 0.33), color_1));
		chars.push(this.createCharCanvas("将", Math.floor(width * 0.46), Math.floor(width * 0.36), color_1));

		break;

	case SG99A_Piece.GIN:

		chars.push(this.createCharCanvas("銀", Math.floor(width * 0.44), Math.floor(width * 0.33), color_1));
		chars.push(this.createCharCanvas("将", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));

		break;

	case SG99A_Piece.KEI:

		chars.push(this.createCharCanvas("桂", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));
		chars.push(this.createCharCanvas("馬", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));

		break;

	case SG99A_Piece.KYO:

		chars.push(this.createCharCanvas("香", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));
		chars.push(this.createCharCanvas("車", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));

		break;

	case SG99A_Piece.SHA:

		chars.push(this.createCharCanvas("飛", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));
		chars.push(this.createCharCanvas("車", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));

		break;

	case SG99A_Piece.KAKU:

		chars.push(this.createCharCanvas("角", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));
		chars.push(this.createCharCanvas("行", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));

		break;

	case SG99A_Piece.FU:

		chars.push(this.createCharCanvas("歩", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));
		chars.push(this.createCharCanvas("兵", Math.floor(width * 0.44), Math.floor(width * 0.36), color_1));

		break;

	case SG99A_Piece.GIN_P:

		chars.push(this.createCharCanvas("成", Math.floor(width * 0.44), Math.floor(width * 0.33), color_2));
		chars.push(this.createCharCanvas("銀", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));

		break;

	case SG99A_Piece.KEI_P:

		chars.push(this.createCharCanvas("成", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));
		chars.push(this.createCharCanvas("桂", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));

		break;

	case SG99A_Piece.KYO_P:

		chars.push(this.createCharCanvas("成", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));
		chars.push(this.createCharCanvas("香", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));

		break;

	case SG99A_Piece.SHA_P:

		chars.push(this.createCharCanvas("龍", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));
		chars.push(this.createCharCanvas("王", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));

		break;

	case SG99A_Piece.KAKU_P:

		chars.push(this.createCharCanvas("龍", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));
		chars.push(this.createCharCanvas("馬", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));

		break;

	case SG99A_Piece.FU_P:

		chars.push(this.createCharCanvas("と", Math.floor(width * 0.44), Math.floor(width * 0.36), color_2));

		break;

	}

	var vgap = Math.floor(chars[0].height * 0.15);

	var chars_height = chars[0].height;

	if (chars.length > 1) {

		chars_height += vgap;
		chars_height += chars[1].height;

	}

	var chars_top = Math.floor(height * 0.05 + (height - chars_height) / 2);

	var chars_y = chars_top;

	for (var i = 0;i < 2;i++) {
		if (i < chars.length) {

			var left = Math.floor((width - chars[i].width) / 2);

			context.drawImage(chars[i], left, chars_y);
			chars_y += chars[i].height + vgap;

		}
	}

	var result_cv = document.createElement("canvas");

	result_cv.width = img_width;
	result_cv.height = img_height;

	var result_context = result_cv.getContext("2d");

	if (upset) {

		result_context.translate(img_width / 1, img_height / 1);
		result_context.rotate(Math.PI);

	}

	result_context.drawImage(cv, Math.floor((img_width - width) / 2), Math.floor((img_height - height) / 2));

	return result_cv;

}

SG99A_Piece.prototype.createCharCanvas = function(c, width, height, color) {

	var cv = document.createElement("canvas");

	cv.width = width * 3;
	cv.height = width * 2;

	var context = cv.getContext("2d");

	context.font = "bold " + (width * 2) + "px 'ｭｳ ｰ繧ｴ繧ｷ繝け'";
	context.textAlign = "center";
	context.textBaseline = "middle";

	context.fillStyle = color;

	context.fillText(c, cv.width / 2, cv.height / 2);

	var drawn_data = context.getImageData(0, 0, cv.width, cv.height);

	var min_x = cv.width;
	var min_y = cv.height;
	var max_x = 0;
	var max_y = 0;

	for (var y = 0;y < cv.height;y++) {

		var p_index = y * cv.width * 4;

		for (var x = 0;x < cv.width;x++) {

			var a = drawn_data.data[p_index + 3];

			if (a > 1) {

				if (x < min_x) {
					min_x = x;
				}

				if (y < min_y) {
					min_y = y;
				}

				if (x > max_x) {
					max_x = x;
				}

				if (y > max_y) {
					max_y = y;
				}

			}

			p_index += 4;

		}
	}

	var drawn_width = max_x - min_x + 1;
	var drawn_height = max_y - min_y + 1;

	var drawn_cv = document.createElement('canvas');
	drawn_cv.width = drawn_width;
	drawn_cv.height = drawn_height;

	var drawn_context = drawn_cv.getContext("2d");

	drawn_context.putImageData(drawn_data, -min_x, -min_y);

	var result_cv = document.createElement("canvas");
	result_cv.width = width;
	result_cv.height = height;

	var result_context = result_cv.getContext("2d");

	result_context.drawImage(drawn_cv, 0, 0, drawn_width, drawn_height, 0, 0, width, height);

	return result_cv;

}

SG99A_Piece.NONE = 0;
SG99A_Piece.OU = 1;
SG99A_Piece.KIN = 2;
SG99A_Piece.GIN = 3;
SG99A_Piece.KEI = 4;
SG99A_Piece.KYO = 5;
SG99A_Piece.FU = 6;
SG99A_Piece.KAKU = 7;
SG99A_Piece.SHA = 8;
SG99A_Piece.PROMOTED = 16;
SG99A_Piece.GIN_P = SG99A_Piece.GIN + SG99A_Piece.PROMOTED;
SG99A_Piece.KEI_P = SG99A_Piece.KEI + SG99A_Piece.PROMOTED;
SG99A_Piece.KYO_P = SG99A_Piece.KYO + SG99A_Piece.PROMOTED;
SG99A_Piece.SHA_P = SG99A_Piece.SHA + SG99A_Piece.PROMOTED;
SG99A_Piece.KAKU_P = SG99A_Piece.KAKU + SG99A_Piece.PROMOTED;
SG99A_Piece.FU_P = SG99A_Piece.FU + SG99A_Piece.PROMOTED;

SG99A_Piece.M_OU = -SG99A_Piece.OU;
SG99A_Piece.M_KIN = -SG99A_Piece.KIN;
SG99A_Piece.M_GIN = -SG99A_Piece.GIN;
SG99A_Piece.M_KEI = -SG99A_Piece.KEI;
SG99A_Piece.M_KYO = -SG99A_Piece.KYO;
SG99A_Piece.M_FU = -SG99A_Piece.FU;
SG99A_Piece.M_KAKU = -SG99A_Piece.KAKU;
SG99A_Piece.M_SHA = -SG99A_Piece.SHA;
SG99A_Piece.M_GIN_P = -SG99A_Piece.GIN_P;
SG99A_Piece.M_KEI_P = -SG99A_Piece.KEI_P;
SG99A_Piece.M_KYO_P = -SG99A_Piece.KYO_P;
SG99A_Piece.M_SHA_P = -SG99A_Piece.SHA_P;
SG99A_Piece.M_KAKU_P = -SG99A_Piece.KAKU_P;
SG99A_Piece.M_FU_P = -SG99A_Piece.FU_P;
SG99A_Piece.MIN = -24;
SG99A_Piece.MAX = 24;

SG99A_Piece.M_OU_U = -SG99A_Piece.OU;
SG99A_Piece.M_KIN_U = -SG99A_Piece.KIN;
SG99A_Piece.M_GIN_U = -SG99A_Piece.GIN;
SG99A_Piece.M_KEI_U = -SG99A_Piece.KEI;
SG99A_Piece.M_KYO_U = -SG99A_Piece.KYO;
SG99A_Piece.M_FU_U = -SG99A_Piece.FU;
SG99A_Piece.M_KAKU_U = -SG99A_Piece.KAKU;
SG99A_Piece.M_SHA_U = -SG99A_Piece.SHA;
SG99A_Piece.M_GIN_P_U = -SG99A_Piece.GIN_P;
SG99A_Piece.M_KEI_P_U = -SG99A_Piece.KEI_P;
SG99A_Piece.M_KYO_P_U = -SG99A_Piece.KYO_P;
SG99A_Piece.M_SHA_P_U = -SG99A_Piece.SHA_P;
SG99A_Piece.M_KAKU_P_U = -SG99A_Piece.KAKU_P;
SG99A_Piece.M_FU_P_U = -SG99A_Piece.FU_P;
SG99A_Piece.OU_U = 1;
SG99A_Piece.KIN_U = 2;
SG99A_Piece.GIN_U = 3;
SG99A_Piece.KEI_U = 4;
SG99A_Piece.KYO_U = 5;
SG99A_Piece.FU_U = 6;
SG99A_Piece.KAKU_U = 7;
SG99A_Piece.SHA_U = 8;
SG99A_Piece.PROMOTED_U = 16;
SG99A_Piece.GIN_P_U = SG99A_Piece.GIN + SG99A_Piece.PROMOTED;
SG99A_Piece.KEI_P_U = SG99A_Piece.KEI + SG99A_Piece.PROMOTED;
SG99A_Piece.KYO_P_U = SG99A_Piece.KYO + SG99A_Piece.PROMOTED;
SG99A_Piece.SHA_P_U = SG99A_Piece.SHA + SG99A_Piece.PROMOTED;
SG99A_Piece.KAKU_P_U = SG99A_Piece.KAKU + SG99A_Piece.PROMOTED;
SG99A_Piece.FU_P_U = SG99A_Piece.FU + SG99A_Piece.PROMOTED;

SG99A_Piece.piece_scores = new Int32Array(25);

SG99A_Piece.piece_scores[SG99A_Piece.OU] = 9999;
SG99A_Piece.piece_scores[SG99A_Piece.KIN] = 400;
SG99A_Piece.piece_scores[SG99A_Piece.GIN] = 360;
SG99A_Piece.piece_scores[SG99A_Piece.KEI] = 300;
SG99A_Piece.piece_scores[SG99A_Piece.KYO] = 310;
SG99A_Piece.piece_scores[SG99A_Piece.SHA] = 1000;
SG99A_Piece.piece_scores[SG99A_Piece.KAKU] = 880;
SG99A_Piece.piece_scores[SG99A_Piece.FU] = 60;
SG99A_Piece.piece_scores[SG99A_Piece.GIN_P] = 380;
SG99A_Piece.piece_scores[SG99A_Piece.KEI_P] = 350;
SG99A_Piece.piece_scores[SG99A_Piece.KYO_P] = 350;
SG99A_Piece.piece_scores[SG99A_Piece.SHA_P] = 1200;
SG99A_Piece.piece_scores[SG99A_Piece.KAKU_P] = 1060;
SG99A_Piece.piece_scores[SG99A_Piece.FU_P] = 360;

SG99A_Piece.table_piece_rate = 1.15;

SG99A_Piece.table_piece_scores = [];

SG99A_Piece.table_piece_scores[SG99A_Piece.OU] = 9999 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.KIN] = 400 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.GIN] = 360 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.KEI] = 300 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.KYO] = 310 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.SHA] = 1000 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.KAKU] = 880 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.FU] = 60 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.GIN_P] = 380 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.KEI_P] = 350 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.KYO_P] = 350 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.SHA_P] = 1200 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.KAKU_P] = 1060 * SG99A_Piece.table_piece_rate;
SG99A_Piece.table_piece_scores[SG99A_Piece.FU_P] = 360 * SG99A_Piece.table_piece_rate;
</script>
<script>
var SG99A_Rect = function() {

	this.left = 0;
	this.top = 0;
	this.right = 0;
	this.bottom = 0;
	this.width = 0;
	this.height = 0;
	this.center_x = 0;
	this.center_y = 0;

}

SG99A_Rect.createRectWithRect = function(rect) {
	return SG99A_Rect.createRect(rect.left, rect.top, rect.width, rect.height);
}

SG99A_Rect.createRect = function(left, top, width, height) {

	var rect = new SG99A_Rect();

	rect.left = left;
	rect.top = top;
	rect.right = left + width - 1;
	rect.bottom = top + height - 1;
	rect.width = width;
	rect.height = height;
	rect.center_x = Math.floor((rect.left + rect.right) / 2);
	rect.center_y = Math.floor((rect.top + rect.bottom) / 2);

	return rect;

}

SG99A_Rect.prototype.contains = function(x, y) {
	return (x >= this.left && x <= this.right && y >= this.top && y <= this.bottom);
}

SG99A_Rect.prototype.toString = function() {
	return this.left + ',' + this.top + ',' + this.right + ',' + this.bottom;
}
</script>
<script>
var SG99A_Hand = function() {

	this.from_col = 0;
	this.from_row = 0;
	this.to_col = 0;
	this.to_row = 0;

	this.promote = false;

	this.score = new Int32Array(3);
	this.score[0] = 0;
	this.score[1] = 0;
	this.score[2] = 0;

	this.board_score = 0;

	this.children = null;

}

SG99A_Hand.createHand = function(piece, from_col, from_row, to_col, to_row, promote) {

	var hand = new SG99A_Hand();

	hand.from_col = from_col;
	hand.from_row = from_row;
	hand.to_col = to_col;
	hand.to_row = to_row;

	hand.promote = promote;

	return hand;

}

SG99A_Hand.cloneHand = function(src) {

	var hand = new SG99A_Hand();

	hand.from_col = src.from_col;
	hand.from_row = src.from_row;
	hand.to_col = src.to_col;
	hand.to_row = src.to_row;
	hand.promote = src.promote;

	hand.board_score = src.board_score;
	hand.score[0] = src.score[0];
	hand.score[1] = src.score[1];
	hand.score[2] = src.score[2];

	return hand;

}

SG99A_Hand.prototype.toString = function() {
	return this.from_col + ',' + this.from_row + ':' + this.to_col + ',' + this.to_row + '/' + this.promote + ':';
}
</script>
<script>
function SG99A_Board() {

	this.data = null;

	this.cols = 0;
	this.rows = 0;
	this.cells = 0;

	this.up_piece_table = null;
	this.down_piece_table = null;

	this.turn = 0;

}

// 謌舌ｊ谿ｵ謨ｰ
SG99A_Board.PROMOTE_ROWS = 3;

// 蛻晄悄逶､髱｢
SG99A_Board.INIT_BOARD = [
	-SG99A_Piece.KYO, -SG99A_Piece.KEI, -SG99A_Piece.GIN, -SG99A_Piece.KIN, -SG99A_Piece.OU, -SG99A_Piece.KIN, -SG99A_Piece.GIN, -SG99A_Piece.KEI, -SG99A_Piece.KYO,
SG99A_Piece.NONE, -SG99A_Piece.SHA, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, -SG99A_Piece.KAKU, SG99A_Piece.NONE,
-SG99A_Piece.FU, -SG99A_Piece.FU, -SG99A_Piece.FU, -SG99A_Piece.FU, -SG99A_Piece.FU, -SG99A_Piece.FU, -SG99A_Piece.FU, -SG99A_Piece.FU, -SG99A_Piece.FU,
SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE,
SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE,
SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE,
SG99A_Piece.FU, SG99A_Piece.FU, SG99A_Piece.FU, SG99A_Piece.FU, SG99A_Piece.FU, SG99A_Piece.FU, SG99A_Piece.FU, SG99A_Piece.FU, SG99A_Piece.FU,
SG99A_Piece.NONE, SG99A_Piece.KAKU, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.NONE, SG99A_Piece.SHA, SG99A_Piece.NONE,
	SG99A_Piece.KYO, SG99A_Piece.KEI, SG99A_Piece.GIN, SG99A_Piece.KIN, SG99A_Piece.OU, SG99A_Piece.KIN, SG99A_Piece.GIN, SG99A_Piece.KEI, SG99A_Piece.KYO
];

SG99A_Board.INIT_UP_TABLE = [0, 0, 0, 0, 0, 0, 0, 0, 0];
SG99A_Board.INIT_DOWN_TABLE = [0, 0, 0, 0, 0, 0, 0, 0, 0];

SG99A_Board.createBoard = function() {

	var board = new SG99A_Board();

	board.cols = 9;
	board.rows = 9;
	board.cells = board.cols * board.rows;

	board.data = new Int32Array(board.cells);

	for (var i = 0;i < board.cells;i++) {
		board.data[i] = SG99A_Board.INIT_BOARD[i];
	}

	board.up_piece_table = new Int32Array(9);
	board.down_piece_table = new Int32Array(9);

	for (var i = 0;i <= 8;i++) {

		board.up_piece_table[i] = SG99A_Board.INIT_UP_TABLE[i];
		board.down_piece_table[i] = SG99A_Board.INIT_DOWN_TABLE[i];

	}

	return board;

}

SG99A_Board.prototype.set = function(board) {

	for (var i = 0;i < this.cells;i++) {
		this.data[i] = board.data[i];
	}

	for (var i = 2;i <= 8;i++) {

		this.up_piece_table[i] = board.up_piece_table[i];
		this.down_piece_table[i] = board.down_piece_table[i];

	}

	this.turn = board.turn;

}

SG99A_Board.prototype.clone = function() {

	var board = new SG99A_Board();

	board.cols = this.cols;
	board.rows = this.rows;
	board.cells = this.cells;

	board.data = new Int32Array(this.cells);

	for (var i = 0;i < this.cells;i++) {
		board.data[i] = this.data[i];
	}

	board.up_piece_table = new Int32Array(9);
	board.down_piece_table = new Int32Array(9);

	for (var i = 0;i <= 8;i++) {

		board.up_piece_table[i] = this.up_piece_table[i];
		board.down_piece_table[i] = this.down_piece_table[i];

	}

	board.turn = this.turn;

	return board;

}

// 逶､髱｢繝上ャ繧ｷ繝･蛟､繧堤ｮ怜
SG99A_Board.prototype.getBoardHash = function() {

	var hash = 0;

	for (var i = 0;i < this.cells;i++) {

		var piece = this.data[i];

		if (piece != 0) {

			hash += piece + ((i * i) & 0x1ff);
			hash += (piece * i * i) & 0xfff;

		}

	}

	for (var i = 2;i <= 8;i++) {

		if (this.up_piece_table[i] > 0) {
			hash += (i + 1) * this.up_piece_table[i];
		}

		if (this.down_piece_table[i] > 0) {
			hash += i * this.down_piece_table[i];
		}

	}

	return hash;

}

SG99A_Board.prototype.getKingCell = function(turn) {

	var king_col = -1;
	var king_row = -1;

	for (var row = 0;row < this.rows;row++) {
		for (var col = 0;col < this.cols;col++) {
			if (this.data[col + row * this.rows] * turn == SG99A_Piece.OU) {

				king_col = col;
				king_row = row;

				break;

			}
		}
	}

	return {'col': king_col, 'row': king_row};

}

SG99A_Board.prototype.isChecked = function(turn, processer) {

	var king_col = -1;
	var king_row = -1;

	for (var row = 0;row < this.rows;row++) {
		for (var col = 0;col < this.cols;col++) {
			if (this.data[col + row * this.rows] * turn == SG99A_Piece.OU) {

				king_col = col;
				king_row = row;

				break;

			}
		}
	}

	return processer.isInRange(this, -turn, king_col, king_row);

}

// 謖ｮ壽焔繧堤乢髱｢縺ｫ蜿肴丐
SG99A_Board.prototype.putHand = function(hand) {

	var to_index = hand.to_col + hand.to_row * this.cols;

	var to_piece = this.data[to_index];
	var from_piece = 0;

	if (hand.from_row === -1) {

		from_piece = hand.from_col;

		if (from_piece < 0) {
			this.up_piece_table[-from_piece]--;
		}

		if (from_piece > 0) {
			this.down_piece_table[from_piece]--;
		}

	} else {

		from_piece = this.data[hand.from_col + hand.from_row * this.cols];
		this.data[hand.from_col + hand.from_row * this.cols] = 0;

	}

	if (to_piece * from_piece < 0) {

		if (to_piece < 0) {
			if (to_piece < -SG99A_Piece.PROMOTED) {
				this.down_piece_table[-to_piece - SG99A_Piece.PROMOTED]++;
			} else {
				this.down_piece_table[-to_piece]++;
			}
		}

		if (to_piece > 0) {
			if (to_piece > SG99A_Piece.PROMOTED) {
				this.up_piece_table[to_piece - SG99A_Piece.PROMOTED]++;
			} else {
				this.up_piece_table[to_piece]++;
			}
		}

	}

	if (hand.promote) {

		switch (from_piece) {

		case SG99A_Piece.GIN:
		case SG99A_Piece.KEI:
		case SG99A_Piece.KYO:
		case SG99A_Piece.SHA:
		case SG99A_Piece.KAKU:
		case SG99A_Piece.FU:

			from_piece += SG99A_Piece.PROMOTED;

			break;

		case SG99A_Piece.M_GIN:
		case SG99A_Piece.M_KEI:
		case SG99A_Piece.M_KYO:
		case SG99A_Piece.M_SHA:
		case SG99A_Piece.M_KAKU:
		case SG99A_Piece.M_FU:

			from_piece -= SG99A_Piece.PROMOTED;

			break;

		}

	}

	this.data[to_index] = from_piece;

}
</script>
<script>
function SG99A_BoardProcesser(cols, rows, promote_rows) {

	this.cols = cols;
	this.rows = rows;

	this.promote_rows = promote_rows;

	this.up_promote_row = this.promote_rows - 1;
	this.down_promote_row = this.rows - this.promote_rows;

}

SG99A_BoardProcesser.MAX_SCORE = 1000000;
SG99A_BoardProcesser.MIN_SCORE = -1000000;

SG99A_BoardProcesser.SL_ARRAY = new Int32Array(50);
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_OU + 24] = 1;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_KIN + 24] = 2;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_GIN + 24] = 3;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_KEI + 24] = 4;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_KYO + 24] = 5;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_SHA + 24] = 6;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_KAKU + 24] = 7;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_FU + 24] = 8;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_GIN_P + 24] = 2;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_KEI_P + 24] = 2;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_KYO_P + 24] = 2;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_SHA_P + 24] = 9;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_KAKU_P + 24] = 10;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.M_FU_P + 24] = 2;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.OU + 24] = 11;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.KIN + 24] = 12;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.GIN + 24] = 13;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.KEI + 24] = 14;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.KYO + 24] = 15;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.SHA + 24] = 16;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.KAKU + 24] = 17;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.FU + 24] = 18;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.GIN_P + 24] = 12;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.KEI_P + 24] = 12;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.KYO_P + 24] = 12;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.SHA_P + 24] = 19;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.KAKU_P + 24] = 20;
SG99A_BoardProcesser.SL_ARRAY[SG99A_Piece.FU_P + 24] = 12;

// 盤面評価関数
SG99A_BoardProcesser.prototype.getBoardSimpleScoreWithKingPos = function(board, turn, up_range_map, down_range_map, my_king_col, my_king_row, enemy_king_col, enemy_king_row) {

	var cols = board.cols;
	var rows = board.rows;
	var cells = cols * rows;

	this.setRangeMap(board, up_range_map, down_range_map);

	var up_king_col, up_king_row;
	var down_king_col, down_king_row;

	if (turn === -1) {

		up_king_col = my_king_col;
		up_king_row = my_king_row;
		down_king_col = enemy_king_col;
		down_king_row = enemy_king_row;

	} else {

		up_king_col = enemy_king_col;
		up_king_row = enemy_king_row;
		down_king_col = my_king_col;
		down_king_row = my_king_row;

	}

	var board_data = board.data;

	var my_guard_val = 0;
	var enemy_guard_val = 0;

	var my_invade_val = 0;
	var enemy_invade_val = 0;

	var my_table_val = 0;
	var enemy_table_val = 0;

	var cells_piece_score = 0;
	var piece_score_table = SG99A_Piece.piece_scores;

	for (var i = 0;i < cells;i++) {

		var piece = board_data[i];

		if (piece < 0) {
			cells_piece_score -= piece_score_table[-piece];
		}

		if (piece > 0) {
			cells_piece_score += piece_score_table[piece];
		}

	}

	var table_piece_score = 0;
	var table_score_table = SG99A_Piece.table_piece_scores;

	for (var i = 2;i <= 8;i++) {

		table_piece_score -= board.up_piece_table[i] * table_score_table[i];
		table_piece_score += board.down_piece_table[i] * table_score_table[i];

	}

	if (board.up_piece_table[SG99A_Piece.FU] < 1) {
		table_piece_score += 10;
	}

	if (board.down_piece_table[SG99A_Piece.FU] < 1) {
		table_piece_score -= 10;
	}

	var board_piece_score = cells_piece_score + table_piece_score;

	var up_area_left = up_king_col - 2;
	var up_area_right = up_king_col + 2;
	var up_area_top = up_king_row - 2;
	var up_area_bottom = up_king_row + 2;

	if (up_area_left < 0) {
		up_area_left = 0;
	}

	if (up_area_right >= cols) {
		up_area_right = cols - 1;
	}

	if (up_area_top < 0) {
		up_area_top = 0;
	}

	if (up_area_bottom >= rows) {
		up_area_bottom = rows - 1;
	}

	var up_area_invaded = 0;
	var up_area_guard = 0;

	for (var row = up_area_top;row <= up_area_bottom;row++) {

		var rc = row * cols;

		for (var col = up_area_left;col <= up_area_right;col++) {

			var c = col + rc;

			var piece = board_data[c];

			if (piece === SG99A_Piece.M_KIN || piece === SG99A_Piece.M_GIN || piece < -16) {
					up_area_guard++;
			}

			if (down_range_map[c]) {
				up_area_invaded += down_range_map[c];
			}

			if (piece > 0 && (down_range_map[c] || !up_range_map[c])) {

				up_area_invaded += 2;

				if (piece === SG99A_Piece.FU_P) {
					up_area_invaded++;
				}

			}

		}

	}

	var up_inner_left = up_king_col - 1;
	var up_inner_right = up_king_col + 1;
	var up_inner_top = up_king_row - 1;
	var up_inner_bottom = up_king_row + 1;

	if (up_inner_left < 0) {
		up_inner_left = 0;
	}

	if (up_inner_right >= cols) {
		up_inner_right = cols - 1;
	}

	if (up_inner_top < 0) {
		up_inner_top = 0;
	}

	if (up_inner_bottom >= rows) {
		up_inner_bottom = rows - 1;
	}

	var up_inner_invaded = 0;
	var up_inner_space = 0;

	for (var row = up_inner_top;row <= up_inner_bottom;row++) {

		var rc = row * cols;

		for (var col = up_inner_left;col <= up_inner_right;col++) {

			var c = col + rc;

			if (down_range_map[c]) {
				up_inner_invaded += down_range_map[c];
			} else {
				if (board_data[c] == 0) {
					up_inner_space++;
				}
			}

		}

	}

	var down_area_left = down_king_col - 2;
	var down_area_right = down_king_col + 2;
	var down_area_top = down_king_row - 2;
	var down_area_bottom = down_king_row + 2;

	if (down_area_left < 0) {
		down_area_left = 0;
	}

	if (down_area_right >= cols) {
		down_area_right = cols - 1;
	}

	if (down_area_top < 0) {
		down_area_top = 0;
	}

	if (down_area_bottom >= rows) {
		down_area_bottom = rows - 1;
	}

	var down_area_invaded = 0;
	var down_area_guard = 0;

	for (var row = down_area_top;row <= down_area_bottom;row++) {

		var rc = row * cols;

		for (var col = down_area_left;col <= down_area_right;col++) {

			var c = col + rc;

			var piece = board_data[c];

			if (piece === SG99A_Piece.KIN || piece === SG99A_Piece.GIN || piece > 16) {
					down_area_guard++;
			}

			if (up_range_map[c]) {
				down_area_invaded += up_range_map[c];
			}

			if (piece < 0 && (up_range_map[c] || !down_range_map[c])) {

				down_area_invaded += 2;

				if (piece === -SG99A_Piece.FU_P) {
					down_area_invaded++;
				}

			}

		}

	}

	var down_inner_left = down_king_col - 1;
	var down_inner_right = down_king_col + 1;
	var down_inner_top = down_king_row - 1;
	var down_inner_bottom = down_king_row + 1;

	if (down_inner_left < 0) {
		down_inner_left = 0;
	}

	if (down_inner_right >= cols) {
		down_inner_right = cols - 1;
	}

	if (down_inner_top < 0) {
		down_inner_top = 0;
	}

	if (down_inner_bottom >= rows) {
		down_inner_bottom = rows - 1;
	}

	var down_inner_invaded = 0;
	var down_inner_space = 0;

	for (var row = down_inner_top;row <= down_inner_bottom;row++) {

		var rc = row * cols;

		for (var col = down_inner_left;col <= down_inner_right;col++) {

			var c = col + rc;

			if (up_range_map[c]) {
				down_inner_invaded += up_range_map[c];
			} else {
				if (board_data[c] == 0) {
					down_inner_space++;
				}
			}

		}

	}

	var up_area_guard_score = up_area_guard * 15;

	if (up_area_guard_score > 50) {
		up_area_guard_score = 50;
	}

	var down_area_guard_score = down_area_guard * 15;

	if (down_area_guard_score > 50) {
		down_area_guard_score = 50;
	}

	var up_area_invaded_score = up_area_invaded * 10;

	if (up_area_invaded_score > 120) {
		up_area_invaded_score = 120;
	}

	var up_inner_invaded_score = up_inner_invaded * 5;

	if (up_inner_invaded_score > 25) {
		up_inner_invaded_score = 25;
	}

	up_area_invaded_score += up_inner_invaded_score;

	var down_area_invaded_score = down_area_invaded * 10;

	if (down_area_invaded_score > 120) {
		down_area_invaded_score = 120;
	}

	var down_inner_invaded_score = down_inner_invaded * 5;

	if (down_inner_invaded_score > 25) {
		down_inner_invaded_score = 25;
	}

	down_area_invaded_score += down_inner_invaded_score;

	if (up_inner_space == 0) {

		up_area_guard_score -= 10;

		if (up_area_invaded > 1) {
			up_area_guard_score -= 20;
		}

	}

	if (up_area_invaded > 2) {

		if (up_area_guard <= 2) {

			up_area_guard_score -= 40;

			if (up_area_invaded > 5) {
				up_area_guard_score -= 30;
			}

		}

		if (up_area_guard == 0) {
			up_area_guard_score -= 40;
		}

	}

	if (down_inner_space == 0) {

		down_area_guard_score -= 10;

		if (down_area_invaded > 1) {
			down_area_guard_score -= 20;
		}

	}

	if (down_area_invaded > 2) {

		if (down_area_guard <= 2) {

			down_area_guard_score -= 40;

			if (down_area_invaded > 5) {
				down_area_guard_score -= 30;
			}

		}

		if (down_area_guard == 0) {
			down_area_guard_score -= 40;
		}

	}

	var guard_score = down_area_guard_score - up_area_guard_score;
	var invaded_score = down_area_invaded_score - up_area_invaded_score;

	var score = Math.floor(board_piece_score + guard_score - invaded_score);

	if (turn == -1) {
		score = -score;
	}

	return score;

}

// 盤面評価関数
SG99A_BoardProcesser.prototype.getBoardSimpleScoreWithKingPosAndRangeMap = function(board, turn, my_range_map, enemy_range_map, my_king_col, my_king_row, enemy_king_col, enemy_king_row) {

	var cols = board.cols;
	var rows = board.rows;
	var cells = cols * rows;

	var up_king_col, up_king_row;
	var down_king_col, down_king_row;
	var up_range_map, down_range_map;

	if (turn === -1) {

		up_king_col = my_king_col;
		up_king_row = my_king_row;
		down_king_col = enemy_king_col;
		down_king_row = enemy_king_row;

		up_range_map = my_range_map;
		down_range_map = enemy_range_map;

	} else {

		up_king_col = enemy_king_col;
		up_king_row = enemy_king_row;
		down_king_col = my_king_col;
		down_king_row = my_king_row;

		up_range_map = enemy_range_map;
		down_range_map = my_range_map;

	}

	var board_data = board.data;

	var my_guard_val = 0;
	var enemy_guard_val = 0;

	var my_invade_val = 0;
	var enemy_invade_val = 0;

	var my_table_val = 0;
	var enemy_table_val = 0;

	var cells_piece_score = 0;
	var piece_score_table = SG99A_Piece.piece_scores;

	for (var i = 0;i < cells;i++) {

		var piece = board_data[i];

		if (piece < 0) {
			cells_piece_score -= piece_score_table[-piece];
		}

		if (piece > 0) {
			cells_piece_score += piece_score_table[piece];
		}

	}

	var table_piece_score = 0;
	var table_score_table = SG99A_Piece.table_piece_scores;

	for (var i = 2;i <= 8;i++) {

		var ts = board.down_piece_table[i] - board.up_piece_table[i];

		if (ts != 0) {
			table_piece_score += ts * table_score_table[i];
		}

	}

	if (board.up_piece_table[SG99A_Piece.FU] < 1) {
		table_piece_score += 10;
	}

	if (board.down_piece_table[SG99A_Piece.FU] < 1) {
		table_piece_score -= 10;
	}

	var board_piece_score = cells_piece_score + table_piece_score;

	var up_area_left = up_king_col - 2;
	var up_area_right = up_king_col + 2;
	var up_area_top = up_king_row - 2;
	var up_area_bottom = up_king_row + 2;

	if (up_area_left < 0) {
		up_area_left = 0;
	}

	if (up_area_right >= cols) {
		up_area_right = cols - 1;
	}

	if (up_area_top < 0) {
		up_area_top = 0;
	}

	if (up_area_bottom >= rows) {
		up_area_bottom = rows - 1;
	}

	var up_area_invaded = 0;
	var up_area_guard = 0;

	for (var row = up_area_top;row <= up_area_bottom;row++) {

		var rc = row * cols;

		for (var col = up_area_left;col <= up_area_right;col++) {

			var c = col + rc;

			var piece = board_data[c];

			if (piece === SG99A_Piece.M_KIN || piece === SG99A_Piece.M_GIN || piece < -16) {
					up_area_guard++;
			}

			if (down_range_map[c]) {
				up_area_invaded += down_range_map[c];
			}

			if (piece > 0 && (down_range_map[c] || !up_range_map[c])) {

				up_area_invaded += 2;

				if (piece === SG99A_Piece.FU_P) {
					up_area_invaded++;
				}

			}

		}

	}

	var up_inner_left = up_king_col - 1;
	var up_inner_right = up_king_col + 1;
	var up_inner_top = up_king_row - 1;
	var up_inner_bottom = up_king_row + 1;

	if (up_inner_left < 0) {
		up_inner_left = 0;
	}

	if (up_inner_right >= cols) {
		up_inner_right = cols - 1;
	}

	if (up_inner_top < 0) {
		up_inner_top = 0;
	}

	if (up_inner_bottom >= rows) {
		up_inner_bottom = rows - 1;
	}

	var up_inner_invaded = 0;
	var up_inner_space = 0;

	for (var row = up_inner_top;row <= up_inner_bottom;row++) {

		var rc = row * cols;

		for (var col = up_inner_left;col <= up_inner_right;col++) {

			var c = col + rc;

			if (down_range_map[c]) {
				up_inner_invaded += down_range_map[c];
			} else {
				if (board_data[c] == 0) {
					up_inner_space++;
				}
			}

		}

	}

	var down_area_left = down_king_col - 2;
	var down_area_right = down_king_col + 2;
	var down_area_top = down_king_row - 2;
	var down_area_bottom = down_king_row + 2;

	if (down_area_left < 0) {
		down_area_left = 0;
	}

	if (down_area_right >= cols) {
		down_area_right = cols - 1;
	}

	if (down_area_top < 0) {
		down_area_top = 0;
	}

	if (down_area_bottom >= rows) {
		down_area_bottom = rows - 1;
	}

	var down_area_invaded = 0;
	var down_area_guard = 0;

	for (var row = down_area_top;row <= down_area_bottom;row++) {

		var rc = row * cols;

		for (var col = down_area_left;col <= down_area_right;col++) {

			var c = col + rc;

			var piece = board_data[c];

			if (piece === SG99A_Piece.KIN || piece === SG99A_Piece.GIN || piece > 16) {
					down_area_guard++;
			}

			if (up_range_map[c]) {
				down_area_invaded += up_range_map[c];
			}

			if (piece < 0 && (up_range_map[c] || !down_range_map[c])) {

				down_area_invaded += 2;

				if (piece === -SG99A_Piece.FU_P) {
					down_area_invaded++;
				}

			}

		}

	}

	var down_inner_left = down_king_col - 1;
	var down_inner_right = down_king_col + 1;
	var down_inner_top = down_king_row - 1;
	var down_inner_bottom = down_king_row + 1;

	if (down_inner_left < 0) {
		down_inner_left = 0;
	}

	if (down_inner_right >= cols) {
		down_inner_right = cols - 1;
	}

	if (down_inner_top < 0) {
		down_inner_top = 0;
	}

	if (down_inner_bottom >= rows) {
		down_inner_bottom = rows - 1;
	}

	var down_inner_invaded = 0;
	var down_inner_space = 0;

	for (var row = down_inner_top;row <= down_inner_bottom;row++) {

		var rc = row * cols;

		for (var col = down_inner_left;col <= down_inner_right;col++) {

			var c = col + rc;

			if (up_range_map[c]) {
				down_inner_invaded += up_range_map[c];
			} else {
				if (board_data[c] == 0) {
					down_inner_space++;
				}
			}

		}

	}

	var up_area_guard_score = up_area_guard * 15;

	if (up_area_guard_score > 50) {
		up_area_guard_score = 50;
	}

	var down_area_guard_score = down_area_guard * 15;

	if (down_area_guard_score > 50) {
		down_area_guard_score = 50;
	}

	var up_area_invaded_score = up_area_invaded * 10;

	if (up_area_invaded_score > 120) {
		up_area_invaded_score = 120;
	}

	var up_inner_invaded_score = up_inner_invaded * 5;

	if (up_inner_invaded_score > 25) {
		up_inner_invaded_score = 25;
	}

	up_area_invaded_score += up_inner_invaded_score;

	var down_area_invaded_score = down_area_invaded * 10;

	if (down_area_invaded_score > 120) {
		down_area_invaded_score = 120;
	}

	var down_inner_invaded_score = down_inner_invaded * 5;

	if (down_inner_invaded_score > 25) {
		down_inner_invaded_score = 25;
	}

	down_area_invaded_score += down_inner_invaded_score;

	if (up_inner_space == 0) {

		up_area_guard_score -= 15;

		if (up_area_invaded > 1) {
			up_area_guard_score -= 30;
		}

		if (up_area_invaded > 2) {
			up_area_guard_score -= 10;
		}

	}

	if (up_area_invaded > 2) {

		if (up_area_guard <= 2) {

			up_area_guard_score -= 40;

			if (up_area_invaded > 5) {
				up_area_guard_score -= 30;
			}

		}

		if (up_area_guard == 0) {
			up_area_guard_score -= 40;
		}

	}

	if (down_inner_space == 0) {

		down_area_guard_score -= 15;

		if (down_area_invaded > 1) {
			down_area_guard_score -= 30;
		}

		if (down_area_invaded > 2) {
			down_area_guard_score -= 10;
		}

	}

	if (down_area_invaded > 2) {

		if (down_area_guard <= 2) {

			down_area_guard_score -= 40;

			if (down_area_invaded > 5) {
				down_area_guard_score -= 30;
			}

		}

		if (down_area_guard == 0) {
			down_area_guard_score -= 40;
		}

	}

	var guard_score = down_area_guard_score - up_area_guard_score;
	var invaded_score = down_area_invaded_score - up_area_invaded_score;

	var score = Math.floor(board_piece_score + guard_score - invaded_score);

	if (turn == -1) {
		score = -score;
	}

	return score;

}

// 枝刈り用盤面評価関数
SG99A_BoardProcesser.prototype.getBoardSelectingScoreWithKingPosAndRangeMap = function(board, turn, my_range_map, enemy_range_map, my_king_col, my_king_row, enemy_king_col, enemy_king_row) {

	var cols = board.cols;
	var rows = board.rows;
	var cells = cols * rows;

	var up_king_col, up_king_row;
	var down_king_col, down_king_row;
	var up_range_map, down_range_map;

	if (turn === -1) {

		up_king_col = my_king_col;
		up_king_row = my_king_row;
		down_king_col = enemy_king_col;
		down_king_row = enemy_king_row;

		up_range_map = my_range_map;
		down_range_map = enemy_range_map;

	} else {

		up_king_col = enemy_king_col;
		up_king_row = enemy_king_row;
		down_king_col = my_king_col;
		down_king_row = my_king_row;

		up_range_map = enemy_range_map;
		down_range_map = my_range_map;

	}

	var board_data = board.data;

	var my_guard_val = 0;
	var enemy_guard_val = 0;

	var my_invade_val = 0;
	var enemy_invade_val = 0;

	var my_table_val = 0;
	var enemy_table_val = 0;

	var cells_piece_score = 0;
	var piece_score_table = SG99A_Piece.piece_scores;

	for (var i = 0;i < cells;i++) {

		var piece = board_data[i];

		if (piece < 0) {
			if (piece != SG99A_Piece.M_OU && down_range_map[i] > 0) {
				cells_piece_score -= piece_score_table[-piece] * 0.95;
			} else {
				cells_piece_score -= piece_score_table[-piece];
			}
		}

		if (piece > 0) {
			if (piece != SG99A_Piece.OU && up_range_map[i] > 0) {
				cells_piece_score += piece_score_table[piece] * 0.95;
			} else {
				cells_piece_score += piece_score_table[piece];
			}
		}

	}

	var table_piece_score = 0;
	var table_score_table = SG99A_Piece.table_piece_scores;

	for (var i = 2;i <= 8;i++) {

		table_piece_score -= board.up_piece_table[i] * table_score_table[i];
		table_piece_score += board.down_piece_table[i] * table_score_table[i];

	}

	if (board.up_piece_table[SG99A_Piece.FU] < 1) {
		table_piece_score += 10;
	}

	if (board.down_piece_table[SG99A_Piece.FU] < 1) {
		table_piece_score -= 10;
	}

	var board_piece_score = cells_piece_score + table_piece_score;

	var up_area_left = up_king_col - 2;
	var up_area_right = up_king_col + 2;
	var up_area_top = up_king_row - 2;
	var up_area_bottom = up_king_row + 2;

	if (up_area_left < 0) {
		up_area_left = 0;
	}

	if (up_area_right >= cols) {
		up_area_right = cols - 1;
	}

	if (up_area_top < 0) {
		up_area_top = 0;
	}

	if (up_area_bottom >= rows) {
		up_area_bottom = rows - 1;
	}

	var up_area_invaded = 0;
	var up_area_guard = 0;

	for (var row = up_area_top;row <= up_area_bottom;row++) {

		var rc = row * cols;

		for (var col = up_area_left;col <= up_area_right;col++) {

			var c = col + rc;

			var piece = board_data[c];

			if (piece === SG99A_Piece.M_KIN || piece === SG99A_Piece.M_GIN || piece < -16) {
					up_area_guard++;
			}

			if (down_range_map[c]) {
				up_area_invaded += down_range_map[c];
			}

			if (piece > 0 && (down_range_map[c] || !up_range_map[c])) {

				up_area_invaded += 2;

				if (piece === SG99A_Piece.FU_P) {
					up_area_invaded++;
				}

			}

		}

	}

	var up_inner_left = up_king_col - 1;
	var up_inner_right = up_king_col + 1;
	var up_inner_top = up_king_row - 1;
	var up_inner_bottom = up_king_row + 1;

	if (up_inner_left < 0) {
		up_inner_left = 0;
	}

	if (up_inner_right >= cols) {
		up_inner_right = cols - 1;
	}

	if (up_inner_top < 0) {
		up_inner_top = 0;
	}

	if (up_inner_bottom >= rows) {
		up_inner_bottom = rows - 1;
	}

	var up_inner_invaded = 0;
	var up_inner_space = 0;

	for (var row = up_inner_top;row <= up_inner_bottom;row++) {

		var rc = row * cols;

		for (var col = up_inner_left;col <= up_inner_right;col++) {

			var c = col + rc;

			if (down_range_map[c]) {
				up_inner_invaded += down_range_map[c];
			} else {
				if (board_data[c] == 0) {
					up_inner_space++;
				}
			}

		}

	}

	var down_area_left = down_king_col - 2;
	var down_area_right = down_king_col + 2;
	var down_area_top = down_king_row - 2;
	var down_area_bottom = down_king_row + 2;

	if (down_area_left < 0) {
		down_area_left = 0;
	}

	if (down_area_right >= cols) {
		down_area_right = cols - 1;
	}

	if (down_area_top < 0) {
		down_area_top = 0;
	}

	if (down_area_bottom >= rows) {
		down_area_bottom = rows - 1;
	}

	var down_area_invaded = 0;
	var down_area_guard = 0;

	for (var row = down_area_top;row <= down_area_bottom;row++) {

		var rc = row * cols;

		for (var col = down_area_left;col <= down_area_right;col++) {

			var c = col + rc;

			var piece = board_data[c];

			if (piece === SG99A_Piece.KIN || piece === SG99A_Piece.GIN || piece > 16) {
					down_area_guard++;
			}

			if (up_range_map[c]) {
				down_area_invaded += up_range_map[c];
			}

			if (piece < 0 && (up_range_map[c] || !down_range_map[c])) {

				down_area_invaded += 2;

				if (piece === -SG99A_Piece.FU_P) {
					down_area_invaded++;
				}

			}

		}

	}

	var down_inner_left = down_king_col - 1;
	var down_inner_right = down_king_col + 1;
	var down_inner_top = down_king_row - 1;
	var down_inner_bottom = down_king_row + 1;

	if (down_inner_left < 0) {
		down_inner_left = 0;
	}

	if (down_inner_right >= cols) {
		down_inner_right = cols - 1;
	}

	if (down_inner_top < 0) {
		down_inner_top = 0;
	}

	if (down_inner_bottom >= rows) {
		down_inner_bottom = rows - 1;
	}

	var down_inner_invaded = 0;
	var down_inner_space = 0;

	for (var row = down_inner_top;row <= down_inner_bottom;row++) {

		var rc = row * cols;

		for (var col = down_inner_left;col <= down_inner_right;col++) {

			var c = col + rc;

			if (up_range_map[c]) {
				down_inner_invaded += up_range_map[c];
			} else {
				if (board_data[c] == 0) {
					down_inner_space++;
				}
			}

		}

	}

	var up_area_guard_score = up_area_guard * 15;

	if (up_area_guard_score > 50) {
		up_area_guard_score = 50;
	}

	var down_area_guard_score = down_area_guard * 15;

	if (down_area_guard_score > 50) {
		down_area_guard_score = 50;
	}

	var up_area_invaded_score = up_area_invaded * 10;

	if (up_area_invaded_score > 120) {
		up_area_invaded_score = 120;
	}

	var up_inner_invaded_score = up_inner_invaded * 5;

	if (up_inner_invaded_score > 25) {
		up_inner_invaded_score = 25;
	}

	up_area_invaded_score += up_inner_invaded_score;

	var down_area_invaded_score = down_area_invaded * 10;

	if (down_area_invaded_score > 120) {
		down_area_invaded_score = 120;
	}

	var down_inner_invaded_score = down_inner_invaded * 5;

	if (down_inner_invaded_score > 25) {
		down_inner_invaded_score = 25;
	}

	down_area_invaded_score += down_inner_invaded_score;

	if (up_inner_space == 0) {

		up_area_guard_score -= 15;

		if (up_area_invaded > 1) {
			up_area_guard_score -= 30;
		}

		if (up_area_invaded > 2) {
			up_area_guard_score -= 10;
		}

	}

	if (up_area_invaded > 2) {

		if (up_area_guard <= 2) {

			up_area_guard_score -= 40;

			if (up_area_invaded > 5) {
				up_area_guard_score -= 30;
			}

		}

		if (up_area_guard == 0) {
			up_area_guard_score -= 40;
		}

	}

	if (down_inner_space == 0) {

		down_area_guard_score -= 15;

		if (down_area_invaded > 1) {
			down_area_guard_score -= 30;
		}

		if (down_area_invaded > 2) {
			down_area_guard_score -= 10;
		}

	}

	if (down_area_invaded > 2) {

		if (down_area_guard <= 2) {

			down_area_guard_score -= 40;

			if (down_area_invaded > 5) {
				down_area_guard_score -= 30;
			}

		}

		if (down_area_guard == 0) {
			down_area_guard_score -= 40;
		}

	}

	var guard_score = down_area_guard_score - up_area_guard_score;
	var invaded_score = down_area_invaded_score - up_area_invaded_score;

	var score = Math.floor(board_piece_score + guard_score - invaded_score);

	if (turn == -1) {
		score = -score;
	}

	return score;

}

SG99A_BoardProcesser.prototype.getAllMovableHand = function(board, turn) {

	var cols = board.cols;
	var rows = board.rows;

	var king_col = -1;
	var king_row = -1;

	for (var row = 0;row < rows;row++) {
		for (var col = 0;col < cols;col++) {
			if (turn * board.data[col + row * cols] == SG99A_Piece.OU) {

				king_col = col;
				king_row = row;

				break;

			}
		}
	}

	return this.getAllMovableHandWithKingPos(board, turn, king_col, king_row);

}

SG99A_BoardProcesser.prototype.getAllMovableHandWithKingPos = function(board, turn, king_col, king_row) {

	var cols = board.cols;
	var rows = board.rows;

	var hands = [];
	var result_hands = [];

	var test_board = board.clone();

	for (var row = 0;row < rows;row++) {

		var rc = row * cols;

		if (row == king_row) {
			for (var col = 0;col < cols;col++) {
				if (turn * board.data[col + rc] > 0) {

					var piece_hands = this.getMovableHands(board, col, row);

					var hands_num = piece_hands.length;

					if (col == king_col) {
						for (var i = 0;i < hands_num;i++) {

							var hand = piece_hands[i];

							var kc = hand.to_col;
							var kr = hand.to_row;

							test_board.set(board);
							test_board.putHand(hand);

							if (!this.isInRange(test_board, -turn, kc, kr)) {
								result_hands.push(hand);
							}

						}
					} else {
						for (var i = 0;i < hands_num;i++) {

							var hand = piece_hands[i];

							test_board.set(board);
							test_board.putHand(hand);

							if (!this.isInRange(test_board, -turn, king_col, king_row)) {
								result_hands.push(hand);
							}

						}
					}
				}
			}
		} else {
			for (var col = 0;col < cols;col++) {
				if (turn * board.data[col + rc] > 0) {

					var piece_hands = this.getMovableHands(board, col, row);

					var hands_num = piece_hands.length;

					for (var i = 0;i < hands_num;i++) {

						var hand = piece_hands[i];

						test_board.set(board);
						test_board.putHand(hand);

						if (!this.isInRange(test_board, -turn, king_col, king_row)) {
							result_hands.push(hand);
						}

					}
				}

			}
		}

	}

	var check_test = this.isInRange(board, -turn, king_col, king_row);

	if (check_test) {

		if (turn < 0) {

			for (var i = 2;i <= 8;i++) {
				if (board.up_piece_table[i] > 0) {

					var piece_hands = this.getMovableHands(board, -i, -1);

					var hands_num = piece_hands.length;

					for (var j = 0;j < hands_num;j++) {

						var hand = piece_hands[j];


						test_board.set(board);
						test_board.putHand(hand);

						if (!this.isInRange(test_board, -turn, king_col, king_row)) {
							result_hands.push(hand);
						}

					}

				}
			}

		}

		if (turn > 0) {

			for (var i = 2;i <= 8;i++) {
				if (board.down_piece_table[i] > 0) {

					var piece_hands = this.getMovableHands(board, i, -1);

					var hands_num = piece_hands.length;

					for (var j = 0;j < hands_num;j++) {

						var hand = piece_hands[j];

						test_board.set(board);
						test_board.putHand(hand);

						if (!this.isInRange(test_board, -turn, king_col, king_row)) {
							result_hands.push(hand);
						}

					}

				}
			}

		}

	} else {

		if (turn < 0) {

			for (var i = 2;i <= 8;i++) {
				if (board.up_piece_table[i] > 0) {

					var piece_hands = this.getMovableHands(board, -i, -1);

					if (piece_hands && piece_hands.length > 0) {
						Array.prototype.push.apply(result_hands, piece_hands);
					}

				}
			}

		}

		if (turn > 0) {

			for (var i = 2;i <= 8;i++) {
				if (board.down_piece_table[i] > 0) {

					var piece_hands = this.getMovableHands(board, i, -1);

					if (piece_hands && piece_hands.length > 0) {
						Array.prototype.push.apply(result_hands, piece_hands);
					}

				}
			}

		}

	}

	return result_hands;

}

SG99A_BoardProcesser.prototype.isInRange = function(board, turn, col, row) {

	var board_data = board.data;

	var cols = this.cols;
	var rows = this.rows;

	var cols_p1 = cols + 1;

	var row_p1 = row + 1;

	var scol = col - 1;
	var ecol = col + 1;
	var srow = row - 1;
	var erow = row_p1;

	if (scol < 0) {
		scol = 0;
	}

	if (ecol >= cols) {
		ecol = cols - 1;
	}

	if (srow < 0) {
		srow = 0;
	}

	if (erow >= rows) {
		erow = rows - 1;
	}

	if (turn === -1) {

		for (var r = srow;r <= erow;r++) {

			var rc = r * cols;

			for (var c = scol;c <= ecol;c++) {

				if (r === row && c === col) {
					continue;
				}

				switch (board_data[c + rc]) {

				case SG99A_Piece.M_OU:
				case SG99A_Piece.M_SHA_P:
				case SG99A_Piece.M_KAKU_P:

					return true;

				case SG99A_Piece.M_KIN:
				case SG99A_Piece.M_GIN_P:
				case SG99A_Piece.M_KEI_P:
				case SG99A_Piece.M_KYO_P:
				case SG99A_Piece.M_FU_P:

					if (!((r === row_p1) && (c != col))) {
						return true;
					}

					break;

				case -SG99A_Piece.GIN:

					if (!(r === row) && !((r === row_p1) && (c === col))) {
						return true;
					}

					break;

				case -SG99A_Piece.FU:

					if (r === row - 1 && c === col) {
						return true;
					}

					break;

				}

			}
		}

		if (row > 0) {
			for (var r = row - 1;r >= 0;r--) {

				var rc = r * cols;
				var p = board_data[col + rc];

				if (p === -SG99A_Piece.KYO || p === -SG99A_Piece.SHA || p === -SG99A_Piece.SHA_P) {
					return true;
				}

				if (p != 0) {
					break;
				}

			}
		}

		if (row < rows - 1) {
			for (var r = row_p1;r < rows;r++) {

				var rc = r * cols;
				var p = board_data[col + rc];

				if (p === -SG99A_Piece.SHA || p === -SG99A_Piece.SHA_P) {
					return true;
				}

				if (p != 0) {
					break;
				}

			}
		}

		var rc = row * cols;

		if (col > 0) {
			for (var c = col - 1;c >= 0;c--) {

				var p = board_data[c + rc];

				if (p === -SG99A_Piece.SHA || p === -SG99A_Piece.SHA_P) {
					return true;
				}

				if (p != 0) {
					break;
				}

			}
		}

		if (col < cols - 1) {
			for (var c = col + 1;c < cols;c++) {

				var p = board_data[c + rc];

				if (p === -SG99A_Piece.SHA || p === -SG99A_Piece.SHA_P) {
					return true;
				}

				if (p != 0) {
					break;
				}

			}
		}

		if ((col > 0) && (row >= 2) && (board_data[(col - 1) + (row - 2) * cols] === -SG99A_Piece.KEI)) {
			return true;
		}

		if ((col < cols - 1) && (row >= 2) && (board_data[(col + 1) + (row - 2) * cols] === -SG99A_Piece.KEI)) {
			return true;
		}

	}

	if (turn === 1) {

		for (var r = srow;r <= erow;r++) {

			var rc = r * cols;

			for (var c = scol;c <= ecol;c++) {

				if (r === row && c === col) {
					continue;
				}

				switch (board_data[c + rc]) {

				case SG99A_Piece.OU:
				case SG99A_Piece.SHA_P:
				case SG99A_Piece.KAKU_P:

					return true;

				case SG99A_Piece.KIN:
				case SG99A_Piece.GIN_P:
				case SG99A_Piece.KEI_P:
				case SG99A_Piece.KYO_P:
				case SG99A_Piece.FU_P:

					if (!((r === row - 1) && (c != col))) {
						return true;
					}

					break;

				case SG99A_Piece.GIN:

					if (!(r === row) && !((r === row - 1) && (c === col))) {
						return true;
					}

					break;

				case SG99A_Piece.FU:

					if (r === row_p1 && c === col) {
						return true;
					}

					break;

				}

			}
		}

		if (row > 0) {
			for (var r = row - 1;r >= 0;r--) {

				var rc = r * cols;
				var p = board_data[col + rc];

				if (p === SG99A_Piece.SHA || p === SG99A_Piece.SHA_P) {
					return true;
				}

				if (p != 0) {
					break;
				}

			}
		}

		if (row < rows - 1) {
			for (var r = row_p1;r < rows;r++) {

				var rc = r * cols;
				var p = board_data[col + rc];

				if (p === SG99A_Piece.KYO || p === SG99A_Piece.SHA || p === SG99A_Piece.SHA_P) {
					return true;
				}

				if (p != 0) {
					break;
				}

			}
		}

		var rc = row * cols;

		if (col > 0) {
			for (var c = col - 1;c >= 0;c--) {

				var p = board_data[c + rc];

				if (p === SG99A_Piece.SHA || p === SG99A_Piece.SHA_P) {
					return true;
				}

				if (p != 0) {
					break;
				}

			}
		}

		if (col < cols - 1) {
			for (var c = col + 1;c < cols;c++) {

				var p = board_data[c + rc];

				if (p === SG99A_Piece.SHA || p === SG99A_Piece.SHA_P) {
					return true;
				}

				if (p != 0) {
					break;
				}

			}
		}

		if ((col > 0) && (row < rows - 2) && (board_data[(col - 1) + (row + 2) * cols] === SG99A_Piece.KEI)) {
			return true;
		}

		if ((col < cols - 1) && (row < rows - 2) && (board_data[(col + 1) + (row + 2) * cols] === SG99A_Piece.KEI)) {
			return true;
		}

	}

	if (col > 0 && row > 0) {

		var dcol = col - 1;
		var drow = row - 1;

		var to = dcol + drow * cols;

		while (dcol >= 0 && drow >= 0) {

			var p = board_data[to] * turn;

			if (p === SG99A_Piece.KAKU || p === SG99A_Piece.KAKU_P) {
				return true;
			}

			if (p != 0) {
				break;
			}

			dcol--;
			drow--;

			to = to - cols_p1;

		}

	}

	if (col < cols - 1 && row > 0) {

		var dcol = col + 1;
		var drow = row - 1;

		while (dcol < cols && drow >= 0) {

			var p = board_data[dcol + drow * cols] * turn;

			if (p === SG99A_Piece.KAKU || p === SG99A_Piece.KAKU_P) {
				return true;
			}

			if (p != 0) {
				break;
			}

			dcol++;
			drow--;

		}

	}

	if (col > 0 && row < rows - 1) {

		var dcol = col - 1;
		var drow = row_p1;

		while (dcol >= 0 && drow < rows) {

			var p = board_data[dcol + drow * cols] * turn;

			if (p === SG99A_Piece.KAKU || p === SG99A_Piece.KAKU_P) {
				return true;
			}

			if (p != 0) {
				break;
			}

			dcol--;
			drow++;

		}

	}

	if (col < cols - 1 && row < rows - 1) {

		var dcol = col + 1;
		var drow = row_p1;

		var to = dcol + row_p1 * cols;

		while (dcol < cols && drow < rows) {

			var p = board_data[to] * turn;

			if (p === SG99A_Piece.KAKU || p === SG99A_Piece.KAKU_P) {
				return true;
			}

			if (p != 0) {
				break;
			}

			dcol++;
			drow++;

			to = to + cols_p1;

		}

	}

	return false;

}

SG99A_BoardProcesser.prototype.setRangeMap = function(board, range_map1, range_map2) {

	var board_cells = board.data;
	var cols = board.cols | 0;
	var rows = board.rows | 0;
	var cells = (cols * rows) | 0;

	var colsm1 = cols - 1;
	var colsp1 = cols + 1;
	var rowsm1 = rows - 1;

	for (var i = 0;i < cells;i = (i + 1) | 0) {

		range_map1[i] = 0;
		range_map2[i] = 0;

	}

	var p_index = 0;
	var row_nt1 = false;

	var bottom_c = rowsm1;
	var sl_array = SG99A_BoardProcesser.SL_ARRAY;

	for (var row = 0;row < rows;row++) {

		var row_nb1 = row < rowsm1;
		var right_c = colsm1;

		for (var col = 0;col < cols;col++) {

			var piece = board_cells[p_index] | 0;

			if (piece != 0) {

				switch (sl_array[piece + 24]) {

				case 1: // M_OU

					if (col > 0) {

						range_map1[p_index - 1] += 1;

						if (row_nt1) {

							range_map1[p_index - cols] += 1;
							range_map1[p_index - colsp1] += 1;

						}

						if (row_nb1) {

							range_map1[p_index + cols] += 1;
							range_map1[p_index + colsm1] += 1;

						}

						if (right_c > 0) {

							range_map1[p_index + 1] += 1;

							if (row_nt1) {
								range_map1[p_index - colsm1] += 1;
							}

							if (row_nb1) {
								range_map1[p_index + colsp1] += 1;
							}

						}

					} else {

						range_map1[p_index + 1] += 1;

						if (row_nt1) {

							range_map1[p_index - cols] += 1;
							range_map1[p_index - colsm1] += 1;

						}

						if (row_nb1) {

							range_map1[p_index + cols] += 1;
							range_map1[p_index + colsp1] += 1;

						}

					}

					break;

				case 2: //M_KIN:

					if (col > 0) {

						range_map1[p_index - 1] += 1;

						if (row_nt1) {
							range_map1[p_index - cols] += 1;
						}

						if (row_nb1) {

							range_map1[p_index + cols] += 1;
							range_map1[p_index + colsm1] += 1;

						}

						if (col < colsm1) {

							range_map1[p_index + 1] += 1;

							if (row_nb1) {
								range_map1[p_index + colsp1] += 1;
							}

						}

					} else {

						range_map1[p_index + 1] += 1;

						if (row_nt1) {
							range_map1[p_index - cols] += 1;
						}

						if (row_nb1) {

							range_map1[p_index + cols] += 1;
							range_map1[p_index + colsp1] += 1;

						}

					}

					break;

				case 3: //M_GIN:

					if (col > 0) {

						if (row_nt1) {
							range_map1[p_index - colsp1] += 1;
						}

						if (row_nb1) {

							range_map1[p_index + cols] += 1;
							range_map1[p_index + colsm1] += 1;

						}

						if (col < colsm1) {

							if (row_nt1) {
								range_map1[p_index - colsm1] += 1;
							}

							if (row_nb1) {
								range_map1[p_index + colsp1] += 1;
							}

						}

					} else {

						if (row_nt1) {
							range_map1[p_index - colsm1] += 1;
						}

						if (row_nb1) {

							range_map1[p_index + cols] += 1;
							range_map1[p_index + colsp1] += 1;

						}

					}

					break;

				case 4: // M_KEI:

					var p_pr2 = p_index + cols * 2;

					if(col > 0) {
						range_map1[p_pr2 - 1] += 1;
					}

					if(right_c > 0) {
						range_map1[p_pr2 + 1] += 1;
					}

					break;

				case 5: // M_KYO:

					var to = p_index + cols;

					while (to < cells) {

						range_map1[to] += 1;

						if (board_cells[to] != 0) {
							break;
						}

						to += cols;

					}

					break;

				case 6: // M_SHA

					if (row_nb1) {

						var to = p_index + cols;

						while (to < cells) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += cols;

						}

					}

					if (row_nt1) {

						var to = p_index - cols;

						while (to >= 0) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= cols;

						}

					}

					if (right_c > 0) {

						var to2 = p_index + right_c;

						for (var to = p_index + 1;to <= to2;to = (to + 1) | 0) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

						}

					}

					if (col > 0) {

						var to2 = row * cols;

						for (var to = p_index - 1;to >= to2;to = (to - 1) | 0) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

						}

					}

					break;

				case 7: // M_KAKU

					if (row_nt1) {

						var d_num = col;

						if (row < d_num) {
							d_num = row;
						}

						var to = p_index - colsp1;

						for (var i = 0;i < d_num;i += 1) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= colsp1;

						}

						var d_num = right_c;

						if (row < d_num) {
							d_num = row;
						}

						var to = p_index - colsm1;

						for (var i = 0;i < d_num;i += 1) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= colsm1;

						}

					}

					if (bottom_c > 0) {

						var d_num = col;

						if (bottom_c < d_num) {
							d_num = bottom_c;
						}

						var to = p_index + colsm1;

						for (var i = 0;i < d_num;i += 1) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += colsm1;

						}

						var d_num = right_c;

						if (bottom_c < d_num) {
							d_num = bottom_c;
						}

						var to = p_index + colsp1;

						for (var i = 0;i < d_num;i += 1) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += colsp1;

						}

					}

					break;

				case 8: // M_FU

					range_map1[p_index + cols] += 1;

					break;

				case 9: // M_SHA_P:

					if (row_nb1) {

						var to = p_index + cols;

						while (to < cells) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += cols;

						}

						if (col < colsm1) {
							range_map1[p_index + colsp1] += 1;
						}

						if (col > 0) {
							range_map1[p_index + colsm1] += 1;
						}

					}

					if (row_nt1) {

						var to = p_index - cols;

						while (to >= 0) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= cols;

						}

						if (right_c > 0) {
							range_map1[p_index - colsm1] += 1;
						}

						if (col > 0) {
							range_map1[p_index - colsp1] += 1;
						}

					}

					if (right_c > 0) {

						var to2 = p_index + right_c;

						for (var to = p_index + 1;to <= to2;to = (to + 1) | 0) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

						}

					}

					if (col > 0) {

						var to2 = row * cols;

						for (var to = p_index - 1;to >= to2;to = (to - 1) | 0) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

						}

					}

					break;

				case 10: // M_KAKU_P:

					if (row_nt1) {

						var d_num = col;

						if (row < d_num) {
							d_num = row;
						}

						var to = p_index - colsp1;

						for (var i = 0;i < d_num;i += 1) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= colsp1;

						}

						var d_num = right_c;

						if (row < d_num) {
							d_num = row;
						}

						var to = p_index - colsm1;

						for (var i = 0;i < d_num;i += 1) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= colsm1;

						}

						range_map1[p_index - cols] += 1;

					}

					if (row < rowsm1) {

						var d_num = col;

						if (bottom_c < d_num) {
							d_num = bottom_c;
						}

						var to = p_index + colsm1;

						for (var i = 0;i < d_num;i += 1) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += colsm1;

						}

						var d_num = right_c;

						if (bottom_c < d_num) {
							d_num = bottom_c;
						}

						var to = p_index + colsp1;

						for (var i = 0;i < d_num;i += 1) {

							range_map1[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += colsp1;

						}

						range_map1[p_index + cols] += 1;

					}

					if (col > 0) {
						range_map1[p_index - 1] += 1;
					}

					if (right_c > 0) {
						range_map1[p_index + 1] += 1;
					}

					break;

				case 11: // OU:

					if (col > 0) {

						range_map2[p_index - 1] += 1;

						if (row_nt1) {

							range_map2[p_index - cols] += 1;
							range_map2[p_index - colsp1] += 1;

						}

						if (row_nb1) {

							range_map2[p_index + cols] += 1;
							range_map2[p_index + colsm1] += 1;

						}

						if (right_c > 0) {

							range_map2[p_index + 1] += 1;

							if (row_nt1) {
								range_map2[p_index - colsm1] += 1;
							}

							if (row_nb1) {
								range_map2[p_index + colsp1] += 1;
							}

						}

					} else {

						range_map2[p_index + 1] += 1;

						if (row_nt1) {

							range_map2[p_index - cols] += 1;
							range_map2[p_index - colsm1] += 1;

						}

						if (row_nb1) {

							range_map2[p_index + cols] += 1;
							range_map2[p_index + colsp1] += 1;

						}

					}

					break;

				case 12: // KIN:

					if (col > 0) {

						range_map2[p_index - 1] += 1;

						if (row_nt1) {

							range_map2[p_index - cols] += 1;
							range_map2[p_index - colsp1] += 1;

						}

						if (row_nb1) {
							range_map2[p_index + cols] += 1;
						}

						if (right_c > 0) {

							range_map2[p_index + 1] += 1;

							if (row_nt1) {
								range_map2[p_index - colsm1] += 1;
							}

						}

					} else {

						range_map2[p_index + 1] += 1;

						if (row_nt1) {

							range_map2[p_index - cols] += 1;
							range_map2[p_index - colsm1] += 1;

						}

						if (row_nb1) {
							range_map2[p_index + cols] += 1;
						}

					}

					break;

				case 13: // GIN:

					if (col > 0) {

						if (row_nt1) {

							range_map2[p_index - cols] += 1;
							range_map2[p_index - colsp1] += 1;

						}

						if (row_nb1) {
							range_map2[p_index + colsm1] += 1;
						}

						if (right_c > 0) {

							if (row_nt1) {
								range_map2[p_index - colsm1] += 1;
							}

							if (row_nb1) {
								range_map2[p_index + colsp1] += 1;
							}

						}

					} else {

						if (row_nt1) {

							range_map2[p_index - cols] += 1;
							range_map2[p_index - colsm1] += 1;

						}

						if (row_nb1) {
							range_map2[p_index + colsp1] += 1;
						}

					}


					break;

				case 14: // KEI:

					var p_mr2 = p_index - cols * 2;

					if (col > 0) {
						range_map2[p_mr2 - 1] += 1;
					}

					if(right_c > 0) {
						range_map2[p_mr2 + 1] += 1;
					}

					break;

				case 15: // KYO:

					var to = p_index - cols;

					while (to >= 0) {

						range_map2[to] += 1;

						if (board_cells[to] != 0) {
							break;
						}

						to -= cols;

					}

					break;

				case 16: // SG99A_Piece.SHA:

					if (row_nb1) {

						var to = p_index + cols;

						while (to < cells) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += cols;

						}

					}

					if (row_nt1) {

						var to = p_index - cols;

						while (to >= 0) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= cols;

						}

					}

					if (right_c > 0) {

						var to2 = p_index + right_c;

						for (var to = p_index + 1;to <= to2;to = (to + 1) | 0) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

						}

					}

					if (col > 0) {

						var to2 = row * cols;

						for (var to = p_index - 1;to >= to2;to = (to - 1) | 0) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

						}

					}

					break;

				case 17: // KAKU:

					if (row > 0) {

						var d_num = col;

						if (row < d_num) {
							d_num = row;
						}

						var to = p_index - colsp1;

						for (var i = 0;i < d_num;i += 1) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= colsp1;

						}

						var d_num = right_c;

						if (row < d_num) {
							d_num = row;
						}

						var to = p_index - colsm1;

						for (var i = 0;i < d_num;i = i + 1) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= colsm1;

						}

					}

					if (row < rowsm1) {

						var d_num = col;

						if (bottom_c < d_num) {
							d_num = bottom_c;
						}

						var to = p_index + colsm1;

						for (var i = 0;i < d_num;i = i + 1) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += colsm1;

						}

						var d_num = right_c;

						if (bottom_c < d_num) {
							d_num = bottom_c;
						}

						var to = p_index + colsp1;

						for (var i = 0;i < d_num;i = i + 1) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += colsp1;

						}

					}

					break;

				case 18: // FU:

					range_map2[p_index - cols] += 1;

					break;

				case 19: // SG99A_Piece.SHA_P:

					if (row_nb1) {

						var to = p_index + cols;

						while (to < cells) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += cols;

						}

						if (col < colsm1) {
							range_map2[p_index + colsp1] += 1;
						}

						if (col > 0) {
							range_map2[p_index + colsm1] += 1;
						}

					}

					if (row_nt1) {

						var to = p_index - cols;

						while (to >= 0) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= cols;

						}

						if (col < colsm1) {
							range_map2[p_index - colsm1] += 1;
						}

						if (col > 0) {
							range_map2[p_index - colsp1] += 1;
						}

					}

					if (right_c > 0) {

						var to2 = p_index + right_c;

						for (var to = p_index + 1;to <= to2;to = (to + 1) | 0) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

						}

					}

					if (col > 0) {

						var to2 = row * cols;

						for (var to = p_index - 1;to >= to2;to = (to - 1) | 0) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

						}

					}

					break;

				case 20: // KAKU_P:

					if (row > 0) {

						var d_num = col;

						if (row < d_num) {
							d_num = row;
						}

						var to = p_index - colsp1;

						for (var i = 0;i < d_num;i += 1) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= colsp1;

						}

						var d_num = right_c;

						if (row < d_num) {
							d_num = row;
						}

						var to = p_index - colsm1;

						for (var i = 0;i < d_num;i = i + 1) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to -= colsm1;

						}

						range_map2[p_index - cols] += 1;

					}

					if (bottom_c > 0) {

						var d_num = col;

						if (bottom_c < d_num) {
							d_num = bottom_c;
						}

						var to = p_index + colsm1;

						for (var i = 0;i < d_num;i = i + 1) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += colsm1;

						}

						var d_num = right_c;

						if (bottom_c < d_num) {
							d_num = bottom_c;
						}

						var to = p_index + colsp1;

						for (var i = 0;i < d_num;i = i + 1) {

							range_map2[to] += 1;

							if (board_cells[to] != 0) {
								break;
							}

							to += colsp1;

						}

						range_map2[p_index + cols] += 1;

					}

					if (col > 0) {
						range_map2[p_index - 1] += 1;
					}

					if (col < colsm1) {
						range_map2[p_index + 1] += 1;
					}

					break;

				}

			}

			p_index = (p_index + 1) | 0;

			right_c--;

		}

		row_nt1 = true;

		bottom_c--;

	}

}

SG99A_BoardProcesser.prototype.getMovableHands = function(board, col, row) {

	var board_cells = board.data;
	var cols = this.cols;
	var rows = this.rows;

	var cols_m1 = cols - 1;
	var cols_p1 = cols + 1;
	var rows_m1 = rows - 1;
	var rows_p1 = rows + 1;

	var promote_rows = this.promote_rows;

	var hands = [];

	if (row === -1) {

		var piece = col;

		switch (piece) {

		case SG99A_Piece.M_FU:

			for (var r = 0; r < rows_m1;r++) {

				var rc = r * cols;

				for (var c = 0; c < cols;c++) {
					if (board_cells[c + rc] === 0) {

						var fu = false;

						for (var r2 = 0; r2 < rows_m1;r2++) {
							if (board_cells[c + r2 * cols] === SG99A_Piece.M_FU) {

								fu = true;

								break;

							}
						}

						if (!fu) {
							hands.push(SG99A_Hand.createHand(piece, col, row, c, r, false));
						}

					}
				}
			}

			break;

		case SG99A_Piece.FU:

			for (var r = 1; r < rows;r++) {

				var rc = r * cols;

				for (var c = 0; c < cols;c++) {
					if (board_cells[c + rc] === 0) {

						var fu = false;

						for (var r2 = 1; r2 < rows;r2++) {
							if (board_cells[c + r2 * cols] === SG99A_Piece.FU) {

								fu = true;

								break;

							}
						}

						if (!fu) {
							hands.push(SG99A_Hand.createHand(piece, col, row, c, r, false));
						}

					}
				}
			}

			break;

		case -SG99A_Piece.KEI:

			for (var r = 0; r < rows - 2;r++) {

				var rc = r * cols;

				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + rc] === 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, c, r, false));
					}
				}
			}

			break;

		case SG99A_Piece.KEI:

			for (var r = 2; r < rows;r++) {

				var rc = r * cols;

				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + rc] === 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, c, r, false));
					}
				}
			}

			break;

		case SG99A_Piece.M_KYO:

			for (var r = 0; r < rows_m1;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, c, r, false));
					}
				}
			}

			break;

		case SG99A_Piece.KYO:

			for (var r = 1; r < rows;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, c, r, false));
					}
				}
			}

			break;

		default:

			for (var r = 0; r < rows;r++) {

				var rc = r * cols;

				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + rc] === 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, c, r, false));
					}
				}

			}

		}

	} else {

		var p_index = col + row * cols;
		var piece = board_cells[p_index];

		switch (piece) {

		case SG99A_Piece.M_OU:
		case SG99A_Piece.OU:

			var col_m1 = col - 1;
			var col_p1 = col + 1;
			var row_m1 = row - 1;
			var row_p1 = row + 1;

			if (col > 0) {

				if (piece * board_cells[p_index - 1] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, col_m1, row, false));
				}

				if (row > 0) {

					if (piece * board_cells[p_index - cols_p1] <= 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col_m1, row_m1, false));
					}

					if (piece * board_cells[p_index - cols] <= 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col, row_m1, false));
					}

				}

				if (row < rows_m1) {

					if (piece * board_cells[p_index + cols_m1] <= 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col_m1, row_p1, false));
					}

					if (piece * board_cells[p_index + cols] <= 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col, row_p1, false));
					}

				}

				if (col < cols_m1) {

					if (piece * board_cells[p_index + 1] <= 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col_p1, row, false));
					}

					if (row > 0) {
						if (piece * board_cells[p_index - cols_m1] <= 0) {
							hands.push(SG99A_Hand.createHand(piece, col, row, col_p1, row_m1, false));
						}
					}

					if (row < rows - 1) {
						if (piece * board_cells[p_index + cols_p1] <= 0) {
							hands.push(SG99A_Hand.createHand(piece, col, row, col_p1, row_p1, false));
						}
					}

				}

			} else {

				if (piece * board_cells[p_index + 1] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, col_p1, row, false));
				}

				if (row > 0) {

					if (piece * board_cells[p_index - cols_m1] <= 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col_p1, row_m1, false));
					}

					if (piece * board_cells[p_index - cols] <= 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col, row_m1, false));
					}

				}

				if (row < rows_m1) {

					if (piece * board_cells[p_index + cols_p1] <= 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col_p1, row_p1, false));
					}

					if (piece * board_cells[p_index + cols] <= 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col, row_p1, false));
					}

				}

			}

			break;

		case SG99A_Piece.M_KIN:
		case SG99A_Piece.M_GIN_P:
		case -SG99A_Piece.KEI - SG99A_Piece.PROMOTED:
		case -SG99A_Piece.KYO - SG99A_Piece.PROMOTED:
		case -SG99A_Piece.FU - SG99A_Piece.PROMOTED:
		case SG99A_Piece.KIN:
		case SG99A_Piece.GIN_P:
		case SG99A_Piece.KEI_P:
		case SG99A_Piece.KYO_P:
		case SG99A_Piece.FU_P:

			var col_m1 = col - 1;
			var col_p1 = col + 1;
			var row_m1 = row - 1;
			var row_p1 = row + 1;

			if (col >= 1 && piece * board_cells[p_index - 1] <= 0) {
				hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), row, false));
			}

			if (col < cols_m1 && piece * board_cells[p_index + 1] <= 0) {
				hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), row, false));
			}

			if (row >= 1 && piece * board_cells[p_index - cols] <= 0) {
				hands.push(SG99A_Hand.createHand(piece, col, row, col, (row - 1), false));
			}

			if (row < rows_m1 && piece * board_cells[p_index + cols] <= 0) {
				hands.push(SG99A_Hand.createHand(piece, col, row, col, (row + 1), false));
			}

			if (piece < 0 && row < rows_m1) {

				if (col >= 1 && board_cells[p_index + cols_m1] >= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), (row + 1), false));
				}

				if (col < cols_m1 && board_cells[p_index + cols_p1] >= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), (row + 1), false));
				}

			}

			if (piece > 0 && row >= 1) {

				if ((col >= 1) && board_cells[(col - 1) + (row - 1) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), (row - 1), false));
				}

				if (col < cols_m1 && board_cells[(col + 1) + (row - 1) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), (row - 1), false));
				}

			}

			break;

		case -SG99A_Piece.GIN:
		case SG99A_Piece.GIN:

			if (row >= 1) {

				if((col >= 1) && (piece * board_cells[p_index - cols_p1] <= 0)) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), (row - 1), false));
				}

				if(piece == SG99A_Piece.GIN && (board_cells[p_index - cols] <= 0)) {
					hands.push(SG99A_Hand.createHand(piece, col, row, col, (row - 1), false));
				}

				if(col < cols_m1 && piece * board_cells[p_index - cols_m1] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), (row - 1), false));
				}

			}

			if (row <= rows - 2) {

				if(col >= 1 && piece * board_cells[(col - 1) + (row + 1) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), (row + 1), false));
				}

				if(piece == SG99A_Piece.M_GIN && board_cells[col + (row + 1) * cols] >= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, col, (row + 1), false));
				}

				if(col < cols_m1 && piece * board_cells[(col + 1) + (row + 1) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), (row + 1), false));
				}

			}

			break;

		case -SG99A_Piece.KEI:

			if (row >= rows - 4) {

				if(col >= 1 && piece * board_cells[(col - 1) + (row + 2) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), (row + 2), true));
				}

				if(col <= cols - 2 && piece * board_cells[(col + 1) + (row + 2) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), (row + 2), true));
				}

			}

			if (row <= rows - 5) {

				if(col >= 1 && piece * board_cells[(col - 1) + (row + 2) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), (row + 2), false));
				}

				if(col <= cols - 2 && piece * board_cells[(col + 1) + (row + 2) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), (row + 2), false));
				}

			}

			break;

		case SG99A_Piece.KEI:

			if (row <= 3) {

				if(col >= 1 && board_cells[col - 1 + (row - 2) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), row - 2, true));
				}

				if(col <= cols - 2 && board_cells[col + 1 + (row - 2) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), row - 2, true));
				}

			}

			if (row >= 4) {

				if(col >= 1 && board_cells[(col - 1) + (row - 2) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), (row - 2), false));
				}

				if(col <= cols - 2 && board_cells[(col + 1) + (row - 2) * cols] <= 0) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), (row - 2), false));
				}

			}

			break;

		case -SG99A_Piece.KYO:

			if ((row === rows - 2) && (board_cells[p_index + cols] >= 0)) {
				hands.push(SG99A_Hand.createHand(piece, col, row, col, (row + 1), true));
			}

			if (row <= rows - 3) {

				for (var r = row + 1;r < rows;r++) {

					var rc = r * cols;

					if (board_cells[col + rc] > 0) {

						if (r === rows - 1) {
							hands.push(SG99A_Hand.createHand(piece, col, row, col, r, true));
						} else {
							hands.push(SG99A_Hand.createHand(piece, col, row, col, r, false));
						}

						break;

					}

					if (board_cells[col + rc] < 0) {
						break;
					}

					if (r === rows - 1) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col, r, true));
					} else {
						hands.push(SG99A_Hand.createHand(piece, col, row, col, r, false));
					}

				}

			}

			break;

		case SG99A_Piece.KYO:

			if ((row === 1) && (board_cells[col] <= 0)) {
				hands.push(SG99A_Hand.createHand(piece, col, row, col, 0, true));
			}

			if (row >= 2) {

				for (var r = row - 1;r >= 0;r--) {

					if (board_cells[col + r * cols] < 0) {

						if (r == 0) {
							hands.push(SG99A_Hand.createHand(piece, col, row, col, r, true));
						} else {
							hands.push(SG99A_Hand.createHand(piece, col, row, col, r, false));
						}

						break;

					}

					if (board_cells[col + r * cols] > 0) {
						break;
					}

					if (r === 0) {
						hands.push(SG99A_Hand.createHand(piece, col, row, col, r, true));
					} else {
						hands.push(SG99A_Hand.createHand(piece, col, row, col, r, false));
					}

				}

			}

			break;

		case -SG99A_Piece.SHA:
		case -SG99A_Piece.SHA_P:
		case SG99A_Piece.SHA:
		case SG99A_Piece.SHA_P:

			if (piece === SG99A_Piece.M_SHA_P || piece === SG99A_Piece.SHA_P) {

				if (col < cols_m1) {

					if (row >= 1 && (piece * board_cells[col + 1 + (row - 1) * cols] <= 0)) {
						hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), (row - 1), false));
					}

					if (row < rows_m1 && (piece * board_cells[p_index + cols_p1] <= 0)) {
						hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), (row + 1), false));
					}

				}

				if (col >= 1) {

					if (row >= 1 && (piece * board_cells[col - 1 + (row - 1) * cols] <= 0)) {
						hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), (row - 1), false));
					}

					if (row <= rows - 2 && (piece * board_cells[col - 1 + (row + 1) * cols] <= 0)) {
						hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), (row + 1), false));
					}

				}

			}

			var rowc = row * cols;

			if (col < cols_m1) {

				for (var c = col + 1;c < cols;c++) {

					if (piece * board_cells[c + rowc] < 0) {

						hands.push(SG99A_Hand.createHand(piece, col, row, c, row, false));

						break;

					}

					if (piece * board_cells[c + rowc] > 0) {
						break;
					}

					hands.push(SG99A_Hand.createHand(piece, col, row, c, row, false));

				}

			}

			if (col >= 1) {

				for (var c = col - 1;c >= 0;c--) {

					if (piece * board_cells[c + rowc] < 0) {

						hands.push(SG99A_Hand.createHand(piece, col, row, c, row, false));

						break;

					}

					if (piece * board_cells[c + rowc] > 0) {
						break;
					}

					hands.push(SG99A_Hand.createHand(piece, col, row, c, row, false));

				}

			}

			if (row < rows_m1) {

				for (var r = row + 1;r < rows;r++) {

					var rc = r * cols;

					if (piece * board_cells[col + rc] < 0) {

						hands.push(SG99A_Hand.createHand(piece, col, row, col, r, false));

						break;

					}

					if (piece * board_cells[col + rc] > 0) {
						break;
					}

					hands.push(SG99A_Hand.createHand(piece, col, row, col, r, false));

				}

			}

			if (row >= 1) {

				for (var r = row - 1;r >= 0;r--) {

					var rc = r * cols;

					if (piece * board_cells[col + rc] < 0) {

						hands.push(SG99A_Hand.createHand(piece, col, row, col, r, false));

						break;

					}

					if (piece * board_cells[col + rc] > 0) {
						break;
					}

					hands.push(SG99A_Hand.createHand(piece, col, row, col, r, false));

				}

			}

			break;

		case -SG99A_Piece.KAKU:
		case -SG99A_Piece.KAKU - SG99A_Piece.PROMOTED:
		case SG99A_Piece.KAKU:
		case SG99A_Piece.KAKU_P:

			if (piece === -SG99A_Piece.KAKU - SG99A_Piece.PROMOTED || piece === SG99A_Piece.KAKU_P) {

				if (col < cols_m1 && (piece * board_cells[p_index + 1] <= 0)) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col + 1), row, false));
				}

				if (col >= 1 && (piece * board_cells[p_index - 1] <= 0)) {
					hands.push(SG99A_Hand.createHand(piece, col, row, (col - 1), row, false));
				}

				if (row < rows_m1 && (piece * board_cells[p_index + cols] <= 0)) {
					hands.push(SG99A_Hand.createHand(piece, col, row, col, (row + 1), false));
				}

				if (row >= 1 && (piece * board_cells[p_index - cols] <= 0)) {
					hands.push(SG99A_Hand.createHand(piece, col, row, col, (row - 1), false));
				}

			}

			var dcol = col + 1;
			var drow = row + 1;

			var dp_index = p_index + cols_p1;

			while (dcol < cols && drow < rows) {

				var p = piece * board_cells[dp_index];

				if (p < 0) {

					hands.push(SG99A_Hand.createHand(piece, col, row, dcol, drow, false));

					break;

				}

				if (p > 0) {
					break;
				}

				hands.push(SG99A_Hand.createHand(piece, col, row, dcol, drow, false));

				dcol++;
				drow++;
				dp_index = dp_index + cols_p1;

			}

			dcol = col - 1;
			drow = row + 1;

			var dp_index = p_index + cols_m1;

			while (dcol >= 0 && drow < rows) {

				var p = piece * board_cells[dp_index];

				if (p < 0) {

					hands.push(SG99A_Hand.createHand(piece, col, row, dcol, drow, false));

					break;

				}

				if (p > 0) {
					break;
				}

				hands.push(SG99A_Hand.createHand(piece, col, row, dcol, drow, false));

				dcol--;
				drow++;

				dp_index = dp_index + cols_m1;

			}

			dcol = col + 1;
			drow = row - 1;

			var dp_index = p_index - cols_m1;

			while (dcol < cols && drow >= 0) {

				var p = piece * board_cells[dp_index];

				if (p < 0) {

					hands.push(SG99A_Hand.createHand(piece, col, row, dcol, drow, false));

					break;

				}

				if (p > 0) {
					break;
				}

				hands.push(SG99A_Hand.createHand(piece, col, row, dcol, drow, false));

				dcol++;
				drow--;

				dp_index = dp_index - cols_m1;

			}

			dcol = col - 1;
			drow = row - 1;

			var dp_index = p_index - cols_p1;

			while (dcol >= 0 && drow >= 0) {

				var p = piece * board_cells[dp_index];

				if (p < 0) {

					hands.push(SG99A_Hand.createHand(piece, col, row, dcol, drow, false));

					break;

				}

				if (p > 0) {
					break;
				}

				hands.push(SG99A_Hand.createHand(piece, col, row, dcol, drow, false));

				dcol--;
				drow--;

				dp_index = dp_index - cols_p1;

			}

			break;

		case SG99A_Piece.M_FU:

			if (row < rows_m1 && board_cells[p_index + cols] >= 0) {
				if (row == rows - 2) {
					hands.push(SG99A_Hand.createHand(piece, col, row, col, (row + 1), true));
				} else {
					hands.push(SG99A_Hand.createHand(piece, col, row, col, (row + 1), false));
				}
			}

			break;

		case SG99A_Piece.FU:

			if (row >= 1 && board_cells[p_index - cols] <= 0) {
				if (row == 1) {
					hands.push(SG99A_Hand.createHand(piece, col, row, col, (row - 1), true));
				} else {
					hands.push(SG99A_Hand.createHand(piece, col, row, col, (row - 1), false));
				}
			}

			break;

		}

		var promote_hands = [];

		switch (piece) {

		case SG99A_Piece.GIN:
		case SG99A_Piece.KEI:
		case SG99A_Piece.KYO:
		case SG99A_Piece.SHA:
		case SG99A_Piece.KAKU:
		case SG99A_Piece.FU:

			for (var i = 0;i < hands.length;i++) {

				var hand = hands[i];

				if (((hand.to_row <= this.up_promote_row) || (hand.from_row <= this.up_promote_row)) && !hand.promote) {
					promote_hands.push(SG99A_Hand.createHand(piece, hand.from_col, hand.from_row, hand.to_col, hand.to_row, true));
				}

			}

			break;

		case SG99A_Piece.M_GIN:
		case SG99A_Piece.M_KEI:
		case SG99A_Piece.M_KYO:
		case SG99A_Piece.M_SHA:
		case SG99A_Piece.M_KAKU:
		case SG99A_Piece.M_FU:

			for (var i = 0;i < hands.length;i++) {

				var hand = hands[i];

				if (((hands[i].to_row >= this.down_promote_row) || (hands[i].from_row >= this.down_promote_row)) && !hand.promote) {
					promote_hands.push(SG99A_Hand.createHand(piece, hand.from_col, hand.from_row, hand.to_col, hand.to_row, true));
				}

			}

			break;

		}

		for (var i = 0;i < promote_hands.length;i++) {
			hands.push(promote_hands[i]);
		}

	}

	return hands;

}

SG99A_BoardProcesser.prototype.canTableMovableHand = function(board, turn, col, check_test, king_col, king_row) {

	var test_board = board.clone();

	var hand_num = 0;

	var cols = board.cols;
	var rows = board.rows;
	var board_cells = board.data;

	if (check_test) {

		var piece = col;

		switch (piece) {

		case -SG99A_Piece.FU:

			for (var r = 0; r < rows - 1;r++) {

				var rc = r * cols;

				for (var c = 0; c < cols;c++) {
					if (board_cells[c + rc] === 0) {

						var fu = false;

						for (var r2 = 0; r2 < rows - 1;r2++) {
							if (board_cells[c + r2 * cols] === -SG99A_Piece.FU) {

								fu = true;

								break;

							}
						}

						if (!fu) {

							test_board.data[c + rc] = piece;

							if (!this.isInRange(test_board, -turn, king_col, king_row)) {
								return true;
							}

							test_board.data[c + rc] = 0;

						}

					}
				}
			}

			break;

		case SG99A_Piece.FU:

			for (var r = 1; r < rows;r++) {
				for (var c = 0; c < cols;c++) {
					if (board_cells[c + r * cols] === 0) {

						var fu = false;

						for (var r2 = 1; r2 < rows;r2++) {
							if (board_cells[c + r2 * cols] === SG99A_Piece.FU) {

								fu = true;

								break;

							}
						}

						if (!fu) {

							test_board.data[c + r * cols] = piece;

							if (!this.isInRange(test_board, -turn, king_col, king_row)) {
								return true;
							}

							test_board.data[c + r * cols] = 0;

						}

					}
				}
			}

			break;

		case -SG99A_Piece.KEI:

			for (var r = 0; r < rows - 2;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {

						test_board.data[c + r * cols] = piece;

						if (!this.isInRange(test_board, -turn, king_col, king_row)) {
							return true;
						}

						test_board.data[c + r * cols] = 0;

					}
				}
			}

			break;

		case SG99A_Piece.KEI:

			for (var r = 2; r < rows;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {

						test_board.data[c + r * cols] = piece;

						if (!this.isInRange(test_board, -turn, king_col, king_row)) {
							return true;
						}

						test_board.data[c + r * cols] = 0;

					}
				}
			}

			break;

		case -SG99A_Piece.KYO:

			for (var r = 0; r < rows - 1;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {

						test_board.data[c + r * cols] = piece;

						if (!this.isInRange(test_board, -turn, king_col, king_row)) {
							return true;
						}

						test_board.data[c + r * cols] = 0;

					}
				}
			}

			break;

		case SG99A_Piece.KYO:

			for (var r = 1; r < rows;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {

						test_board.data[c + r * cols] = piece;

						if (!this.isInRange(test_board, -turn, king_col, king_row)) {
							return true;
						}

						test_board.data[c + r * cols] = 0;

					}
				}
			}

			break;

		default:

			for (var r = 0; r < rows;r++) {

				var rc = r * cols;

				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + rc] === 0) {

						test_board.data[c + rc] = piece;

						if (!this.isInRange(test_board, -turn, king_col, king_row)) {
							return true;
						}

						test_board.data[c + rc] = 0;

					}
				}

			}

		}

	} else {

		piece = col;

		switch (piece) {

		case -SG99A_Piece.FU:

			for (var r = 0; r < rows - 1;r++) {
				for (var c = 0; c < cols;c++) {
					if (board_cells[c + r * cols] === 0) {

						var fu = false;

						for (var r2 = 0; r2 < rows - 1;r2++) {
							if (board_cells[c + r2 * cols] === -SG99A_Piece.FU) {

								fu = true;

								break;

							}
						}

						if (!fu) {
							return true;
						}

					}
				}
			}

			break;

		case SG99A_Piece.FU:

			for (var r = 1; r < rows;r++) {
				for (var c = 0; c < cols;c++) {
					if (board_cells[c + r * cols] === 0) {

						var fu = false;

						for (var r2 = 1; r2 < rows;r2++) {
							if (board_cells[c + r2 * cols] === SG99A_Piece.FU) {

								fu = true;

								break;

							}
						}

						if (!fu) {
							return true;
						}

					}
				}
			}

			break;

		case -SG99A_Piece.KEI:

			for (var r = 0; r < rows - 2;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {
						return true;
					}
				}
			}

			break;

		case SG99A_Piece.KEI:

			for (var r = 2; r < rows;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {
						return true;
					}
				}
			}

			break;

		case -SG99A_Piece.KYO:

			for (var r = 0; r < rows - 1;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {
						return true;
					}
				}
			}

			break;

		case SG99A_Piece.KYO:

			for (var r = 1; r < rows;r++) {
				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + r * cols] === 0) {
						return true;
					}
				}
			}

			break;

		default:

			for (var r = 0; r < rows;r++) {

				var rc = r * cols;

				for (var c = 0; c < cols;c++) {
					if (piece * board_cells[c + rc] === 0) {
						return true;
					}
				}

			}

		}

	}

	return false;

}

SG99A_BoardProcesser.prototype.canMoveHandWithKingPos = function(board, turn, col, row, king_col, king_row) {

	var test_board = board.clone();

	var hand_num = 0;

	var cols = test_board.cols;
	var rows = test_board.rows;
	var board_cells = test_board.data;

	var from = col + row * cols;

	var piece = board_cells[col + row * cols];

	switch (piece) {

	case -SG99A_Piece.OU:
	case SG99A_Piece.OU:

		var scol = col - 1, ecol = col + 1;
		var srow = row - 1, erow = row + 1;

		if (scol < 0) {
			scol = 0;
		}

		if (ecol > cols - 1) {
			ecol = cols - 1;
		}

		if (srow < 0) {
			srow = 0;
		}

		if (erow > rows - 1) {
			erow = rows - 1;
		}

		for (var r = srow; r <= erow;r++) {

			var rc = r * cols;

			for (var c = scol; c <= ecol;c++) {

				var to = c + rc;

				if (piece * board_cells[to] <= 0) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, c, r)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

				}

			}
		}

		break;

	case -SG99A_Piece.KIN:
	case -SG99A_Piece.GIN - SG99A_Piece.PROMOTED:
	case -SG99A_Piece.KEI - SG99A_Piece.PROMOTED:
	case -SG99A_Piece.KYO - SG99A_Piece.PROMOTED:
	case -SG99A_Piece.FU - SG99A_Piece.PROMOTED:
	case SG99A_Piece.KIN:
	case SG99A_Piece.GIN + SG99A_Piece.PROMOTED:
	case SG99A_Piece.KEI + SG99A_Piece.PROMOTED:
	case SG99A_Piece.KYO + SG99A_Piece.PROMOTED:
	case SG99A_Piece.FU + SG99A_Piece.PROMOTED:

		var to = (col - 1) + row * cols;

		if (col >= 1 && piece * board_cells[to] <= 0) {

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

		}

		var to = (col + 1) + row * cols;

		if (col <= cols - 2 && piece * board_cells[to] <= 0) {

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

		}

		var to = col + (row - 1) * cols;

		if (row >= 1 && piece * board_cells[to] <= 0) {

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

		}

		var to = col + (row + 1) * cols;

		if (row <= rows - 2 && piece * board_cells[to] <= 0) {

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = to;

		}

		if (piece < 0 && row <= rows - 2) {

			var to = (col - 1) + (row + 1) * cols;

			if (col >= 1 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = (col + 1) + (row + 1) * cols;

			if (col <= cols - 2 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = to;

			}

		}

		if (piece > 0 && row >= 1) {

			var to = (col - 1) + (row - 1) * cols;

			if (col >= 1 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = (col + 1) + (row - 1) * cols;

			if (col <= cols - 2 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		break;

	case -SG99A_Piece.GIN:
	case SG99A_Piece.GIN:

		if (row >= 1) {

			var rm1c = (row - 1) * cols;
			var to = (col - 1) + rm1c;

			if(col >= 1 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = col + rm1c;

			if(piece == SG99A_Piece.GIN && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = (col + 1) + rm1c;

			if(col <= cols - 2 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		if (row <= rows - 2) {

			var to = (col - 1) + (row + 1) * cols;

			if(col >= 1 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = col + (row + 1) * cols;

			if(piece == -SG99A_Piece.GIN && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = (col + 1) + (row + 1) * cols;

			if(col <= cols - 2 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		break;

	case -SG99A_Piece.KEI:

		if (row == rows - 3) {

			var to = (col - 1) + (row + 2) * cols;

			if(col >= 1 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = (col + 1) + (row + 2) * cols;

			if(col <= cols - 2 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		if (row <= rows - 4) {

			var to = (col - 1) + (row + 2) * cols;

			if(col >= 1 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = (col + 1) + (row + 2) * cols;

			if(col <= cols - 2 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		break;

	case SG99A_Piece.KEI:

		if (row == 2) {

			var to = col - 1;

			if(col >= 1 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = col + 1;

			if(col <= cols - 2 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		if (row >= 3) {

			var to = (col - 1) + (row - 2) * cols;

			if(col >= 1 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			var to = (col + 1) + (row - 2) * cols;

			if(col <= cols - 2 && piece * board_cells[to] <= 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		break;

	case -SG99A_Piece.KYO:

		var to = col + (row + 1) * cols;

		if ((row == rows - 2) && (board_cells[to] >= 0)) {

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

		}

		if (row <= rows - 3) {

			for (var r = row + 1;r < rows;r++) {

				var rc = r * cols;

				var to = col + rc;

				if (board_cells[to] > 0) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

					break;

				}

				if (board_cells[to] < 0) {
					break;
				}

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		break;

	case SG99A_Piece.KYO:

		if ((row == 1) && (board_cells[col] <= 0)) {

			var tmp = test_board.data[col];

			test_board.data[from] = 0;
			test_board.data[col] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[col] = tmp;

		}

		if (row >= 2) {

			for (var r = row - 1;r >= 0;r--) {

				var to = col + r * cols;

				if (piece * board_cells[to] < 0) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

					break;

				}

				if (piece * board_cells[to] > 0) {
					break;
				}

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		break;

	case -SG99A_Piece.SHA:
	case -SG99A_Piece.SHA_P:
	case SG99A_Piece.SHA:
	case SG99A_Piece.SHA_P:

		if (piece == (-SG99A_Piece.SHA_P) || piece == (SG99A_Piece.SHA_P)) {

			if (col <= cols - 2) {

				var to = col + 1 + (row - 1) * cols;

				if (row >= 1 && (piece * board_cells[to] <= 0)) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = to;

				}

				var to = col + 1 + (row + 1) * cols;

				if (row <= rows - 2 && (piece * board_cells[to] <= 0)) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

				}

			}

			if (col >= 1) {

				var to = col - 1 + (row - 1) * cols;

				if (row >= 1 && (piece * board_cells[to] <= 0)) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

				}

				var to = col - 1 + (row + 1) * cols;

				if (row <= rows - 2 && (piece * board_cells[to] <= 0)) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

				}

			}

		}

		if (col <= cols - 2) {

			var rc = row * cols;

			for (var c = col + 1;c < cols;c++) {

				var to = c + rc;

				if (piece * board_cells[to] < 0) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

					break;

				}

				if (piece * board_cells[to] > 0) {
					break;
				}

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		if (col >= 1) {

			var rc = row * cols;

			for (var c = col - 1;c >= 0;c--) {

				var to = c + rc;

				if (piece * board_cells[to] < 0) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

					break;

				}

				if (piece * board_cells[to] > 0) {
					break;
				}

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		if (row <= rows - 2) {

			for (var r = row + 1;r < rows;r++) {

				var to = col + r * cols;

				if (piece * board_cells[to] < 0) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					break;

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

				}

				if (piece * board_cells[to] > 0) {
					break;
				}

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		if (row >= 1) {

			for (var r = row - 1;r >= 0;r--) {

				var to = col + r * cols;

				if (piece * board_cells[to] < 0) {

					var tmp = test_board.data[to];

					test_board.data[from] = 0;
					test_board.data[to] = piece;

					if (!this.isInRange(test_board, -turn, king_col, king_row)) {
						return true;
					}

					test_board.data[from] = piece;
					test_board.data[to] = tmp;

					break;

				}

				if (piece * board_cells[to] > 0) {
					break;
				}

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

		}

		break;

	case -SG99A_Piece.KAKU:
	case -SG99A_Piece.KAKU_P:
	case SG99A_Piece.KAKU:
	case SG99A_Piece.KAKU_P:

		if (piece == -SG99A_Piece.KAKU_P || piece == SG99A_Piece.KAKU_P) {

			var to = col + 1 + row * cols;

			if (col <= cols - 2 && (piece * board_cells[to] <= 0)) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

			}

			if (col >= 1 && (piece * board_cells[col - 1 + row * cols] <= 0)) {

				var tmp = test_board.data[col - 1 + row * cols];

				test_board.data[from] = 0;
				test_board.data[col - 1 + row * cols] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[col - 1 + row * cols] = tmp;

			}

			if (row <= rows - 2 && (piece * board_cells[col + (row + 1) * cols] <= 0)) {

				var tmp = test_board.data[col + (row + 1) * cols];

				test_board.data[from] = 0;
				test_board.data[col + (row + 1) * cols] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[col + (row + 1) * cols] = tmp;

			}

			if (row >= 1 && (piece * board_cells[col + (row - 1) * cols] <= 0)) {

				var tmp = test_board.data[col + (row - 1) * cols];

				test_board.data[from] = 0;
				test_board.data[col + (row - 1) * cols] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[col + (row - 1) * cols] = tmp;

			}

		}

		var d = 1;

		var dcol = col + d;
		var drow = row + d;

		while (dcol < cols && drow < rows) {

			var to = dcol + drow * cols;

			var p = piece * board_cells[to];

			if (p < 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

				break;

			}

			if (p > 0) {
				break;
			}

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

			dcol++;
			drow++;

		}

		d = 1;

		dcol = col - d;
		drow = row + d;

		while (dcol >= 0 && drow < rows) {

			var to = dcol + drow * cols;
			var p = piece * board_cells[to];

			if (p < 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

				break;

			}

			if (p > 0) {
				break;
			}

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

			dcol--;
			drow++;

		}

		d = 1;

		dcol = col + d;
		drow = row - d;

		while (dcol < cols && drow >= 0) {

			var to = dcol + drow * cols;
			var p = piece * board_cells[to];

			if (p < 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;

				break;

			}

			if (p > 0) {
				break;
			}

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

			dcol++;
			drow--;

		}

		d = 1;

		dcol = col - d;
		drow = row - d;

		while (dcol >= 0 && drow >= 0) {

			var to = dcol + drow * cols;
			var p = piece * board_cells[to];

			if (p < 0) {

				var tmp = test_board.data[to];

				test_board.data[from] = 0;
				test_board.data[to] = piece;

				if (!this.isInRange(test_board, -turn, king_col, king_row)) {
					return true;
				}

				test_board.data[from] = piece;
				test_board.data[to] = tmp;


				break;

			}

			if (p > 0) {
				break;
			}

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

			dcol--;
			drow--;

		}

		break;

	case -SG99A_Piece.FU:

		var to = col + (row + 1) * cols;

		if (row <= rows - 2 && board_cells[to] >= 0) {

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

		}

		break;

	case SG99A_Piece.FU:

		var to = col + (row - 1) * cols;

		if (row >= 1 && board_cells[to] <= 0) {

			var tmp = test_board.data[to];

			test_board.data[from] = 0;
			test_board.data[to] = piece;

			if (!this.isInRange(test_board, -turn, king_col, king_row)) {
				return true;
			}

			test_board.data[from] = piece;
			test_board.data[to] = tmp;

		}

		break;

	}

	return false;

}

SG99A_BoardProcesser.prototype.isLose = function(board, turn) {

	var king_col = -1;
	var king_row = -1;

	var cols = board.cols;
	var rows = board.rows;

	var board_data = board.data;

	for (var row = 0;row < rows;row++) {
		for (var col = 0;col < cols;col++) {
			if (board_data[col + row * cols] * turn == SG99A_Piece.OU) {

				king_col = col;
				king_row = row;

				break;

			}
		}
	}

	return this.isLoseWithKingPos(board, turn, king_col, king_row);

}

SG99A_BoardProcesser.prototype.isLoseWithKingPos = function(board, turn, king_col, king_row) {

	var cols = board.cols;
	var rows = board.rows;

	var board_data = board.data;

	var scol = king_col - 1, ecol = king_col + 1;
	var srow = king_row - 1, erow = king_row + 1;

	if (scol < 0) {
		scol = 0;
	}

	if (ecol > cols - 1) {
		ecol = cols - 1;
	}

	if (srow < 0) {
		srow = 0;
	}

	if (erow > rows - 1) {
		erow = rows - 1;
	}

	var test_board = board.clone();
	test_board.data[king_col + king_row * cols] = 0;

	for (var r = srow; r <= erow;r++) {

		var rc = r * cols;

		for (var c = scol; c <= ecol;c++) {

			if (!(c == king_col && r == king_row) && (turn * test_board.data[c + rc] <= 0) && !this.isInRange(test_board, -turn, c, r)) {
				return false;
			}

		}

	}

	for (var row = 0;row < rows;row++) {

		var rc = row * cols;

		for (var col = 0;col < cols;col++) {
			if (turn * board_data[col + rc] > 0) {

				var test = this.canMoveHandWithKingPos(board, turn, col, row, king_col, king_row);

				if (test) {
					return false;
				}

			}
		}
	}

	var check_test = this.isInRange(board, -turn, king_col, king_row);

	var hand_num = 0;

	if (turn < 0) {

		for (var i = 2;i <= 8;i++) {
			if (board.up_piece_table[i] > 0) {
				if (this.canTableMovableHand(board, turn, -i, check_test, king_col, king_row)) {
					return false;
				}
			}
		}

	}

	if (turn > 0) {

		for (var i = 2;i <= 8;i++) {
			if (board.down_piece_table[i] > 0) {
				if (this.canTableMovableHand(board, turn, i, check_test, king_col, king_row)) {
					return false;
				}
			}
		}

	}

	return true;

}

SG99A_BoardProcesser.prototype.isLoseWithKingPosAndRangeMap = function(board, turn, king_col, king_row, enemy_range_map) {

	var cols = board.cols;
	var rows = board.rows;

	var board_data = board.data;

	var scol = king_col - 1, ecol = king_col + 1;
	var srow = king_row - 1, erow = king_row + 1;

	if (scol < 0) {
		scol = 0;
	}

	if (ecol > cols - 1) {
		ecol = cols - 1;
	}

	if (srow < 0) {
		srow = 0;
	}

	if (erow > rows - 1) {
		erow = rows - 1;
	}

	for (var r = srow; r <= erow;r++) {

		var rc = r * cols;

		for (var c = scol; c <= ecol;c++) {

			if (!(c == king_col && r == king_row) && (turn * board.data[c + rc] <= 0) && !enemy_range_map[c + rc]) {
				return false;
			}

		}

	}

	for (var row = 0;row < rows;row++) {

		var rc = row * cols;

		for (var col = 0;col < cols;col++) {
			if (turn * board_data[col + rc] > 0) {

				var test = this.canMoveHandWithKingPos(board, turn, col, row, king_col, king_row);

				if (test) {
					return false;
				}

			}
		}
	}

	var check_test = this.isInRange(board, -turn, king_col, king_row);

	var hand_num = 0;

	if (turn < 0) {

		for (var i = 2;i <= 8;i++) {
			if (board.up_piece_table[i] > 0) {
				if (this.canTableMovableHand(board, turn, -i, check_test, king_col, king_row)) {
					return false;
				}
			}
		}

	}

	if (turn > 0) {

		for (var i = 2;i <= 8;i++) {
			if (board.down_piece_table[i] > 0) {
				if (this.canTableMovableHand(board, turn, i, check_test, king_col, king_row)) {
					return false;
				}
			}
		}

	}

	return true;

}

</script>
<script>
/*
	繧ｲ繝ｼ繝繝繧ｿ
*/
function SG99A_Game() {

	this.board = null;

	this.up_player = 1;
	this.down_player = 1;

	this.turn_player = 1;
	this.turn_num = 0;

	this.first_player = 1;

	this.up_player_time = 0;
	this.down_player_time = 0;

	this.up_player_turn_time = 0;
	this.down_player_turn_time = 0;

	var now = Date.now();
	var rnd = Math.floor(Math.random() * 16);

	this.game_id = (now % 10000000) * 16 + rnd;
	this.last_hand = null;

}

SG99A_Game.createNewGame = function() {

	var game = new SG99A_Game();

	game.board = SG99A_Board.createBoard();

	return game;

}

SG99A_Game.prototype.clone = function() {

	var game = new SG99A_Game();

	game.board = this.board.clone();

	game.up_player = this.up_player;
	game.down_player = this.down_player;

	game.turn_player = this.turn_player;
	game.turn_num = this.turn_num;

	game.first_player = this.first_player;

	game.up_player_time = this.up_player_time;
	game.down_player_time = this.down_player_time;

	game.up_player_turn_time = this.up_player_turn_time;
	game.down_player_turn_time = this.down_player_turn_time;

	game.game_id = this.game_id;

	return game;

}
</script>
<script>
function SG99A_Component(app, ui_listener) {

	this.app = app;
	this.ui_listener = ui_listener;

	this.draw_scale = this.app.draw_scale;

	this.createElement();

	this.element.style.webkitTouchAction = 'none';
	this.element.style.webkitUserSelect = 'none';
	this.element.style.userSelect = 'none';
	this.element.style.webkitTapHighlightColor = 'rgba(0,0,0,0)';
	this.element.style.tapHighlightColor = 'rgba(0,0,0,0)';

	this.element.addEventListener('click', this.processElementClicked.bind(this), false);
	this.element.addEventListener('touchstart', this.processElementTouchStart.bind(this), false);

	this.last_touch_start_ms = 0;

}

SG99A_Component.prototype.setBackground = function(bg) {

	this.element.style.background = bg;
	this.background = bg;

}

SG99A_Component.prototype.setRect = function(left, top, width, height) {

	this.rect = SG99A_Rect.createRect(left, top, width, height);

	this.onRectSetted();

}

SG99A_Component.prototype.onRectSetted = function() {

	this.draw_scale = this.app.draw_scale;

	this.element.style.width = this.rect.width + 'px';
	this.element.style.height = this.rect.height + 'px';
	this.element.style.left = this.rect.left + 'px';
	this.element.style.top = this.rect.top + 'px';

}

SG99A_Component.prototype.processElementTouchStart = function(e) {

	// 隍焚繧ｿ繝メ縺ｯ辟｡蜉ｹ
	if (e.touches.length >= 2) {

		e.preventDefault();
		e.stopPropagation();

		return false;

	}

	var now = this.app.getTimeMS();

	// 繝繝悶Ν繧ｿ繝辟｡蜉ｹ蛹
	if (now - this.last_touch_start_ms < 300) {

		e.preventDefault();
		e.stopPropagation();

		this.last_touch_start_ms = now;

		return false;

	}

	// 繧ｿ繝メ髢句ｧ区凾蛻ｻ繧定ｨ倬鹸
	this.last_touch_start_ms = now;

}

SG99A_Component.prototype.processElementClicked = function(e) {

	e.preventDefault();
	e.stopPropagation();

	var elm = e.target;

	var element_rect = elm.getBoundingClientRect();

	var element_x = element_rect.left + window.pageXOffset;
	var element_y = element_rect.top + window.pageYOffset;

	var x = e.pageX - element_x;
	var y = e.pageY - element_y;

	this.onElementClicked(x, y);

}

SG99A_Component.prototype.onElementClicked = function(x, y) {
	if (this.ui_listener && this.ui_listener.onListeningComponentClicked) {
		this.ui_listener.onListeningComponentClicked.call(this.ui_listener, this, x, y);
	}
}

SG99A_Component.prototype.getHTMLElement = function() {
	return this.element;
}
</script>
<script>
var SG99A_Button = function(app, ui_listener) {

	SG99A_Component.call(this, app, ui_listener);

}

SG99A_Button.prototype = Object.create(SG99A_Component.prototype);
SG99A_Button.prototype.constructor = SG99A_Button;

SG99A_Button.prototype.createElement = function() {

	this.element = document.createElement('button');

	this.element.style.display = 'inline-block';
	this.element.style.position = 'absolute';

}

SG99A_Button.prototype.setFontSize = function(font_size) {
	this.element.style.fontSize = font_size + 'px';
}

SG99A_Button.prototype.setLabel = function(label) {
	this.element.textContent = label;
}

SG99A_Button.prototype.setEnabled = function(enabled) {
	this.element.disabled = !enabled;
}
</script>
<script>
/*
	荳企Κ諠ｱ陦ｨ遉ｺ繝舌
*/
function SG99A_Header(app, ui_listener) {

	SG99A_Component.call(this, app, ui_listener);

	this.turn_num_label_text = app.text_res['turn_num_label'];

}

SG99A_Header.prototype = Object.create(SG99A_Component.prototype);
SG99A_Header.prototype.constructor = SG99A_Header;

SG99A_Header.prototype.createElement = function() {

	this.element = document.createElement('div');

	this.element.style.position = 'absolute';

	this.start_button = new SG99A_Button(this.app, this);

}

SG99A_Header.prototype.onRectSetted = function() {

	SG99A_Component.prototype.onRectSetted.call(this);

	this.setBackground('#f8f8d8');

	var player_box_width = Math.floor(this.rect.width * 0.35);
	var player_box_height = Math.floor(this.rect.height * 0.5);

	var turn_num_width = Math.floor(this.rect.width * 0.2);
	var turn_num_height = Math.floor(this.rect.height * 0.5);
	var turn_num_left = Math.floor(this.rect.width * 0.48);
	var turn_num_top = Math.floor(this.rect.height * 0.25);

	var player_turn_width = Math.floor(this.rect.width * 0.1);
	var player_name_width = Math.floor(this.rect.width * 0.17);
	var player_time_width = Math.floor(this.rect.width * 0.1);

	var player_turn_font_size = Math.floor(this.rect.height * 0.36);
	var player_name_font_size = Math.floor(this.rect.height * 0.36);
	var player_time_font_size = Math.floor(this.rect.height * 0.32);
	var turn_num_font_size = Math.floor(this.rect.height * 0.32);

	var player_box_left = Math.floor(this.rect.width * 0.04);

	var player_turn_left = 0;
	var player_name_left = player_turn_width;
	var player_time_left = player_name_left + player_name_width;

	var up_player_box_top = 0;
	var down_player_box_top = player_box_height;

	this.up_player_box = document.createElement('div');

	this.up_player_box.style.position = 'absolute';
	this.up_player_box.style.width = player_box_width + 'px';
	this.up_player_box.style.height = player_box_height + 'px';
	this.up_player_box.style.left = player_box_left + 'px';
	this.up_player_box.style.top = up_player_box_top + 'px';
	this.up_player_box.style.margin = 0;
	this.up_player_box.style.padding = 0;

	this.up_player_turn_label = document.createElement('p');

	this.up_player_turn_label.style.position = 'absolute';
	this.up_player_turn_label.style.width = player_turn_width + 'px';
	this.up_player_turn_label.style.height = player_box_height + 'px';
	this.up_player_turn_label.style.left = player_turn_left + 'px';
	this.up_player_turn_label.style.top = 0 + 'px';
	this.up_player_turn_label.style.margin = 0;
	this.up_player_turn_label.style.padding = 0;
	this.up_player_turn_label.style.lineHeight = player_box_height + 'px';
	this.up_player_turn_label.style.fontSize = player_turn_font_size + 'px';

	this.up_player_name_label = document.createElement('p');

	this.up_player_name_label.style.position = 'absolute';
	this.up_player_name_label.style.width = player_name_width + 'px';
	this.up_player_name_label.style.height = player_box_height + 'px';
	this.up_player_name_label.style.left = player_name_left + 'px';
	this.up_player_name_label.style.top = 0 + 'px';
	this.up_player_name_label.style.margin = 0;
	this.up_player_name_label.style.padding = 0;
	this.up_player_name_label.style.lineHeight = player_box_height + 'px';
	this.up_player_name_label.style.fontSize = player_name_font_size + 'px';

	this.up_player_time_label = document.createElement('p');

	this.up_player_time_label.style.position = 'absolute';
	this.up_player_time_label.style.width = player_time_width + 'px';
	this.up_player_time_label.style.height = player_box_height + 'px';
	this.up_player_time_label.style.left = player_time_left + 'px';
	this.up_player_time_label.style.top = 0 + 'px';
	this.up_player_time_label.style.margin = 0;
	this.up_player_time_label.style.padding = 0;
	this.up_player_time_label.style.lineHeight = player_box_height + 'px';
	this.up_player_time_label.style.fontSize = player_time_font_size + 'px';

	this.up_player_box.appendChild(this.up_player_turn_label);
	this.up_player_box.appendChild(this.up_player_name_label);
	this.up_player_box.appendChild(this.up_player_time_label);

	this.down_player_box = document.createElement('div');

	this.down_player_box.style.position = 'absolute';
	this.down_player_box.style.width = player_box_width + 'px';
	this.down_player_box.style.height = player_box_height + 'px';
	this.down_player_box.style.left = player_box_left + 'px';
	this.down_player_box.style.top = down_player_box_top + 'px';
	this.down_player_box.style.margin = 0;
	this.down_player_box.style.padding = 0;

	this.down_player_turn_label = document.createElement('p');

	this.down_player_turn_label.style.position = 'absolute';
	this.down_player_turn_label.style.width = player_turn_width + 'px';
	this.down_player_turn_label.style.height = player_box_height + 'px';
	this.down_player_turn_label.style.left = player_turn_left + 'px';
	this.down_player_turn_label.style.top = 0 + 'px';
	this.down_player_turn_label.style.margin = 0;
	this.down_player_turn_label.style.padding = 0;
	this.down_player_turn_label.style.lineHeight = player_box_height + 'px';
	this.down_player_turn_label.style.fontSize = player_turn_font_size + 'px';

	this.down_player_name_label = document.createElement('p');

	this.down_player_name_label.style.position = 'absolute';
	this.down_player_name_label.style.width = player_name_width + 'px';
	this.down_player_name_label.style.height = player_box_height + 'px';
	this.down_player_name_label.style.left = player_name_left + 'px';
	this.down_player_name_label.style.top = 0 + 'px';
	this.down_player_name_label.style.margin = 0;
	this.down_player_name_label.style.padding = 0;
	this.down_player_name_label.style.lineHeight = player_box_height + 'px';
	this.down_player_name_label.style.fontSize = player_name_font_size + 'px';

	this.down_player_time_label = document.createElement('p');

	this.down_player_time_label.style.position = 'absolute';
	this.down_player_time_label.style.width = player_time_width + 'px';
	this.down_player_time_label.style.height = player_box_height + 'px';
	this.down_player_time_label.style.left = player_time_left + 'px';
	this.down_player_time_label.style.top = 0 + 'px';
	this.down_player_time_label.style.margin = 0;
	this.down_player_time_label.style.padding = 0;
	this.down_player_time_label.style.lineHeight = player_box_height + 'px';
	this.down_player_time_label.style.fontSize = player_time_font_size + 'px';

	this.down_player_box.appendChild(this.down_player_turn_label);
	this.down_player_box.appendChild(this.down_player_name_label);
	this.down_player_box.appendChild(this.down_player_time_label);

	this.turn_num_label = document.createElement('p');

	this.turn_num_label.style.position = 'absolute';
	this.turn_num_label.style.width = turn_num_width + 'px';
	this.turn_num_label.style.height = turn_num_height + 'px';
	this.turn_num_label.style.left = turn_num_left + 'px';
	this.turn_num_label.style.top = turn_num_top + 'px';
	this.turn_num_label.style.margin = 0;
	this.turn_num_label.style.padding = 0;
	this.turn_num_label.style.lineHeight = player_box_height + 'px';
	this.turn_num_label.style.fontSize = turn_num_font_size + 'px';

	var start_width = Math.floor(this.app.default_font_size * 6.4);
	var start_height = this.app.default_font_size * 2.2;

	if (turn_num_font_size < 12) {

		start_width = Math.floor(this.app.default_font_size * 7.2);
		start_height = Math.floor(this.app.default_font_size * 2.32);

	}

	var start_left = this.rect.width - (start_width + this.app.default_font_size);
	var start_top = Math.floor((this.rect.height - start_height) / 2);

	this.start_button.setRect(start_left, start_top, start_width, start_height);
	this.start_button.setLabel(this.app.text_res['start_button_label']);

	this.element.appendChild(this.up_player_box);
	this.element.appendChild(this.down_player_box);
	this.element.appendChild(this.turn_num_label);
	this.element.appendChild(this.start_button.element);

}

SG99A_Header.prototype.onListeningComponentClicked = function(comp, x, y) {

	if (comp == this.start_button) {
		this.app.onStartButtonClicked.call(this.app);
	}

}

SG99A_Header.prototype.setGame = function(game) {
	this.game = game;
}

SG99A_Header.prototype.setBackground = function(bg) {

	SG99A_Component.prototype.setBackground.call(this, bg);

	this.element.style.background = this.background;

}

SG99A_Header.prototype.update = function() {

	if (this.game) {

		this.up_player_name_label.textContent = this.app.text_res['player_label'][this.game.up_player];
		this.down_player_name_label.textContent = this.app.text_res['player_label'][this.game.down_player];

		if (this.game.first_player == -1) {

			this.up_player_turn_label.textContent = this.app.text_res['turn_label_1st'];
			this.down_player_turn_label.textContent = this.app.text_res['turn_label_2nd'];

		} else {

			this.up_player_turn_label.textContent = this.app.text_res['turn_label_2nd'];
			this.down_player_turn_label.textContent = this.app.text_res['turn_label_1st'];

		}

		var up_player_time = Math.floor((this.game.up_player_time + this.game.up_player_turn_time) / 1000);
		var down_player_time = Math.floor((this.game.down_player_time + this.game.down_player_turn_time) / 1000);

		var up_player_hour = Math.floor(up_player_time / 3600);
		var up_player_min = Math.floor((up_player_time % 3600) / 60);
		var up_player_sec = Math.floor(up_player_time % 60);

		var down_player_hour = Math.floor(down_player_time / 3600);
		var down_player_min = Math.floor((down_player_time % 3600) / 60);
		var down_player_sec = Math.floor(down_player_time % 60);

		if (up_player_min <= 9) {
			up_player_min = '0' + up_player_min;
		}

		if (up_player_sec <= 9) {
			up_player_sec = '0' + up_player_sec;
		}

		if (down_player_min <= 9) {
			down_player_min = '0' + down_player_min;
		}

		if (down_player_sec <= 9) {
			down_player_sec = '0' + down_player_sec;
		}

		this.up_player_time_label.textContent = up_player_hour + ':' + up_player_min + ':' + up_player_sec;
		this.down_player_time_label.textContent = down_player_hour + ':' + down_player_min + ':' + down_player_sec;

		this.turn_num_label.textContent = this.turn_num_label_text.replace('[:n:]', this.game.turn_num);

	}

}
</script>
<script>
function SG99A_BoardView(app, ui_listener, cols, rows) {

	SG99A_Component.call(this, app, ui_listener);

	this.cols = cols;
	this.rows = rows;

	this.draw_scale = 1;

	this.cell_width = undefined;
	this.cell_height = undefined;

	this.game = null;
	this.holding = null;
	this.movable_hands = null;

	this.last_moved = null;
	this.lose_cell = null;

}

SG99A_BoardView.prototype = Object.create(SG99A_Component.prototype);
SG99A_BoardView.prototype.constructor = SG99A_BoardView;

SG99A_BoardView.prototype.createElement = function() {

	this.element = document.createElement('canvas');

	this.element.style.display = 'block';
	this.element.style.position = 'absolute';

	this.setBackground('#ccffff');

}

SG99A_BoardView.prototype.onRectSetted = function() {

	SG99A_Component.prototype.onRectSetted.call(this);

	this.draw_scale = this.app.draw_scale;

	this.cell_width = Math.floor(this.rect.width / (this.cols + 0.25));
	this.cell_height = Math.floor(this.rect.height / (this.rows + 0.25));

	this.board_padding_x = Math.floor((this.rect.width - this.cell_width * this.cols) / 2);
	this.board_padding_y = Math.floor((this.rect.height - this.cell_height * this.rows) / 2);

	this.bg_img = document.createElement('canvas');

	var draw_width = this.rect.width * this.draw_scale;
	var draw_height = this.rect.height * this.draw_scale;

	this.draw_width = draw_width;
	this.draw_height = draw_height;

	this.element.width = this.draw_width;
	this.element.height = this.draw_height;

	this.bg_img.width = this.draw_width;
	this.bg_img.height = this.draw_height;

	var context = this.bg_img.getContext('2d');

	var bg_data = context.getImageData(0, 0, this.draw_width, this.draw_height);

	for (var i = 0;i < draw_width * draw_height;i++) {

		var r = Math.floor(188 + Math.random() * 8);
		var g = Math.floor(204 + Math.random() * 12);
		var b = Math.floor(212 + Math.random() * 20);
		var a = 255;

		bg_data.data[i * 4] = r;
		bg_data.data[i * 4 + 1] = g;
		bg_data.data[i * 4 + 2] = b;
		bg_data.data[i * 4 + 3] = a;

	}

	context.putImageData(bg_data, 0, 0);

	var board_padding_x = this.board_padding_x * this.draw_scale;
	var board_padding_y = this.board_padding_y * this.draw_scale;
	var cell_width = this.cell_width * this.draw_scale;
	var cell_height = this.cell_height * this.draw_scale;

	var line_width = Math.min(4, Math.floor(1 + this.rect.width / 500));

	context.fillStyle = '#eeffee';

	context.lineWidth = line_width;
	context.strokeStyle = '#112233';

	// 蜊岼謠冗判
	for (var col = 0;col <= this.cols;col++) {

		context.beginPath();

		context.moveTo(board_padding_x + col * cell_width, board_padding_y);
		context.lineTo(board_padding_x + col * cell_width, board_padding_y + this.rows * cell_height);

		context.closePath();
		context.stroke();

	}

	for (var row = 0;row <= this.rows;row++) {

		context.beginPath();

		context.moveTo(board_padding_x, board_padding_y + row * cell_height);
		context.lineTo(board_padding_x + this.cols * cell_width, board_padding_y + row * cell_height);

		context.closePath();
		context.stroke();

	}

}

SG99A_BoardView.prototype.setPieceImages = function(images) {
	this.piece_images = images;
}

SG99A_BoardView.prototype.setGame = function(game) {
	this.game = game;
}

SG99A_BoardView.prototype.update = function() {

	if (this.bg_img == null) {
		return;
	}

	var context = this.element.getContext('2d');

	var board_padding_x = this.board_padding_x * this.draw_scale;
	var board_padding_y = this.board_padding_y * this.draw_scale;
	var cell_width = this.cell_width * this.draw_scale;
	var cell_height = this.cell_height * this.draw_scale;

	var mark_width = Math.floor(1 + cell_width / 16);

	context.drawImage(this.bg_img, 0, 0);

	if (this.piece_images != null && this.game != null) {

		var cols = this.game.board.cols;
		var board_data = this.game.board.data;

		if (this.last_moved) {

			context.fillStyle = '#6699cc';

			var cell_left = board_padding_x + cell_width * this.last_moved.col;
			var cell_top = board_padding_y + cell_height * this.last_moved.row;

			context.fillRect(cell_left, cell_top, cell_width, cell_height);

		}

		if (this.lose_cell) {

			context.fillStyle = '#cc3333';

			var cell_left = board_padding_x + cell_width * this.lose_cell.col;
			var cell_top = board_padding_y + cell_height * this.lose_cell.row;

			context.fillRect(cell_left, cell_top, cell_width, cell_height);

		}

		if (this.checked_cell) {

			context.fillStyle = '#cc6633';

			var cell_left = board_padding_x + cell_width * this.checked_cell.col;
			var cell_top = board_padding_y + cell_height * this.checked_cell.row;

			context.fillRect(cell_left, cell_top, cell_width, cell_height);

		}

		for (var row = 0;row < this.rows;row++) {
			for (var col = 0;col < this.cols;col++) {

				var piece = board_data[col + row * cols];

				var cell_left = board_padding_x + cell_width * col;
				var cell_top = board_padding_y + cell_height * row;

				if (this.piece_images[piece]) {
					context.drawImage(this.piece_images[piece], cell_left, cell_top);
				}

			}
		}

		if (this.holding && this.holding.row >= 0) {

			context.strokeStyle = '#333399';
			context.lineWidth = mark_width;

			var cell_left = board_padding_x + cell_width * this.holding.col;
			var cell_top = board_padding_y + cell_height * this.holding.row;

			context.strokeRect(cell_left + 1, cell_top + 1, cell_width - 2, cell_height - 2);

		}

		if (this.movable_hands) {

			context.fillStyle = '#999966';

			for (var i = 0;i < this.movable_hands.length;i++) {

				var hand = this.movable_hands[i];

				var cell_center_x = Math.floor(board_padding_x + cell_width * (hand.to_col + 0.5));
				var cell_center_y = Math.floor(board_padding_y + cell_height * (hand.to_row + 0.5));

				var dot_range = Math.floor(cell_width / 8);

				context.fillRect(cell_center_x - dot_range, cell_center_y - dot_range, dot_range * 2, dot_range * 2);

			}

		}

	}

}

SG99A_BoardView.prototype.onElementClicked = function(x, y) {

	var col = Math.floor((x - this.board_padding_x) / this.cell_width);
	var row = Math.floor((y - this.board_padding_y) / this.cell_height);

	if (col >= 0 && col < this.cols && row >= 0 && row < this.rows) {
		this.ui_listener.onBoardViewCellClicked(col, row);
	}

}

SG99A_BoardView.prototype.setHolding = function(col, row) {

	this.holding = {'col': col, 'row': row};

	this.update();

}

SG99A_BoardView.prototype.resetHolding = function() {

	this.holding = null;

	this.update();

}

SG99A_BoardView.prototype.setMovableHands = function(hands) {

	this.movable_hands = hands;

	this.update();

}

SG99A_BoardView.prototype.resetMovableHands = function() {

	this.movable_hands = null;

	this.update();

}

SG99A_BoardView.prototype.setCheckedCell = function(cell) {

	this.checked_cell = cell;

	this.update();

}
SG99A_BoardView.prototype.resetCheckedCell = function() {

	this.checked_cell = null;

	this.update();

}

SG99A_BoardView.prototype.getLastMoved = function() {
	return this.last_moved;
}

SG99A_BoardView.prototype.setLastMoved = function(col, row) {
	this.last_moved = {'col': col, 'row': row};
}

SG99A_BoardView.prototype.resetLastMoved = function() {
	this.last_moved = null;
}

SG99A_BoardView.prototype.setLose = function(player) {

	var lose_col = -1;
	var lose_row = -1;

	for (var row = 0;row < this.rows;row++) {
		for (var col = 0;col < this.cols;col++) {
			if (this.game.board.data[col + row * this.cols] * player == SG99A_Piece.OU) {

				lose_col = col;
				lose_row = row;

				break;

			}
		}
	}

	this.lose_cell = {'col': lose_col, 'row': lose_row};

}

SG99A_BoardView.prototype.resetLose = function() {
	this.lose_cell = null;
}

SG99A_BoardView.prototype.reset = function() {

	this.resetHolding();
	this.resetHolding();
	this.resetMovableHands();
	this.resetCheckedCell();
	this.resetLastMoved();
	this.resetLose();

}
</script>
<script>
/*
縲謖√■鬧定｡ｨ遉ｺ繧ｳ繝ｳ繝昴繝阪Φ繝
*/
function SG99A_TableView(app, ui_listener, position, pieces) {

	SG99A_Component.call(this, app, ui_listener);

	this.position = position;

	// 荳雁縺ｪ繧我ｸ贋ｸ句渚霆｢陦ｨ遉ｺ
	if (this.position == -1) {

		this.element.style.webkitTransform = 'rotate(180deg)';
		this.element.style.transform = 'rotate(180deg)';

	}

	this.pieces = new Array(7);

	this.pieces[0] = {};
	this.pieces[0].piece = SG99A_Piece.KIN;
	this.pieces[0].image = null;
	this.pieces[0].num = 0;

	this.pieces[1] = {};
	this.pieces[1].piece = SG99A_Piece.GIN;
	this.pieces[1].image = null;
	this.pieces[1].num = 0;

	this.pieces[2] = {};
	this.pieces[2].piece = SG99A_Piece.KEI;
	this.pieces[2].image = null;
	this.pieces[2].num = 0;

	this.pieces[3] = {};
	this.pieces[3].piece = SG99A_Piece.KYO;
	this.pieces[3].image = null;
	this.pieces[3].num = 0;

	this.pieces[4] = {};
	this.pieces[4].piece = SG99A_Piece.SHA;
	this.pieces[4].image = null;
	this.pieces[4].num = 0;

	this.pieces[5] = {};
	this.pieces[5].piece = SG99A_Piece.KAKU;
	this.pieces[5].image = null;
	this.pieces[5].num = 0;

	this.pieces[6] = {};
	this.pieces[6].piece = SG99A_Piece.FU;
	this.pieces[6].image = null;
	this.pieces[6].num = 0;

	this.selected_col = 0;

	this.active_bg = '#e0d8e8';
	this.inactive_bg = '#a0a0a8';
	this.win_bg = '#c8c8e8';
	this.lose_bg = '#b0a0a0';

	this.active_count = -1;
	this.win_count = -1;

	this.setActive(false);

}

SG99A_TableView.prototype = Object.create(SG99A_Component.prototype);
SG99A_TableView.prototype.constructor = SG99A_TableView;

SG99A_TableView.prototype.createElement = function() {

	this.element = document.createElement('canvas');

	this.element.style.display = 'block';
	this.element.style.position = 'absolute';

}

SG99A_TableView.prototype.onRectSetted = function() {

	SG99A_Component.prototype.onRectSetted.call(this);

	this.draw_width = Math.floor(this.rect.width * this.draw_scale);
	this.draw_height = Math.floor(this.rect.height * this.draw_scale);

	this.element.width = this.draw_width;
	this.element.height = this.draw_height;

	this.element.style.width = this.rect.width + 'px';
	this.element.style.height = this.rect.height + 'px';

}

SG99A_TableView.prototype.setActive = function(active) {

	if (active) {

		this.setBackground(this.active_bg);

		this.active_count = 0;

	} else {

		this.setBackground(this.inactive_bg);

		this.active_count = -1;

	}

}

SG99A_TableView.prototype.setResult = function(result) {

	this.active_count = -1;

	if (result) {

		this.setBackground(this.win_bg);
		this.win_count = 0;

	} else {

		this.setBackground(this.lose_bg);

	}

}

SG99A_TableView.prototype.setPieceImages = function(images) {

	var col_span = Math.floor(this.rect.width / 7);
	var col_padding_x = Math.floor((col_span - images[2].width / this.draw_scale) / 2);

	var col_draw_span = Math.floor((this.rect.width * this.draw_scale) / 7);
	var col_draw_padding_x = Math.floor((col_draw_span - images[2].width) / 2);

	this.num_font_size = Math.floor(2 + col_draw_span / 3.5);
	this.num_font = this.num_font_size + "px 'Times New Roman'";

	for (var i = 0;i < 7;i++) {

		this.pieces[i].image = images[this.pieces[i].piece];

		this.pieces[i].left = col_span * i + col_padding_x;
		this.pieces[i].top = Math.floor(this.rect.height / 30);

		this.pieces[i].draw_left = col_draw_padding_x + col_draw_span * i;
		this.pieces[i].draw_top = Math.floor((this.pieces[i].top / 4) * this.draw_scale - 2);

		this.pieces[i].piece_draw_width = images[2].width;
		this.pieces[i].piece_draw_height = images[2].height;

		this.pieces[i].piece_width = Math.floor(images[2].width / this.draw_scale);
		this.pieces[i].piece_height = Math.floor(images[2].height / this.draw_scale);

		this.pieces[i].rect = SG99A_Rect.createRect(this.pieces[i].left, this.pieces[i].top, this.pieces[i].piece_width, Math.floor(this.pieces[i].piece_height * 1.2));

		this.pieces[i].piece_draw_rect = SG99A_Rect.createRect(this.pieces[i].draw_left, this.pieces[i].draw_top, this.pieces[i].piece_draw_width, this.pieces[i].piece_draw_height);

		this.pieces[i].center_x = Math.floor((this.pieces[i].left + images[2].width / 2) * this.draw_scale);
		this.pieces[i].num_draw_y = Math.floor(this.pieces[i].piece_draw_rect.bottom + this.num_font_size * 0.06);

	}

}

SG99A_TableView.prototype.setGame = function(game) {

	this.win_count = -1;
	this.active_count = -1;

	this.game = game;

}

SG99A_TableView.prototype.setSelectedCol = function(col) {
	this.selected_col = col;
}

SG99A_TableView.prototype.resetSelectedCol = function() {
	this.selected_col = 0;
}

SG99A_TableView.prototype.update = function() {

	var context = this.element.getContext('2d');

	context.fillStyle = this.background;
	context.fillRect(0, 0, this.draw_width, this.draw_height);

	var mark_width = Math.floor(1 + this.pieces[0].piece_draw_rect.width / 20);

	if (this.active_count >= 0) {

		var active_r = ((this.active_count % 101) / 100);
		var alpha = 0.25 + active_r * 0.7;

		var active_x = Math.floor(this.draw_width * active_r);

		context.strokeStyle = 'rgba(255, 255, 255, ' + alpha + ')';
		context.lineWidth = mark_width;

		context.beginPath();

		context.moveTo(active_x, 0);
		context.lineTo(active_x, this.draw_height);

		context.closePath();
		context.stroke();

		this.active_count++;

	}

	context.fillStyle = '#000000';
	context.font = this.num_font;
	context.textAlign = 'center';
	context.textBaseline = 'top';

	if (this.game != null) {

		if (this.position == -1) {
			for (var i = 0;i < 7;i++) {
				this.pieces[i].num = this.game.board.up_piece_table[this.pieces[i].piece];
			}
		}

		if (this.position == 1) {
			for (var i = 0;i < 7;i++) {
				this.pieces[i].num = this.game.board.down_piece_table[this.pieces[i].piece];
			}
		}

	}

	for (var i = 0;i < 7;i++) {

		context.drawImage(this.pieces[i].image, this.pieces[i].draw_left, this.pieces[i].draw_top);

		context.fillText(this.pieces[i].num, this.pieces[i].piece_draw_rect.center_x, this.pieces[i].num_draw_y);

		if (this.pieces[i].piece == this.selected_col) {

			context.strokeStyle = '#003399';
			context.lineWidth = mark_width;

			context.strokeRect(this.pieces[i].piece_draw_rect.left + mark_width, this.pieces[i].piece_draw_rect.top + mark_width, this.pieces[i].piece_draw_rect.width - mark_width * 2, this.pieces[i].piece_draw_rect.height - mark_width);

		}

	}

	if (this.win_count >= 0) {

		var win_r = ((this.win_count % 51) / 50);
		var alpha = Math.min(1.0, 0.25 + win_r * 0.85);

		context.strokeStyle = 'rgba(255, 255, 255, ' + alpha + ')';
		context.lineWidth = mark_width * 2;

		context.strokeRect(mark_width, mark_width, this.draw_width - mark_width * 2, this.draw_height - mark_width * 2);

		this.win_count++;

	}

}

SG99A_TableView.prototype.onElementClicked = function(x, y) {

	for (var i = 0;i < 7;i++) {
		if (this.pieces[i].rect.contains(x,y)) {

			if (this.position == -1) {
				this.ui_listener.onTableViewClicked(this, this.pieces[6 - i].piece);
			} else {
				this.ui_listener.onTableViewClicked(this, this.pieces[i].piece);
			}

			break;

		}
	}

}
</script>
<script>
/*
	将棋ゲーム本体
*/
function SG99A(element, left, top, width, height) {

	var frame_r_width = 1.0;

	this.header_r_height = 0.1;
	this.board_r_height = 1.0;
	this.table_r_height = 0.15;

	var frame_aspect = frame_r_width / (this.header_r_height + (this.table_r_height * 2) + this.board_r_height);

	// 配置サイズ算出
	var frame_width = Math.min(width, Math.floor(height / frame_aspect));
	var frame_height = Math.floor(frame_width / frame_aspect);

	this.rect = SG99A_Rect.createRect(left, top, frame_width, frame_height);

	this.element = document.createElement('div');

	this.element.style.position = 'relative';
	this.element.style.width = frame_width + 'px';
	this.element.style.height = frame_height + 'px';
	this.element.style.background = '#336699';

	element.appendChild(this.element);

	element.addEventListener('touchstart', function(e) {
		e.stopPropagation();
	}, false);

	this.init();

}

SG99A.GAME_STAGE_NONE = 0;
SG99A.GAME_STAGE_UP_HUMAN_SELECTING = 1;
SG99A.GAME_STAGE_UP_HUMAN_HOLDING = 2;
SG99A.GAME_STAGE_UP_HUMAN_PUTING = 3;
SG99A.GAME_STAGE_UP_HUMAN_PUTTED = 4;
SG99A.GAME_STAGE_UP_CPU_SELECTING = 5;
SG99A.GAME_STAGE_UP_CPU_HOLDING = 6;
SG99A.GAME_STAGE_UP_CPU_PUTTED = 7;
SG99A.GAME_STAGE_DOWN_HUMAN_SELECTING = 8;
SG99A.GAME_STAGE_DOWN_HUMAN_HOLDING = 9;
SG99A.GAME_STAGE_DOWN_HUMAN_PUTING = 10;
SG99A.GAME_STAGE_DOWN_HUMAN_PUTTED = 11;
SG99A.GAME_STAGE_DOWN_CPU_SELECTING = 12;
SG99A.GAME_STAGE_DOWN_CPU_HOLDING = 13;
SG99A.GAME_STAGE_DOWN_CPU_PUTTED = 14;
SG99A.GAME_STAGE_RESULT = 15;
SG99A.GAME_STAGE_DRAW = 16;

SG99A.PLAYER_NONE = 0;
SG99A.PLAYER_HUMAN = 1;
SG99A.PLAYER_CPU_LV1 = 2;
SG99A.PLAYER_CPU_LV2 = 3;
SG99A.PLAYER_CPU_LV3 = 4;
SG99A.PLAYER_CPU_LV4 = 5;

SG99A.prototype.random = function() {
	return this.rnd.nextFloat();
}

SG99A.prototype.randomInt = function(max) {
	return Math.floor(this.rnd.nextFloat() * (max + 1));
}

SG99A.prototype.init = function() {

	// 盤面サイズ
	this.board_cols = 9;
	this.board_rows = 9;

	// 成り範囲
	this.board_promote_rows = 3;

	// Canvas描画倍率
	this.draw_scale = 1;

	// 文字列リソース
	this.text_res = [];

	this.text_res['promote_dialog_text'] = '成りますか？';
	this.text_res['promote_dialog_yes'] = 'はい';
	this.text_res['promote_dialog_no'] = 'いいえ';
	this.text_res['start_button_label'] = '新ゲーム';
	this.text_res['undo_button_label'] = '待った';
	this.text_res['player_human'] = '人間';
	this.text_res['cpu_lv1'] = 'CPU Lv1';
	this.text_res['cpu_lv2'] = 'CPU Lv2';
	this.text_res['cpu_lv3'] = 'CPU Lv3';
	this.text_res['cpu_lv4'] = 'CPU Lv4';
	this.text_res['setting_1st'] = '先 手';
	this.text_res['setting_2nd'] = '後 手';
	this.text_res['setting_ok'] = '決 定';
	this.text_res['setting_cancel'] = '戻 る';
	this.text_res['turn_label_1st'] = '先手';
	this.text_res['turn_label_2nd'] = '後手';
	this.text_res['turn_num_label'] = '[:n:]手目';
	this.text_res['player_label'] = [];
	this.text_res['player_label'][SG99A.PLAYER_HUMAN] = '人間';
	this.text_res['player_label'][SG99A.PLAYER_CPU_LV1] = 'CPU LV1';
	this.text_res['player_label'][SG99A.PLAYER_CPU_LV2] = 'CPU LV2';
	this.text_res['player_label'][SG99A.PLAYER_CPU_LV3] = 'CPU LV3';
	this.text_res['player_label'][SG99A.PLAYER_CPU_LV4] = 'CPU LV4';

	this.piece = new SG99A_Piece();

	this.piece_images = null;

	// ピクセル表示倍率に応じてCanvas描画倍率を設定
	if (window.devicePixelRatio) {

		if (window.devicePixelRatio >= 1.5 && this.rect.width < 800) {
			this.draw_scale = 1.5;
		}

		if (window.devicePixelRatio >= 2.0 && this.rect.width < 500) {
			this.draw_scale = 2.0;
		}

		if (window.devicePixelRatio >= 3.0 && this.rect.width < 400) {
			this.draw_scale = 3.0;
		}

	}

	this.default_font_size = 4 + Math.floor(this.rect.width / 40);

	var header_width = this.rect.width;
	var header_height = Math.floor(this.rect.width * this.header_r_height);

	var table_height = Math.floor(this.rect.width * this.table_r_height);
	var table_width = Math.floor(table_height * 5.2);

	var board_height = Math.floor(this.rect.width * this.board_r_height);
	var board_width = board_height;

	var header_left = 0;
	var header_top = 0;

	var up_table_left = this.rect.width - table_width;
	var up_table_top = header_top + header_height;

	var board_left = 0;
	var board_top = up_table_top + table_height;

	var down_table_left = 0;
	var down_table_top = board_top + board_height;

	this.header = new SG99A_Header(this, this);
	this.board_view = new SG99A_BoardView(this, this, this.board_cols, this.board_cols);

	this.up_table_view = new SG99A_TableView(this, this, -1, [SG99A_Piece.KIN, SG99A_Piece.GIN, SG99A_Piece.KEI, SG99A_Piece.KYO, SG99A_Piece.SHA, SG99A_Piece.KAKU]);
	this.down_table_view = new SG99A_TableView(this, this, 1, [SG99A_Piece.KIN, SG99A_Piece.GIN, SG99A_Piece.KEI, SG99A_Piece.KYO, SG99A_Piece.SHA, SG99A_Piece.KAKU]);

	this.header.setRect(header_left, header_top, header_width, header_height);
	this.board_view.setRect(board_left, board_top, board_width, board_height);

	this.up_table_view.setRect(up_table_left, up_table_top, table_width, table_height);
	this.down_table_view.setRect(down_table_left, down_table_top, table_width, table_height);

	this.PromoteDialog = {};

	this.PromoteDialog.element = document.createElement('div');

	this.PromoteDialog.element.style.display = 'none';
	this.PromoteDialog.element.style.position = 'absolute';
	this.PromoteDialog.element.style.border = '2px solid';
	this.PromoteDialog.element.style.background = '#d8e0e4';
	this.PromoteDialog.element.style.width = Math.floor(this.board_view.rect.width * 0.52) + 'px';
	this.PromoteDialog.element.style.height = Math.floor(this.board_view.rect.width * 0.3) + 'px';
	this.PromoteDialog.element.style.left = Math.floor(this.board_view.rect.width * 0.23) + 'px';
	this.PromoteDialog.element.style.top = Math.floor(this.board_view.rect.width * 0.65) + 'px';

	this.PromoteDialog.text = document.createElement('div');

	this.PromoteDialog.text.style.position = 'absolute';
	this.PromoteDialog.text.style.width = Math.floor(this.board_view.rect.width * 0.54) + 'px';
	this.PromoteDialog.text.style.height = Math.floor(this.board_view.rect.width * 0.1) + 'px';
	this.PromoteDialog.text.style.fontSize = this.default_font_size + 'px';

	this.PromoteDialog.text.style.textAlign = 'center';
	this.PromoteDialog.text.textContent = this.text_res['promote_dialog_text'];

	this.PromoteDialog.element.appendChild(this.PromoteDialog.text);

	this.PromoteDialog.yes_button = document.createElement('button');

	this.PromoteDialog.yes_button.style.position = 'absolute';
	this.PromoteDialog.yes_button.style.width = Math.floor(this.board_view.rect.width * 0.18) + 'px';
	this.PromoteDialog.yes_button.style.height = Math.floor(this.board_view.rect.width * 0.1) + 'px';
	this.PromoteDialog.yes_button.style.left = Math.floor(this.board_view.rect.width * 0.06) + 'px';
	this.PromoteDialog.yes_button.style.top = Math.floor(this.board_view.rect.width * 0.16) + 'px';
	this.PromoteDialog.yes_button.style.fontSize = this.default_font_size + 'px';
	this.PromoteDialog.yes_button.textContent = this.text_res['promote_dialog_yes'];

	this.PromoteDialog.element.appendChild(this.PromoteDialog.yes_button);


	this.PromoteDialog.no_button = document.createElement('button');

	this.PromoteDialog.no_button.style.position = 'absolute';
	this.PromoteDialog.no_button.style.width = Math.floor(this.board_view.rect.width * 0.18) + 'px';
	this.PromoteDialog.no_button.style.height = Math.floor(this.board_view.rect.width * 0.1) + 'px';
	this.PromoteDialog.no_button.style.left = Math.floor(this.board_view.rect.width * 0.29) + 'px';
	this.PromoteDialog.no_button.style.top = Math.floor(this.board_view.rect.width * 0.16) + 'px';
	this.PromoteDialog.no_button.style.fontSize = this.DefaultFontSize + 'px';
	this.PromoteDialog.no_button.textContent = this.text_res['promote_dialog_no'];

	this.PromoteDialog.element.appendChild(this.PromoteDialog.no_button);

	this.PromoteDialog.yes_button.addEventListener('click', this.onPromoteYesButtonClicked.bind(this));
	this.PromoteDialog.no_button.addEventListener('click', this.onPromoteNoButtonClicked.bind(this));

	this.start_button = document.createElement('button');

	this.start_button.style.display = 'inline-block';
	this.start_button.style.position = 'absolute';
	this.start_button.style.top = Math.floor((header_height - this.default_font_size * 2.5) / 2) + 'px';
	this.start_button.style.right = Math.floor(this.default_font_size) + 'px';
	this.start_button.style.width = Math.floor(this.default_font_size * 8) + 'px';
	this.start_button.style.height = Math.floor(this.default_font_size * 2.5) + 'px';
	this.start_button.innerHTML = this.text_res['start_button_label'];

	var table_space_x = this.rect.width - table_width;
	var undo_width = Math.floor(table_space_x * 0.8);
	var undo_height = Math.floor(table_height * 0.6);

	this.up_undo_button = new SG99A_Button(this, this);
	this.up_undo_button.setRect(Math.floor(table_space_x * 0.1), up_table_top + Math.floor(table_height * 0.2), undo_width, undo_height);
	this.up_undo_button.setFontSize(Math.floor(this.default_font_size * 0.9));
	this.up_undo_button.setLabel(this.text_res['undo_button_label']);
	this.up_undo_button.element.style.webkitTransform = 'rotate(180deg)';
	this.up_undo_button.element.style.transform = 'rotate(180deg)';

	this.down_undo_button = new SG99A_Button(this, this);
	this.down_undo_button.setRect(Math.floor(this.rect.width - table_space_x * 0.1) - undo_width, Math.floor(this.rect.height - table_height * 0.2) - undo_height, undo_width, undo_height);
	this.down_undo_button.setFontSize(Math.floor(this.default_font_size * 0.9));
	this.down_undo_button.setLabel(this.text_res['undo_button_label']);

	setTimeout(this.createResources.bind(this), 10);

}

// 画像（駒image）作成
SG99A.prototype.createResources = function() {

	this.piece.createPieceImages(this.board_view.cell_width * this.board_view.draw_scale, this.board_view.cell_height * this.board_view.draw_scale);

	setTimeout(this.onResourcesSetuped.bind(this), 10);

}

// 画像作成完了
SG99A.prototype.onResourcesSetuped = function() {

	this.up_table_view.setPieceImages(this.piece.images);
	this.down_table_view.setPieceImages(this.piece.images);

	this.board_view.setPieceImages(this.piece.images);

	// 画面構成コンポーネントを配置
	this.element.appendChild(this.header.getHTMLElement());
	this.element.appendChild(this.up_table_view.getHTMLElement());
	this.element.appendChild(this.board_view.getHTMLElement());
	this.element.appendChild(this.down_table_view.getHTMLElement());
	this.element.appendChild(this.PromoteDialog.element);
	this.element.appendChild(this.up_undo_button.element);
	this.element.appendChild(this.down_undo_button.element);

	this.game = null;
	this.game_log = null;

	this.board_processer = new SG99A_BoardProcesser(this.board_cols, this.board_rows, this.board_promote_rows);

	this.game_stage = SG99A.GAME_STAGE_NONE;
	this.movable_hands = null;

	var init_rnd_seed = 1 + Date.now() % 1000000;

	// 乱数初期化
	this.rnd = new SG99A_Random(init_rnd_seed);

	this.workers_num = 0;
	this.workers = null;

	this.max_cpu_level = 1;
	this.default_cpu_level = 1;

	// Web Workers設定
	if (window.Worker) {

		this.workers_num = 3;

		this.max_cpu_level = 4;
		this.default_cpu_level = 2;

		// CPU数を取得
		if (window.navigator.hardwareConcurrency) {

			var cpu_num = window.navigator.hardwareConcurrency;

			if (cpu_num > 0) {

				this.workers_num = cpu_num - 1;

				if (this.workers_num < 3) {
					this.workers_num = 3;
				}

				if (this.workers_num > 7) {
					this.workers_num = 7;
				}

			}

			// 端末種別に応じてWorker数制限
			if (cpu_num >= 4) {

				var ua = window.navigator.userAgent;

				if (ua && (ua.indexOf('Android 6.') >= 0 || ua.indexOf('Android 7.') >= 0 || ua.indexOf('Android 8.') >= 0 || ua.indexOf('iPhone OS 10_') >= 0 || ua.indexOf('iPhone OS 10_') >= 0)) {
					this.default_cpu_level = 3;
				}

				if (ua && ua.indexOf('Windows') >= 0) {
					this.default_cpu_level = 4;
				}

			}

		}

		this.workers = [];

		for (var i = 0;i < this.workers_num;i++) {

			this.workers[i] = new Worker('sg99a/SG99A_Worker.js');
			this.workers[i].addEventListener('message', this.onWorkerMessage.bind(this));

		}

	}

	this.startGame(SG99A_Game.createNewGame());

	this.player_dialog = new SG99A_PlayerDialog(this, this);
	this.player_dialog.setRect(this.rect.left, this.rect.top, this.rect.width, this.rect.height);

	this.element.appendChild(this.player_dialog.element);

	this.process_count = 0;

	// 更新処理用ループ開始
	if (window.requestAnimationFrame) {
		requestAnimationFrame(this.process.bind(this));
	} else {
		setTimeout(this.process.bind(this), 30);
	}

}

SG99A.prototype.setGame = function(game) {

	this.game = game;

	this.header.setGame(this.game);
	this.board_view.setGame(this.game);
	this.up_table_view.setGame(this.game);
	this.down_table_view.setGame(this.game);

	this.game_id = this.game.game_id;

}

// 時刻取得
SG99A.prototype.getTimeMS = function() {

	if (window.performance && window.performance.now) {
		return performance.now();
	} else {
		return Date.now();
	}

}

// 更新ループ（定期処理）
SG99A.prototype.process = function() {

	switch (this.game_stage) {

	case SG99A.GAME_STAGE_UP_HUMAN_SELECTING:
	case SG99A.GAME_STAGE_UP_HUMAN_PUTING:
	case SG99A.GAME_STAGE_UP_HUMAN_HOLDING:
	case SG99A.GAME_STAGE_UP_CPU_SELECTING:
	case SG99A.GAME_STAGE_UP_CPU_HOLDING:

		var turn_ms = this.getTimeMS() - this.turn_start_ms;
		this.game.up_player_turn_time = turn_ms;

		break;

	case SG99A.GAME_STAGE_DOWN_HUMAN_SELECTING:
	case SG99A.GAME_STAGE_DOWN_HUMAN_HOLDING:
	case SG99A.GAME_STAGE_DOWN_HUMAN_PUTING:
	case SG99A.GAME_STAGE_DOWN_CPU_SELECTING:
	case SG99A.GAME_STAGE_DOWN_CPU_HOLDING:

		var turn_ms = this.getTimeMS() - this.turn_start_ms;
		this.game.down_player_turn_time = turn_ms;

		break;

	}

	// 画面更新
	if (this.process_count % 2 == 0) {
		this.update();
	}

	this.process_count++;

	if (window.requestAnimationFrame) {
		requestAnimationFrame(this.process.bind(this));
	} else {
		setTimeout(this.process.bind(this), 30);
	}

}

// CPU処理準備第一段階
SG99A.prototype.startCPUProcess = function(game, level) {

	this.processing = {};

	this.processing.game = game;
	this.processing.level = level;

	this.processing.stage = 1;

	this.processing.board_processer = new SG99A_BoardProcesser(9, 9, 3);

	this.processing.board_my_king_col = undefined;
	this.processing.board_my_king_row = undefined;
	this.processing.board_enemy_king_col = undefined;
	this.processing.board_enemy_king_row = undefined;

	this.processing.board_up_range_map = null;
	this.processing.board_down_range_map = null;

	this.processCPU(this.processing);

}

// CPU処理準備第一段階
SG99A.prototype.processCPU = function(processing) {

	var board_processer = this.processing.board_processer;

	var level = this.processing.level;

	var game = this.processing.game;
	var board = game.board;
	var turn = game.turn_player;

	var cols = board.cols;
	var rows = board.rows;
	var cells = board.cells;

	switch (this.processing.stage) {

	case 1:

		var l1_board = SG99A_Board.createBoard();
		var l2_board = SG99A_Board.createBoard();

		this.processing.board_up_range_map = new Int32Array(cells);
		this.processing.board_down_range_map = new Int32Array(cells);

		var up_range_map = new Int32Array(cells);
		var down_range_map = new Int32Array(cells);

		var board_my_range_map = null;
		var board_enemy_range_map = null;

		var my_king, enemy_king;

		if (turn == -1) {

			my_king = -SG99A_Piece.OU;
			enemy_king = SG99A_Piece.OU;

			board_my_range_map = this.processing.board_up_range_map;
			board_enemy_range_map = this.processing.board_down_range_map;

		} else {

			my_king = SG99A_Piece.OU;
			enemy_king = -SG99A_Piece.OU;

			board_my_range_map = this.processing.board_down_range_map;
			board_enemy_range_map = this.processing.board_up_range_map;

		}

		for (var row = 0;row < rows;row++) {

			var rc = row * cols;

			for (var col = 0;col < cols;col++) {

				if (board.data[col + rc] == my_king) {

					this.processing.board_my_king_col = col;
					this.processing.board_my_king_row = row;

				}

				if (board.data[col + rc] == enemy_king) {

					this.processing.board_enemy_king_col = col;
					this.processing.board_enemy_king_row = row;

				}

			}

		}

		// 駒効きマップ作製
		board_processer.setRangeMap(board, this.processing.board_up_range_map, this.processing.board_down_range_map);

		var hand = null;

		var l1_raw_hands = board_processer.getAllMovableHandWithKingPos(board, turn, this.processing.board_my_king_col, this.processing.board_my_king_row);
		var l1_raw_hands_num = l1_raw_hands.length;

		var l1_hands = [];

		// 車角歩の不成手を削除
		for (var i = 0;i < l1_raw_hands_num;i++) {

			var l1_hand = l1_raw_hands[i];

			if (l1_hand.from_row >= 0 && !l1_hand.promote) {

				var piece = board.data[l1_hand.from_col + l1_hand.from_row * cols];

				if ((piece == SG99A_Piece.SHA || piece == SG99A_Piece.KAKU || piece == SG99A_Piece.FU) && (l1_hand.from_row < SG99A_Board.PROMOTE_ROWS || l1_hand.to_row < SG99A_Board.PROMOTE_ROWS)) {
					l1_hand = null;
				}

				if (l1_hand != null && (piece == -SG99A_Piece.SHA || piece == -SG99A_Piece.KAKU || piece == -SG99A_Piece.FU) && (l1_hand.from_row >= (rows - SG99A_Board.PROMOTE_ROWS) || l1_hand.to_row >= (rows - SG99A_Board.PROMOTE_ROWS))) {
					l1_hand = null;
				}

			}

			if (l1_hand != null) {
				l1_hands.push(l1_hand);
			}

		}

		l1_raw_hands = null;

		var l1_hands_num = l1_hands.length;

		// 候補手を乱数でシャッフル
		for (var i = 0;i < l1_hands_num;i++) {

			var i1 = this.rnd.nextInt() % l1_hands_num;
			var i2 = this.rnd.nextInt() % l1_hands_num;

			if (i1 != i2) {

				var tmp = l1_hands[i1];

				l1_hands[i1] = l1_hands[i2];
				l1_hands[i2] = tmp;

			}

		}

		var l1_enemy_king_col = this.processing.board_enemy_king_col;
		var l1_enemy_king_row = this.processing.board_enemy_king_row;

		var addtional_hands = [];

		for (var i = 0;i < l1_hands_num;i++) {

			var l1_my_king_col = this.processing.board_my_king_col;
			var l1_my_king_row = this.processing.board_my_king_row;

			var l1_hand = l1_hands[i];

			l1_hand.board_score = 0;

			l1_hand.score[0] = 0;
			l1_hand.score[1] = 0;
			l1_hand.score[2] = 0;

			// 王の移動を反映
			if (l1_hand.from_col == l1_my_king_col && l1_hand.from_row == l1_my_king_row) {

				l1_my_king_col = l1_hand.to_col;
				l1_my_king_row = l1_hand.to_row;

			}

			if (!board_enemy_range_map[l1_hand.to_col + l1_hand.to_row * cols]) {
				if (l1_hand.from_row >= 0 && board.data[l1_hand.to_col + l1_hand.to_row * cols] == SG99A_Piece.FU) {

					var target_piece = board.data[l1_hand.to_col + (l1_hand.to_row - 1) * cols];

					if (target_piece == SG99A_Piece.KAKU) {
						addtional_hands.push(l1_hand);
					}

				}
			}

			// 候補手を打った盤面を作成
			l1_board.set(board);
			l1_board.putHand(l1_hand);

			// 敵の候補手を列挙
			var l2_hands = board_processer.getAllMovableHandWithKingPos(l1_board, -turn, l1_enemy_king_col, l1_enemy_king_row);
			var l2_hands_num = l2_hands.length;

			// 敵方打つ手なし（詰め）
			if (l2_hands_num == 0) {

				// 打ち歩詰め
				if (l1_hand.from_row == -1 && Math.abs(l1_hand.from_col) == SG99A_Piece.FU) {

					l1_hand.score[0] = SG99A_BoardProcesser.MIN_SCORE;

					continue;

				} else {

					this.onCPUHandSelected(game, turn, l1_hand);

					return;

				}

				break;

			}

			var l1_up_range_map = new Int32Array(cells);
			var l1_down_range_map = new Int32Array(cells);

			var l1_my_range_map = null;
			var l1_enemy_range_map = null;

			// 駒効きマップ作製
			board_processer.setRangeMap(l1_board, l1_up_range_map, l1_down_range_map);

			if (turn == -1) {

				l1_my_range_map = l1_up_range_map;
				l1_enemy_range_map = l1_down_range_map;

			} else {

				l1_my_range_map = l1_down_range_map;
				l1_enemy_range_map = l1_up_range_map;

			}

			// 最下段から桂馬を上げる手を抑制
			if ((turn == 1) && (l1_hand.from_row == rows - 1) && (board.data[l1_hand.from_col + l1_hand.from_row * cols] == SG99A_Piece.KEI)) {
				l1_hand.score[2] -= 5;
			}

			// 最上段から桂馬を下げる手を抑制
			if ((turn == -1) && (l1_hand.from_row == 0) && (board.data[l1_hand.from_col] == -SG99A_Piece.KEI)) {
				l1_hand.score[2] -= 5;
			}

			var hand_c = l1_hand.to_col;
			var hand_r = l1_hand.to_row;

			// 勢力圏外の取られる位置に駒を打つ手を抑制
			if (board_enemy_range_map[hand_c + hand_r * cols]) {

				var mc = hand_c - 1;
				var pc = hand_c + 1;
				var mr = hand_r - 1;
				var pr = hand_r + 1;

				if (mc < 0) {
					mc = 0;
				}

				if (pc >= cols) {
					pc = cols - 1;
				}

				if (mr < 0) {
					mr = 0;
				}

				if (pr >= rows) {
					pr = rows - 1;
				}

				var r_check = false;

				// 周囲に自分側の駒効きがあるか確認
				for (var r = mr;r <= pr;r++) {

					var rc = r * cols;

					for (var c = mc;c <= pc;c++) {
						if (board_my_range_map[c + rc]) {

							r_check = true;

							break;

						}
					}

					if (r_check) {
						break;
					}

				}

				// 勢力範囲外への自殺手
				if (!r_check) {
					if (l1_my_range_map[l1_enemy_king_col + l1_enemy_king_row * cells]) { // 自殺的王手
						l1_hand.score[2] -= 10 + Math.abs(SG99A_Piece.piece_scores[Math.abs(l1_hand.from_col)] / 10);
					} else {
						l1_hand.score[2] -= 10 + Math.abs(SG99A_Piece.piece_scores[Math.abs(l1_hand.from_col)] / 20);
					}
				}

			}

			// 候補手を打った盤面を評価
			l1_hand.board_score = board_processer.getBoardSimpleScoreWithKingPos(l1_board, turn, up_range_map, down_range_map, l1_my_king_col, l1_my_king_row, l1_enemy_king_col, l1_enemy_king_row);

			var l2_my_king_col = l1_my_king_col;
			var l2_my_king_row = l1_my_king_row;

			for (var j = 0;j < l2_hands_num;j++) {

				var l2_enemy_king_col = l1_enemy_king_col;
				var l2_enemy_king_row = l1_enemy_king_row;

				var l2_hand = l2_hands[j];

				// 王の移動を反映
				if (l2_hand.from_col == l1_enemy_king_col && l2_hand.from_row == l1_enemy_king_row) {

					l2_enemy_king_col = l2_hand.to_col;
					l2_enemy_king_row = l2_hand.to_row;

				}

				// 候補手を打った盤面を作成
				l2_board.set(l1_board);
				l2_board.putHand(l2_hand);

				// 候補手を打った盤面を評価
				l2_hand.board_score = board_processer.getBoardSimpleScoreWithKingPos(l2_board, -turn, up_range_map, down_range_map, l2_enemy_king_col, l2_enemy_king_row, l2_my_king_col, l2_my_king_row);

				l2_hand.score[0] = l2_hand.board_score;

			}

			var l2_sorted_hands = new Array(l2_hands_num);
			var l2_sorted_num = 0;

			l2_sorting_start_index = 0;
			l2_sorting_end_index = l2_hands_num - 1;

			while (l2_sorted_num < l2_hands_num) {

				var l2_sorting_max_score = SG99A_BoardProcesser.MIN_SCORE - 1;

				for (var j = l2_sorting_start_index;j <= l2_sorting_end_index;j++) {
					if (l2_hands[j] != null && l2_hands[j].score[0] > l2_sorting_max_score) {
						l2_sorting_max_score = l2_hands[j].score[0];
					}
				}

				for (var j = l2_sorting_start_index;j <= l2_sorting_end_index;j++) {
					if (l2_hands[j] != null) {
						if (l2_hands[j].score[0] === l2_sorting_max_score) {

							l2_sorted_hands[l2_sorted_num++] = l2_hands[j];
							l2_hands[j] = null;

						}
					}
				}

			}

			l2_hands = null;
			var l2_selected_hands = null;

			if (l2_hands_num < 22) {
				l2_selected_hands = l2_sorted_hands;
			} else {

				l2_selected_hands = [];

				Array.prototype.push.apply(l2_selected_hands, l2_sorted_hands.splice(0, 8));
				Array.prototype.push.apply(l2_selected_hands, l2_sorted_hands.splice(Math.floor(l2_sorted_hands.length / 3) - 1, 5));
				Array.prototype.push.apply(l2_selected_hands, l2_sorted_hands.splice(Math.floor(l2_sorted_hands.length / 2) - 1, 4));

			}

			l1_hand.children = l2_selected_hands;

		}

		this.processing.l1_hands = l1_hands;

		this.processing.stage = 2;
		this.processing.step = 0;

		this.processing.up_range_map = new Int32Array(cells);
		this.processing.down_range_map = new Int32Array(cells);

		setTimeout(this.processCPU.bind(this), 10);

		break;

	case 2:

		var l1_board = SG99A_Board.createBoard();
		var l2_board = SG99A_Board.createBoard();
		var l3_board = SG99A_Board.createBoard();

		var l1_hands = this.processing.l1_hands;
		var l1_hands_num = l1_hands.length;

		var l1_enemy_king_col = this.processing.board_enemy_king_col;
		var l1_enemy_king_row = this.processing.board_enemy_king_row;

		var step_end = Math.min(this.processing.step + 16, l1_hands_num);

		for (var i = this.processing.step;i < step_end;i++) {

			var l1_my_king_col = this.processing.board_my_king_col;
			var l1_my_king_row = this.processing.board_my_king_row;

			var l1_hand = l1_hands[i];

			// 王の移動を反映
			if (l1_hand.from_col == l1_my_king_col && l1_hand.from_row == l1_my_king_row) {

				l1_my_king_col = l1_hand.to_col;
				l1_my_king_row = l1_hand.to_row;

			}

			// 候補手を打った盤面を作成
			l1_board.set(board);
			l1_board.putHand(l1_hand);

			var l2_hands = l1_hand.children;

			if (l2_hands == null) {

				l1_hand.score[0] = SG99A_BoardProcesser.MIN_SCORE;

				continue;

			}

			var l2_hands_num = l2_hands.length;

			var l2_my_king_col = l1_my_king_col;
			var l2_my_king_row = l1_my_king_row;

			var l2_max_score = SG99A_BoardProcesser.MIN_SCORE - 1;
			var l2_max_hand = null;

			for (var j = 0;j < l2_hands_num;j++) {

				var l2_enemy_king_col = l1_enemy_king_col;
				var l2_enemy_king_row = l1_enemy_king_row;

				var l2_hand = l2_hands[j];

				// 王の移動を反映
				if (l2_hand.from_col == l2_enemy_king_col && l2_hand.from_row == l2_enemy_king_row) {

					l2_enemy_king_col = l2_hand.to_col;
					l2_enemy_king_row = l2_hand.to_row;

				}

				// 候補手を打った盤面を作成
				l2_board.set(l1_board);
				l2_board.putHand(l2_hand);

				// 3手先の候補手を列挙
				var l3_hands = board_processer.getAllMovableHandWithKingPos(l2_board, turn, l2_my_king_col, l2_my_king_row);
				var l3_hands_num = l3_hands.length;

				if (l3_hands_num < 1) {

					l2_hand.score[1] = SG99A_BoardProcesser.MIN_SCORE;

					l2_max_hand = l2_hand;
					l2_max_score = SG99A_BoardProcesser.MAX_SCORE;

					continue;

				}

				var l3_enemy_king_col = l2_enemy_king_col;
				var l3_enemy_king_row = l2_enemy_king_row;

				var l3_max_score = SG99A_BoardProcesser.MIN_SCORE - 1;

				for (var k = 0;k < l3_hands_num;k++) {

					var l3_my_king_col = l2_my_king_col;
					var l3_my_king_row = l2_my_king_row;

					var l3_hand = l3_hands[k];

					// 候補手を打った盤面を作成
					l3_board.set(l2_board);
					l3_board.putHand(l3_hand);

					// 王の移動を反映
					if (l3_hand.from_col == l3_my_king_col && l3_hand.from_row == l3_my_king_row) {

						l3_my_king_col = l3_hand.to_col;
						l3_my_king_row = l3_hand.to_row;

					}

					if (board_processer.isLoseWithKingPos(l3_board, -turn, l3_enemy_king_col, l3_enemy_king_row)) {
						l3_hand.board_score = SG99A_BoardProcesser.MAX_SCORE;
					} else {
						l3_hand.board_score = board_processer.getBoardSimpleScoreWithKingPos(l3_board, turn, this.processing.up_range_map, this.processing.down_range_map, l3_my_king_col, l3_my_king_row, l3_enemy_king_col, l3_enemy_king_row);
					}

					if (l3_hand.board_score > l3_max_score) {
						l3_max_score = l3_hand.board_score;
					}

				}

				l2_hand.score[1] = -l3_max_score;
				l2_hand.score[0] = Math.floor(l2_hand.score[0] * 0.1 + l2_hand.score[1]);

				if (l2_hand.score[0] < SG99A_BoardProcesser.MIN_SCORE) {
					l2_hand.score[0] = SG99A_BoardProcesser.MIN_SCORE;
				}

				if (l2_hand.score[0] > l2_max_score) {

					l2_max_score = l2_hand.score[0];
					l2_max_hand = l2_hand;

				}

			}

			if (l2_max_score >= SG99A_BoardProcesser.MAX_SCORE) {

				l1_hand.score[0] = SG99A_BoardProcesser.MIN_SCORE;
				l1_hand.score[1] = SG99A_BoardProcesser.MIN_SCORE;

			} else {

				l1_hand.score[1] = -l2_max_score;
				l1_hand.score[0] = Math.floor(l1_hand.score[1] + (l1_hand.board_score / 8) + l1_hand.score[2]);

			}

			l1_hand.children = null;

		}

		if (step_end < l1_hands_num) {
			this.processing.step = step_end;
		} else {

			switch (level | 0) {

			case 1:

				this.processing.stage = 3;

				break;

			case 2:
			case 3:
			case 4:

				this.processing.stage = 4;

				break;

			}

		}

		setTimeout(this.processCPU.bind(this), 10);

		break;

	case 3:

		var l1_hands = this.processing.l1_hands;
		var l1_hands_num = l1_hands.length;

		var l1_max_score = SG99A_BoardProcesser.MIN_SCORE - 1;
		var l1_max_hand = null;

		for (var i = 0;i < l1_hands_num;i++) {
			if (l1_hands[i].score[0] > l1_max_score) {

				l1_max_score = l1_hands[i].score[0];
				l1_max_hand = l1_hands[i];

			}
		}

		// 選択手を打った盤面を作成
		var test_board = this.game.board.clone();
		test_board.putHand(l1_max_hand);

		// 盤面のハッシュ値を算出
		var test_hash = test_board.getBoardHash();
		var same_board = false;

		var hash_log_length = this.board_hash_list.length;
		var hash_search_range = Math.min(hash_log_length, 100);

		// 過去に同じハッシュ値を持つ盤面があるか検査
		for (var i = 0;i < hash_search_range;i++) {
			if (this.board_hash_list[hash_log_length - 1 - i] == test_hash) {
				same_board = true;
			}
		}

		// 過去に同一ハッシュ値の盤面があれば次点手に変更（千日手抑制）
		if (same_board && l1_hands_num > 4) {

			var l1_nmax_score = SG99A_BoardProcesser.MIN_SCORE - 1;
			var l1_nmax_hand = null;

			for (var i = 0;i < l1_hands_num;i++) {
				if (l1_hands[i] != l1_max_hand && l1_hands[i].score[0] > l1_nmax_score) {

					l1_nmax_score = l1_hands[i].score[0];
					l1_nmax_hand = l1_hands[i];

				}
			}

			l1_max_hand = l1_nmax_hand;

		}

		this.onCPUHandSelected(game, turn, l1_max_hand);

		return;

	case 4:

		var l1_hands = this.processing.l1_hands;
		var l1_hands_num = l1_hands.length;

		var l1_sorted_hands = new Array(l1_hands_num);
		var l1_sorted_num = 0;

		l1_sorting_start_index = 0;
		l1_sorting_end_index = l1_hands_num - 1;

		while (l1_sorted_num < l1_hands_num) {

			var l1_sorting_max_score = SG99A_BoardProcesser.MIN_SCORE - 1;

			for (var i = l1_sorting_start_index;i <= l1_sorting_end_index;i++) {
				if (l1_hands[i] != null && l1_hands[i].score[0] > l1_sorting_max_score) {
					l1_sorting_max_score = l1_hands[i].score[0];
				}
			}

			for (var i = l1_sorting_start_index;i <= l1_sorting_end_index;i++) {
				if (l1_hands[i] != null) {
					if (l1_hands[i].score[0] === l1_sorting_max_score) {

						l1_sorted_hands[l1_sorted_num++] = l1_hands[i];
						l1_hands[i] = null;

					}
				}
			}

		}

		l1_hands = null;

		// レベルに応じて枝刈りした候補手配列を作成
		if (level == 2) {
			if (l1_hands_num < 26) {
				l1_hands = l1_sorted_hands;
			} else {

				l1_hands = [];

				for (var i = 0;i < 11;i++) {
					l1_hands.push(l1_sorted_hands.shift());
				}

				l1_sorted_num = l1_sorted_hands.length;
				var r_num = Math.floor(l1_sorted_num / 3);

				for (var i = 0;i < r_num;i++) {

					var i1 = this.rnd.nextInt() % l1_sorted_num;
					var i2 = this.rnd.nextInt() % l1_sorted_num;

					if (i1 != i2) {

						var tmp = l1_sorted_hands[i1];

						l1_sorted_hands[i1] = l1_sorted_hands[i2];
						l1_sorted_hands[i2] = tmp;

					}

				}

				for (var i = 0;i < 12;i++) {
					l1_hands.push(l1_sorted_hands.shift());
				}

				l1_sorted_num = l1_sorted_hands.length;

				for (var i = 0;i < l1_sorted_num;i++) {
					if (l1_sorted_hands[i].from_row >= 0) {

						l1_hands.push(l1_sorted_hands[i]);

						break;

					}
				}

			}
		}

		if (level == 3) {
			if (l1_hands_num < 31) {
				l1_hands = l1_sorted_hands;
			} else {

				l1_hands = [];

				for (var i = 0;i < 15;i++) {
					l1_hands.push(l1_sorted_hands.shift());
				}

				l1_sorted_num = l1_sorted_hands.length;
				var r_num = Math.floor(l1_sorted_num / 3);

				for (var i = 0;i < r_num;i++) {

					var i1 = this.rnd.nextInt() % l1_sorted_num;
					var i2 = this.rnd.nextInt() % l1_sorted_num;

					if (i1 != i2) {

						var tmp = l1_sorted_hands[i1];

						l1_sorted_hands[i1] = l1_sorted_hands[i2];
						l1_sorted_hands[i2] = tmp;

					}

				}

				for (var i = 0;i < 10;i++) {
					l1_hands.push(l1_sorted_hands.shift());
				}

				l1_hands.push(l1_sorted_hands[Math.floor(l1_sorted_hands.length / 2) - 1]);
				l1_hands.push(l1_sorted_hands[Math.floor(l1_sorted_hands.length / 2)]);
				l1_hands.push(l1_sorted_hands[Math.floor(l1_sorted_hands.length / 2) + 1]);

			}
		}

		if (level == 4) {
			if (l1_hands_num < 62) {
				l1_hands = l1_sorted_hands;
			} else {

				l1_hands = [];

				for (var i = 0;i < 28;i++) {
					l1_hands.push(l1_sorted_hands.shift());
				}

				l1_sorted_num = l1_sorted_hands.length;
				var r_num = Math.floor(l1_sorted_num / 3);

				for (var i = 0;i < r_num;i++) {

					var i1 = this.rnd.nextInt() % l1_sorted_num;
					var i2 = this.rnd.nextInt() % l1_sorted_num;

					if (i1 != i2) {

						var tmp = l1_sorted_hands[i1];

						l1_sorted_hands[i1] = l1_sorted_hands[i2];
						l1_sorted_hands[i2] = tmp;

					}

				}

				for (var i = 0;i < 26;i++) {
					l1_hands.push(l1_sorted_hands.shift());
				}

				l1_hands.push(l1_sorted_hands[Math.floor(l1_sorted_hands.length / 2) - 1]);
				l1_hands.push(l1_sorted_hands[Math.floor(l1_sorted_hands.length / 2)]);
				l1_hands.push(l1_sorted_hands[Math.floor(l1_sorted_hands.length / 2) + 1]);

			}
		}

		l1_hands_num = l1_hands.length;
		l1_sorted_hands = null;

		this.processing.process_id = game.game_id + this.game.turn_num;
		this.processing.process_workers_num = this.workers_num;

		this.processing.processed_hands = [];

		this.processing.hands_num = l1_hands_num;

		for (var i = 0;i < this.processing.process_workers_num;i++) {
			this.processing.processed_hands[i] = null;
		}

		var worker_hands_num = Math.floor(l1_hands_num / this.processing.process_workers_num);

		var rnd_seed = this.rnd.nextInt();

		// Workerに盤面と候補手配列を転送し処理を始める
		for (var i = 0;i < this.processing.process_workers_num;i++) {

			var worker_hands = [];
			var hands_num = 0;

			if (i == 0) {
				var hands_num = l1_hands_num - (worker_hands_num * (this.processing.process_workers_num - 1));
			} else {
				var hands_num = worker_hands_num;
			}

			for (var j = 0;j < hands_num;j++) {
				worker_hands.push(l1_hands.shift());
			}

			var data = {};

			data.process_id = this.processing.process_id;
			data.board = game.board;
			data.hands = worker_hands;
			data.turn = turn;
			data.level = level;
			data.process_index = i;
			data.rnd_seed = rnd_seed;

			this.workers[i].postMessage(data);

		}

		break;

	}

}

// Workerの処理結果を受け取る
SG99A.prototype.onWorkerMessage = function(e) {

	var data = e.data;

	var process_id = data.process_id;

	if (process_id != this.processing.process_id) {
		return;
	}

	var process_index = data.process_index;

	this.processing.processed_hands[process_index] = data.hands;

	var process_completed = true;

	// すべての候補手の処理が終わったか検査
	for (var i = 0;i < this.processing.process_workers_num;i++) {
		if (this.processing.processed_hands[i] == null) {

			process_completed = false;

			break;

		}
	}

	if (!process_completed) {
		return;
	}

	var turn_num = this.game.turn_num;
	var board_hash = this.board_hash_list[this.board_hash_list.length - 1];

	var book_move = 0;

	switch (board_hash) {

	case 94609:

		if (this.game.turn_num == 2) {
			book_move = 1;
		}

		break;

	case 93981:

		if (this.game.turn_num == 2) {
			book_move = 2;
		}

		break;

	}

	var l1_hands = [];

	// 処理結果（得点付けされた候補手配列）を一つにまとめる
	for (var i = 0;i < this.processing.process_workers_num;i++) {

		var processed_hands = this.processing.processed_hands[i];
		var processed_hands_num = this.processing.processed_hands[i].length;

		for (var j = 0;j < processed_hands_num;j++) {
			l1_hands.push(processed_hands.shift());
		}

	}

	var l1_hands_num = l1_hands.length;

	if (book_move > 0) {

		switch (book_move) {

		case 1:

			for (var i = 0;i < l1_hands_num;i++) {
				if (l1_hands[i].from_row == 0 && l1_hands[i].from_col == 5 && l1_hands[i].to_col == 6 && l1_hands[i].to_row == 1) {
					 l1_hands[i].score[0] += 200;
				}
			}

			break;

		case 2:

			for (var i = 0;i < l1_hands_num;i++) {
				if (l1_hands[i].from_row == 8 && l1_hands[i].from_col == 3 && l1_hands[i].to_col == 2 && l1_hands[i].to_row == 7) {
					 l1_hands[i].score[0] += 200;
				}
			}

			break;

		}

	}

	var turn = data.turn;

	var l1_sorted_hands = new Array(l1_hands_num);
	var l1_sorted_num = 0;

	// 候補手を得点でソート
	while (l1_sorted_num < l1_hands_num) {

		var l1_sorting_max_score = SG99A_BoardProcesser.MIN_SCORE - 1;

		for (var i = 0;i < l1_hands_num;i++) {
			if (l1_hands[i] != null && (l1_hands[i].score[0] > l1_sorting_max_score)) {
				l1_sorting_max_score = l1_hands[i].score[0];
			}
		}

		for (var i = 0;i < l1_hands_num;i++) {
			if (l1_hands[i] != null && (l1_hands[i].score[0] == l1_sorting_max_score)) {

				l1_sorted_hands[l1_sorted_num++] = l1_hands[i];
				l1_hands[i] = null;

			}
		}

	}

	var selected_hand = l1_sorted_hands[0];

	// 選択手を打った盤面を作成
	var test_board = this.game.board.clone();
	test_board.putHand(selected_hand);

	// 盤面のハッシュ値を算出
	var test_hash = test_board.getBoardHash();
	var same_board = false;

	var hash_log_length = this.board_hash_list.length;
	var hash_search_range = Math.min(hash_log_length, 100);

	// 過去に同じハッシュ値を持つ手があるか検査
	for (var i = 0;i < hash_search_range;i++) {
		if (this.board_hash_list[hash_log_length - 1 - i] == test_hash) {
			same_board = true;
		}
	}

	// 過去に同一ハッシュ値の盤面があれば次点手に変更（千日手抑制）
	if (same_board && l1_sorted_hands.length > 4) {
		selected_hand = l1_sorted_hands[1];
	}

	this.onCPUHandSelected(this.game, turn, selected_hand);

}

SG99A.prototype.onCPUHandSelected = function(game, turn, hand) {

	switch (turn) {

	case -1:

		this.game_stage = SG99A.GAME_STAGE_UP_CPU_HOLDING;

		if (hand.from_row == -1) {
			this.up_table_view.setSelectedCol(-hand.from_col);
		} else {
			this.board_view.setHolding(hand.from_col, hand.from_row);
		}

		break;

	case 1:

		this.game_stage = SG99A.GAME_STAGE_DOWN_CPU_HOLDING;

		if (hand.from_row == -1) {
			this.down_table_view.setSelectedCol(hand.from_col);
		} else {
			this.board_view.setHolding(hand.from_col, hand.from_row);
		}

		break;

	}

//	setTimeout(this.onHandSelected.bind(this, game, hand), 450);
	this.onHandSelected(game, hand);

}

SG99A.prototype.startGame = function(game) {

	this.setGame(game);
	this.game_stage = SG99A.GAME_STAGE_NONE;

	this.board_view.reset();
	this.game_log = [];
	this.board_hash_list = [];

	this.game_start_ms = this.getTimeMS();
	this.startTurn(game);

}

SG99A.prototype.startTurn = function(game) {

	if (game == null || game.game_id != this.game_id) {
		return;
	}

	if (this.game.turn_num == 999) {

		this.game_stage = SG99A.GAME_STAGE_DRAW;

		return;

	}

	var game_log_item = {};

	game_log_item.game = this.game.clone();
	game_log_item.last_moved = this.board_view.getLastMoved();

	this.game_log[this.game.turn_num] = game_log_item;

	this.game.turn_num++;
	this.turn_start_ms = this.getTimeMS();

	this.game.up_player_turn_time = 0;
	this.game.down_player_turn_time = 0;

	this.up_undo_button.element.disabled = 'disabled';
	this.down_undo_button.element.disabled = 'disabled';

	switch (this.game.turn_player) {

	case -1:

		this.up_table_view.setActive(true);
		this.down_table_view.setActive(false);

		switch (this.game.up_player) {

		case SG99A.PLAYER_HUMAN:

			this.game_stage = SG99A.GAME_STAGE_UP_HUMAN_SELECTING;
			this.up_undo_button.element.disabled = '';

			break;

		case SG99A.PLAYER_CPU_LV1:
		case SG99A.PLAYER_CPU_LV2:
		case SG99A.PLAYER_CPU_LV3:
		case SG99A.PLAYER_CPU_LV4:

			this.game_stage = SG99A.GAME_STAGE_UP_CPU_SELECTING;

			this.startCPUProcess(this.game, this.game.up_player - 1);

			break;

		}

		break;

	case 1:

		this.up_table_view.setActive(false);
		this.down_table_view.setActive(true);

		switch (this.game.down_player) {

		case SG99A.PLAYER_HUMAN:

			this.game_stage = SG99A.GAME_STAGE_DOWN_HUMAN_SELECTING;
			this.down_undo_button.element.disabled = '';

			break;

		case SG99A.PLAYER_CPU_LV1:
		case SG99A.PLAYER_CPU_LV2:
		case SG99A.PLAYER_CPU_LV3:
		case SG99A.PLAYER_CPU_LV4:

			this.game_stage = SG99A.GAME_STAGE_DOWN_CPU_SELECTING;

			this.startCPUProcess(this.game, this.game.down_player - 1);

			break;

		}

		break;

	}

}

SG99A.prototype.onHandSelected = function(game, hand) {

	if (game.game_id != this.game_id) {
		return;
	}

	switch (this.game_stage) {

	case SG99A.GAME_STAGE_UP_HUMAN_PUTING:
	case SG99A.GAME_STAGE_UP_HUMAN_HOLDING:
	case SG99A.GAME_STAGE_DOWN_HUMAN_HOLDING:
	case SG99A.GAME_STAGE_DOWN_HUMAN_PUTING:

		this.putHand(game, hand);

		break;

	case SG99A.GAME_STAGE_UP_CPU_HOLDING:
	case SG99A.GAME_STAGE_DOWN_CPU_HOLDING:

		this.putHand(game, hand);

		break;

	}

}

SG99A.prototype.putHand = function(game, hand) {

	if (game.game_id != this.game_id) {
		return;
	}

	var test_board = this.game.board.clone();
	test_board.putHand(hand);

	if (test_board.isChecked(this.game.turn_player, this.board_processer)) {

		this.board_view.resetHolding();
		this.board_view.resetMovableHands();

		var king_cell = this.game.board.getKingCell(this.game.turn_player);
		this.board_view.setCheckedCell(king_cell);

		switch (this.game_stage) {

		case SG99A.GAME_STAGE_UP_HUMAN_HOLDING:
		case SG99A.GAME_STAGE_UP_HUMAN_PUTING:

			this.game_stage = SG99A.GAME_STAGE_UP_HUMAN_SELECTING;

			break;

		case SG99A.GAME_STAGE_DOWN_HUMAN_HOLDING:
		case SG99A.GAME_STAGE_DOWN_HUMAN_PUTING:

			this.game_stage = SG99A.GAME_STAGE_DOWN_HUMAN_SELECTING;

			break;

		}

		return;

	}

	this.board_view.resetCheckedCell();

	this.game.board.putHand(hand);
	this.game.last_hand = SG99A_Hand.cloneHand(hand);

	var hash = this.game.board.getBoardHash();
	this.board_hash_list.push(hash);

	var turn_ms = this.getTimeMS() - this.turn_start_ms;

	switch (this.game_stage) {

	case SG99A.GAME_STAGE_UP_HUMAN_HOLDING:
	case SG99A.GAME_STAGE_UP_HUMAN_PUTING:
	case SG99A.GAME_STAGE_UP_CPU_HOLDING:

		this.game_stage = SG99A.GAME_STAGE_UP_HUMAN_PUTTED;

		this.board_view.setLastMoved(hand.to_col, hand.to_row);

		this.game.up_player_time += turn_ms;
		this.game.up_player_turn_time = 0;

		this.turn_start_ms = 0;

		this.onTurnEnd(game);

		break;

	case SG99A.GAME_STAGE_DOWN_HUMAN_HOLDING:
	case SG99A.GAME_STAGE_DOWN_HUMAN_PUTING:
	case SG99A.GAME_STAGE_DOWN_CPU_HOLDING:

		this.game_stage = SG99A.GAME_STAGE_DOWN_HUMAN_PUTTED;

		this.board_view.setLastMoved(hand.to_col, hand.to_row);

		this.game.down_player_time += turn_ms;
		this.game.down_player_turn_time = 0;

		this.turn_start_ms = 0;

		this.onTurnEnd(game);

		break;

	}

}

SG99A.prototype.onTurnEnd = function(game) {

	if (game.game_id != this.game_id) {
		return;
	}

	this.board_view.resetHolding();
	this.board_view.resetMovableHands();
	this.up_table_view.resetSelectedCol();
	this.down_table_view.resetSelectedCol();

	var result = 0;

	if (this.board_processer.isLose(this.game.board, -this.game.turn_player)) {
		// 打ち歩詰め検査
		if (this.game.last_hand.from_row == -1 && Math.abs(this.game.last_hand.from_col) == SG99A_Piece.FU && this.game.board.isChecked(-this.game.turn_player, this.board_processer)) {
			result = -this.game.turn_player;
		} else {
			result = this.game.turn_player;
		}
	}

	if (result == 0) {

		switch (this.game_stage) {

		case SG99A.GAME_STAGE_UP_HUMAN_PUTTED:

			this.game.turn_player = 1;

			break;

		case SG99A.GAME_STAGE_DOWN_HUMAN_PUTTED:

			this.game.turn_player = -1;

			break;

		}

		setTimeout(this.startTurn.bind(this, this.game), 100);

	} else {

		this.game_stage = SG99A.GAME_STAGE_DOWN_HUMAN_RESULT;

		if (this.game.up_player == SG99A.PLAYER_HUMAN) {
			this.up_undo_button.element.disabled = '';
		} else {
			this.up_undo_button.element.disabled = 'disabled';
		}

		if (this.game.down_player == SG99A.PLAYER_HUMAN) {
			this.down_undo_button.element.disabled = '';
		} else {
			this.down_undo_button.element.disabled = 'disabled';
		}

		this.board_view.setLose(-result);

		switch (result) {

		case -1:

			this.up_table_view.setResult(true);
			this.down_table_view.setResult(false);

			break;

		case 1:

			this.up_table_view.setResult(false);
			this.down_table_view.setResult(true);

			break;

		}

		return;

	}
}

SG99A.prototype.getHTMLElement = function() {
	return this.element;
}

SG99A.prototype.update = function() {

	this.header.update();
	this.board_view.update();

	this.up_table_view.update();
	this.down_table_view.update();

}

SG99A.prototype.onPlayerDialogResult = function(up_player, down_player, first) {

	var game = SG99A_Game.createNewGame();

	game.up_player = up_player;
	game.down_player = down_player;

	game.first_player = first;

	if (first == -1) {
		game.turn_player = -1;
	} else {
		game.turn_player = 1;
	}

	this.startGame(game);

}

SG99A.prototype.onTableViewClicked = function(table, piece) {

	if (table == this.up_table_view) {
		piece *= -1;
	}

	if (piece < 0 && this.game.board.up_piece_table[-piece] < 1) {
		return;
	}

	if (piece > 0 && this.game.board.down_piece_table[piece] < 1) {
		return;
	}

	var col = piece;
	var row = -1;

	switch (this.game_stage) {

	case SG99A.GAME_STAGE_UP_HUMAN_SELECTING:

		if (piece < 0) {

			var hands = this.board_processer.getMovableHands(this.game.board, col, row);

			if (hands.length > 0) {

				this.game_stage = SG99A.GAME_STAGE_UP_HUMAN_HOLDING;

				this.holding = {'col': col, 'row': row};
				this.movable_hands = hands;

				this.up_table_view.setSelectedCol(-col);

				this.board_view.setHolding(col, row);
				this.board_view.setMovableHands(this.movable_hands);

			}

		}

		break;

	case SG99A.GAME_STAGE_UP_HUMAN_HOLDING:

		this.game_stage = SG99A.GAME_STAGE_UP_HUMAN_SELECTING;

		this.holding = null;
		this.movable_hands = null;

		this.up_table_view.resetSelectedCol();

		this.board_view.resetHolding();
		this.board_view.resetMovableHands();

		break;

	case SG99A.GAME_STAGE_DOWN_HUMAN_SELECTING:

		if (piece > 0) {

			var hands = this.board_processer.getMovableHands(this.game.board, col, row);

			if (hands.length > 0) {

				this.game_stage = SG99A.GAME_STAGE_DOWN_HUMAN_HOLDING;

				this.holding = {'col': col, 'row': row};
				this.movable_hands = hands;

				this.down_table_view.setSelectedCol(col);

				this.board_view.setHolding(col, row);
				this.board_view.setMovableHands(this.movable_hands);

			}

		}

		break;

	case SG99A.GAME_STAGE_DOWN_HUMAN_HOLDING:

		this.game_stage = SG99A.GAME_STAGE_DOWN_HUMAN_SELECTING;

		this.holding = null;
		this.movable_hands = null;

		this.down_table_view.resetSelectedCol();

		this.board_view.resetHolding();
		this.board_view.resetMovableHands();

		break;

	}

	this.update();

}

SG99A.prototype.onBoardViewCellClicked = function(col, row) {

	var piece = this.game.board.data[col + row * this.game.board.cols];

	this.board_view.resetCheckedCell();

	switch (this.game_stage) {

	case SG99A.GAME_STAGE_UP_HUMAN_SELECTING:

		if (piece < 0) {

			var hands = this.board_processer.getMovableHands(this.game.board, col, row);

			if (hands.length > 0) {

				this.game_stage = SG99A.GAME_STAGE_UP_HUMAN_HOLDING;

				this.holding = {'col': col, 'row': row};
				this.movable_hands = hands;

				this.board_view.setHolding(col, row);
				this.board_view.setMovableHands(this.movable_hands);

			}

		}

		break;

	case SG99A.GAME_STAGE_UP_HUMAN_HOLDING:

		var hands = [];

		for (var i = 0;i < this.movable_hands.length;i++) {
			if (col == this.movable_hands[i].to_col && row == this.movable_hands[i].to_row) {
				hands.push(this.movable_hands[i]);
			}
		}

		if (hands.length >= 1) {

			if (hands.length == 1) {
				this.onHandSelected(this.game, hands[0]);
			} else {

				this.movable_hands = hands;

				this.board_view.resetMovableHands();
				this.up_table_view.resetSelectedCol();

				this.game_stage = SG99A.GAME_STAGE_UP_HUMAN_PUTING;

				this.PromoteDialog.element.style.display = 'block';

			}

		} else {

			this.game_stage = SG99A.GAME_STAGE_UP_HUMAN_SELECTING;

			this.holding = null;
			this.movable_hands = null;

			this.board_view.resetHolding();
			this.board_view.resetMovableHands();
			this.up_table_view.resetSelectedCol();

		}

		break;

	case SG99A.GAME_STAGE_DOWN_HUMAN_SELECTING:

		if (piece > 0) {

			var hands = this.board_processer.getMovableHands(this.game.board, col, row);

			if (hands.length > 0) {

				this.game_stage = SG99A.GAME_STAGE_DOWN_HUMAN_HOLDING;

				this.holding = {'col': col, 'row': row};
				this.movable_hands = hands;

				this.board_view.setHolding(col, row);
				this.board_view.setMovableHands(this.movable_hands);

			}

		}

		break;

	case SG99A.GAME_STAGE_DOWN_HUMAN_HOLDING:

		var hands = [];

		for (var i = 0;i < this.movable_hands.length;i++) {
			if (col == this.movable_hands[i].to_col && row == this.movable_hands[i].to_row) {
				hands.push(this.movable_hands[i]);
			}
		}

		if (hands.length >= 1) {

			if (hands.length == 1) {
				this.onHandSelected(this.game, hands[0]);
			} else {

				this.movable_hands = hands;

				this.board_view.resetMovableHands();
				this.down_table_view.resetSelectedCol();

				this.game_stage = SG99A.GAME_STAGE_DOWN_HUMAN_PUTING;

				this.PromoteDialog.element.style.display = 'block';

			}

		} else {

			this.game_stage = SG99A.GAME_STAGE_DOWN_HUMAN_SELECTING;

			this.holding = null;
			this.movable_hands = null;

			this.board_view.resetHolding();
			this.board_view.resetMovableHands();
			this.down_table_view.resetSelectedCol();

		}

		break;

	}

	this.update();

}

SG99A.prototype.onStartButtonClicked = function() {

	this.player_dialog.show();

}

SG99A.prototype.onPromoteYesButtonClicked = function(e) {

	var hand = null;

	for (var i = 0;i < this.movable_hands.length;i++) {
		if (this.movable_hands[i].promote) {
			hand = this.movable_hands[i];
		}
	}

	this.onHandSelected(this.game, hand);

	this.PromoteDialog.element.style.display = 'none';

}

SG99A.prototype.onPromoteNoButtonClicked = function(e) {

	var hand = null;

	for (var i = 0;i < this.movable_hands.length;i++) {
		if (!this.movable_hands[i].promote) {
			hand = this.movable_hands[i];
		}
	}

	this.onHandSelected(this.game, hand);

	this.PromoteDialog.element.style.display = 'none';

}

SG99A.prototype.onListeningComponentClicked = function(comp, x, y) {

	if (comp == this.up_undo_button) {

		var game_log_item = null;

		var log_last = this.game.turn_num - 1;

		if (this.game_stage != SG99A.GAME_STAGE_DOWN_HUMAN_RESULT) {
			log_last--;
		}

		for (var i = log_last;i >= 0;i--) {

			var item = this.game_log[i];

			if (item && item.game.turn_player == -1) {

				game_log_item = item;

				break;

			}
		}

		if (game_log_item != null) {

			var game = game_log_item.game;

			this.setGame(game);

			this.board_view.reset();

			if (game_log_item.last_moved != null) {
				this.board_view.setLastMoved(game_log_item.last_moved.col, game_log_item.last_moved.row);
			}

			this.startTurn(game);

		}

	}

	if (comp == this.down_undo_button) {

		var game_log_item = null;

		var log_last = this.game.turn_num - 1;

		if (this.game_stage != SG99A.GAME_STAGE_DOWN_HUMAN_RESULT) {
			log_last--;
		}

		for (var i = log_last;i >= 0;i--) {

			var item = this.game_log[i];

			if (item && item.game.turn_player == 1) {

				game_log_item = item;

				break;

			}
		}

		if (game_log_item != null) {

			var game = game_log_item.game;

			this.setGame(game);

			this.board_view.reset();

			if (game_log_item.last_moved != null) {
				this.board_view.setLastMoved(game_log_item.last_moved.col, game_log_item.last_moved.row);
			}

			this.startTurn(game);

		}

	}

}

var SG99A_Random = function(num) {

	this.Num = num;

}

SG99A_Random.prototype.nextInt = function() {

	var val = (this.Num * 48271) % 2147483647;

	this.Num = val;

	return val;

}

SG99A_Random.prototype.nextFloat = function() {

	return this.nextInt() / 2147483647;

}

</script>
<script>
var SG99A_PlayerSelector = function(app, ui_listener) {

	SG99A_Component.call(this, app, ui_listener);

	this.max_cpu_level = app.max_cpu_level;

}

SG99A_PlayerSelector.prototype = Object.create(SG99A_Component.prototype);
SG99A_PlayerSelector.prototype.constructor = SG99A_PlayerSelector;

SG99A_PlayerSelector.prototype.createElement = function() {

	this.element = document.createElement('div');

	this.element.style.position = 'absolute';

	this.player_label = document.createElement('div');
	this.prev_button = new SG99A_Button(this.app, this);
	this.next_button = new SG99A_Button(this.app, this);

	this.player_labels = [];

	this.player_labels[0] = this.app.text_res['player_human']
	this.player_labels[1] = this.app.text_res['cpu_lv1']
	this.player_labels[2] = this.app.text_res['cpu_lv2']
	this.player_labels[3] = this.app.text_res['cpu_lv3']
	this.player_labels[4] = this.app.text_res['cpu_lv4']

	this.setPlayer(0);

}

SG99A_PlayerSelector.prototype.setBackground = function(bg) {

	SG99A_Component.prototype.setBackground.call(this, bg);

	this.element.style.background = this.background;

}

SG99A_PlayerSelector.prototype.onRectSetted = function() {

	SG99A_Component.prototype.onRectSetted.call(this);

	var player_label_width = Math.floor(this.rect.width * 0.64);
	var player_label_height = this.rect.height;

	var player_label_left = Math.floor(this.rect.width * 0.18);
	var player_label_top = 0;

	this.valid_player_color = 'rgba(224, 240, 255, 1.0)';
	this.invalid_player_color = 'rgba(192, 192, 192, 1.0)';

	this.player_label.style.display = 'inline-block';
	this.player_label.style.position = 'absolute';
	this.player_label.style.width = player_label_width + 'px';
	this.player_label.style.height = player_label_height + 'px';
	this.player_label.style.lineHeight = player_label_height + 'px';
	this.player_label.style.left = player_label_left + 'px';
	this.player_label.style.top = player_label_top + 'px';
	this.player_label.style.textAlign = 'center';
	this.player_label.style.color = this.valid_player_color;
	this.player_label.style.background = 'rgba(32, 32, 32, 1.0)';
	this.player_label.style.fontSize = Math.floor(this.app.default_font_size * 1.5) + 'px';

	this.element.appendChild(this.player_label);

	var button_width = Math.floor(this.rect.width * 0.18);
	var button_height = this.rect.height;

	this.prev_button.setRect(0, 0, button_width,  button_height);

	this.prev_button.setBackground('rgba(192, 192, 192, 1.0)');
	this.prev_button.setFontSize(this.app.default_font_size * 2);
	this.prev_button.setLabel('<');

	this.next_button.setRect(this.rect.width - button_width, 0, button_width,  button_height);

	this.next_button.setBackground('rgba(192, 192, 192, 1.0)');
	this.next_button.setFontSize(this.app.default_font_size * 2);
	this.next_button.setLabel('>');

	this.element.appendChild(this.prev_button.element);
	this.element.appendChild(this.next_button.element);

	this.player = SG99A.PLAYER_HUMAN;

}

SG99A_PlayerSelector.prototype.onListeningComponentClicked = function(comp, x, y) {

	if (comp == this.prev_button){

		this.player--;

		if (this.player < SG99A.PLAYER_HUMAN) {
			this.player = SG99A.PLAYER_CPU_LV4;
		}

		this.update();

	}

	if (comp == this.next_button){

		this.player++;

		if (this.player > SG99A.PLAYER_CPU_LV4) {
			this.player = SG99A.PLAYER_HUMAN;
		}

		this.update();

	}

}

SG99A_PlayerSelector.prototype.setPlayer = function(value) {

	this.player = value;
	this.update();

}

SG99A_PlayerSelector.prototype.onPrevButtonClicked = function(e) {


}

SG99A_PlayerSelector.prototype.onNextButtonClicked = function(e) {


}

SG99A_PlayerSelector.prototype.update = function() {

	this.player_label.textContent = this.player_labels[this.player - 1];

	if ((this.player - SG99A.PLAYER_CPU_LV1 + 1) <= this.max_cpu_level) {
		this.player_label.style.color = this.valid_player_color;
	} else {
		this.player_label.style.color = this.invalid_player_color;
	}

	this.ui_listener.onPlayerSettingUpdated.call(this.ui_listener);

}

function SG99A_PlayerDialog(app, ui_listener) {

	SG99A_Component.call(this, app, ui_listener);

	this.max_cpu_level = app.max_cpu_level;

	this.player_turn_button_selected_bg = '#a8ccff';
	this.player_turn_button_unselected_bg = '#a8a8a8';

}

SG99A_PlayerDialog.prototype = Object.create(SG99A_Component.prototype);
SG99A_PlayerDialog.prototype.constructor = SG99A_PlayerDialog;

SG99A_PlayerDialog.prototype.createElement = function() {

	this.element = document.createElement('div');

	this.element.style.position = 'absolute';

	this.setBackground('rgba(64, 64, 64, 0.8)');

}

SG99A_PlayerDialog.prototype.setBackground = function(bg) {

	SG99A_Component.prototype.setBackground.call(this, bg);

	this.element.style.background = this.background;

	this.up_player_turn_1st_button = new SG99A_Button(this.app, this);
	this.up_player_turn_2nd_button = new SG99A_Button(this.app, this);
	this.down_player_turn_1st_button = new SG99A_Button(this.app, this);
	this.down_player_turn_2nd_button = new SG99A_Button(this.app, this);

	this.ok_button = new SG99A_Button(this.app, this);
	this.cancel_button = new SG99A_Button(this.app, this);

}

SG99A_PlayerDialog.prototype.show = function() {

	this.element.style.display = 'block';

}

SG99A_PlayerDialog.prototype.onRectSetted = function() {

	SG99A_Component.prototype.onRectSetted.call(this);

	var player_selector_width = Math.floor(this.rect.width * 0.6);
	var player_selector_height = Math.floor(this.rect.width * 0.12);

	var player_turn_button_width = Math.floor(this.rect.width * 0.18);
	var player_turn_button_height = Math.floor(this.rect.width * 0.12);
	var player_turn_button_font_size = Math.floor(this.app.default_font_size * 1.5);

	var up_player_turn_button_top = Math.floor(this.rect.width * 0.05);
	var down_player_turn_button_top = Math.floor(this.rect.height - player_selector_height - (this.rect.width * 0.15 + player_turn_button_height));

	this.up_player_turn_1st_button.setRect(Math.floor(this.rect.width * 0.24), up_player_turn_button_top, player_turn_button_width, player_turn_button_height);
	this.up_player_turn_1st_button.element.style.border = '1px solid';
	this.up_player_turn_1st_button.setBackground(this.player_turn_button_selected_bg);
	this.up_player_turn_1st_button.setFontSize(player_turn_button_font_size);

	this.up_player_turn_1st_button.setLabel(this.app.text_res['setting_1st']);

	this.up_player_turn_1st_button.value = 1;

	this.element.appendChild(this.up_player_turn_1st_button.element);

	this.up_player_turn_2nd_button.setRect(Math.floor(this.rect.width * 0.58), up_player_turn_button_top, player_turn_button_width, player_turn_button_height);
	this.up_player_turn_2nd_button.setBackground(this.player_turn_button_unselected_bg);
	this.up_player_turn_2nd_button.setFontSize(player_turn_button_font_size);

	this.up_player_turn_2nd_button.setLabel(this.app.text_res['setting_2nd']);

	this.up_player_turn_2nd_button.value = 2;
	this.up_player_turn_2nd_button.element.style.border = '1px solid';

	this.element.appendChild(this.up_player_turn_2nd_button.element);

	this.down_player_turn_1st_button.setRect(Math.floor(this.rect.width * 0.24), down_player_turn_button_top, player_turn_button_width, player_turn_button_height);

	this.down_player_turn_1st_button.element.style.border = '1px solid';
	this.down_player_turn_1st_button.setBackground(this.player_turn_button_selected_bg);
	this.down_player_turn_1st_button.setFontSize(player_turn_button_font_size);

	this.down_player_turn_1st_button.setLabel(this.app.text_res['setting_1st']);

	this.down_player_turn_1st_button.value = 3;

	this.element.appendChild(this.down_player_turn_1st_button.element);

	this.down_player_turn_2nd_button.setRect(Math.floor(this.rect.width * 0.58), down_player_turn_button_top, player_turn_button_width, player_turn_button_height);

	this.down_player_turn_2nd_button.element.style.border = '1px solid';
	this.down_player_turn_2nd_button.setBackground(this.player_turn_button_unselected_bg);
	this.down_player_turn_2nd_button.setFontSize(player_turn_button_font_size);

	this.down_player_turn_2nd_button.setLabel(this.app.text_res['setting_2nd']);

	this.down_player_turn_2nd_button.value = 4;

	this.element.appendChild(this.down_player_turn_2nd_button.element);

	var player_selector_left = Math.floor((this.rect.width - player_selector_width) / 2);

	var up_player_selector_top = Math.floor(this.rect.width * 0.27);

	var down_player_selector_top = Math.floor(this.rect.height - player_selector_height - this.rect.width * 0.05);

	this.up_player_selector = new SG99A_PlayerSelector(this.app, this);

	this.up_player_selector.setRect(player_selector_left, up_player_selector_top, player_selector_width, player_selector_height);

	this.element.appendChild(this.up_player_selector.element);

	this.down_player_selector = new SG99A_PlayerSelector(this.app, this);

	this.down_player_selector.setRect(player_selector_left, down_player_selector_top, player_selector_width, player_selector_height);

	this.element.appendChild(this.down_player_selector.element);

	var result_button_width = Math.floor(this.rect.width * 0.25);
	var result_button_height = Math.floor(this.rect.width * 0.12);

	var result_button_top = Math.floor(this.rect.height * 0.45);

	this.element.appendChild(this.ok_button.element);

	this.ok_button.setRect(Math.floor(this.rect.width * 0.5 - (result_button_width + this.rect.width * 0.05)), result_button_top, result_button_width, result_button_height);

	this.ok_button.setFontSize(Math.floor(this.app.default_font_size * 1.5));
	this.ok_button.setLabel(this.app.text_res['setting_ok']);

	this.element.appendChild(this.ok_button.element);

	this.cancel_button.setRect(Math.floor(this.rect.width * 0.55), result_button_top, result_button_width, result_button_height);


	this.cancel_button.setFontSize(Math.floor(this.app.default_font_size * 1.5));
	this.cancel_button.setLabel(this.app.text_res['setting_cancel']);

	this.element.appendChild(this.cancel_button.element);

	this.up_player_selector.setPlayer(this.app.default_cpu_level + (SG99A.PLAYER_CPU_LV1 - 1));
	this.down_player_selector.setPlayer(SG99A.PLAYER_HUMAN);

	this.setPlayerTurn(3);

}

SG99A_PlayerDialog.prototype.setPlayerTurn = function(pos) {

	this.up_player_turn_1st_button.setBackground(this.player_turn_button_unselected_bg);
	this.up_player_turn_2nd_button.setBackground(this.player_turn_button_unselected_bg);
	this.down_player_turn_1st_button.setBackground(this.player_turn_button_unselected_bg);
	this.down_player_turn_2nd_button.setBackground(this.player_turn_button_unselected_bg);

	switch (pos) {

	case 1:

		this.first_player = -1;

		this.up_player_turn_1st_button.setBackground(this.player_turn_button_selected_bg);
		this.down_player_turn_2nd_button.setBackground(this.player_turn_button_selected_bg);

		break;

	case 2:

		this.first_player = 1;

		this.up_player_turn_2nd_button.setBackground(this.player_turn_button_selected_bg);
		this.down_player_turn_1st_button.setBackground(this.player_turn_button_selected_bg);

		break;

	case 3:

		this.first_player = 1;

		this.up_player_turn_2nd_button.setBackground(this.player_turn_button_selected_bg);
		this.down_player_turn_1st_button.setBackground(this.player_turn_button_selected_bg);

		break;

	case 4:

		this.first_player = -1;

		this.up_player_turn_1st_button.setBackground(this.player_turn_button_selected_bg);
		this.down_player_turn_2nd_button.setBackground(this.player_turn_button_selected_bg);

		break;

	}

}

SG99A_PlayerDialog.prototype.onListeningComponentClicked = function(comp, x, y) {

	if (comp.value) {
		this.setPlayerTurn(parseInt(comp.value));
	}

	if (comp == this.cancel_button) {
		this.element.style.display = 'none';
	}

	if (comp == this.ok_button) {

		this.ui_listener.onPlayerDialogResult(this.up_player_selector.player, this.down_player_selector.player, this.first_player);

		this.element.style.display = 'none';

	}

}

SG99A_PlayerDialog.prototype.onTurnButtonClicked = function(e) {

	if (e.target == this.up_first_button) {

		this.UpTurn = 1;
		this.DownTurn = 2;

	}

	if (e.target == this.up_second_button) {

		this.UpTurn = 2;
		this.DownTurn = 1;

	}

	if (e.target == this.down_first_button) {

		this.UpTurn = 2;
		this.DownTurn = 1;

	}

	if (e.target == this.down_second_button) {

		this.UpTurn = 1;
		this.DownTurn = 2;

	}

	this.update();

}

SG99A_PlayerDialog.prototype.onPlayerSettingUpdated = function() {

	if (!this.up_player_selector || !this.down_player_selector) {
		return;
	}

	var up_cpu_level = this.up_player_selector.player - SG99A.PLAYER_CPU_LV1 + 1;
	var down_cpu_level = this.down_player_selector.player - SG99A.PLAYER_CPU_LV1 + 1;

	var valid_setting = (up_cpu_level <= this.max_cpu_level) && (down_cpu_level <= this.max_cpu_level);

	this.ok_button.setEnabled(valid_setting);

}

SG99A_PlayerDialog.prototype.update = function() {

}
</script>
<script>
function sg99a_init() {

	var width = document.getElementById('sg99a').clientWidth;

	var game = new SG99A(document.getElementById('sg99a'), 0, 0, width, Math.floor(width * 1.5));

}

window.addEventListener('load', sg99a_init);
</script>

<div id="sg99a" style="padding: 0; margin: 0; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto;">
</div>

<p>Web Workersが実装されていないブラウザでは、CPUのレベルは1のみ選択可能になります。</p>
<div id="contents_footer_ad"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- auto_banner -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3500802105933440"
     data-ad-slot="9609810374"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<hr>
</article>
<aside id="contents_aside_a">
<div id="aside_ad"><script>
(function(sttc){'use strict';var aa=Object.defineProperty,ba=globalThis,ca=typeof Symbol==="function"&&typeof Symbol("x")==="symbol",da={},ea={};function fa(a,b,c){if(!c||a!=null){c=ea[b];if(c==null)return a[b];c=a[c];return c!==void 0?c:a[b]}} 
function ha(a,b,c){if(b)a:{var d=a.split(".");a=d.length===1;var e=d[0],f;!a&&e in da?f=da:f=ba;for(e=0;e<d.length-1;e++){var g=d[e];if(!(g in f))break a;f=f[g]}d=d[d.length-1];c=ca&&c==="es6"?f[d]:null;b=b(c);b!=null&&(a?aa(da,d,{configurable:!0,writable:!0,value:b}):b!==c&&(ea[d]===void 0&&(a=Math.random()*1E9>>>0,ea[d]=ca?ba.Symbol(d):"$jscp$"+a+"$"+d),aa(f,ea[d],{configurable:!0,writable:!0,value:b})))}}ha("Symbol.dispose",function(a){return a?a:Symbol("Symbol.dispose")},"es_next");/* 
 
 Copyright The Closure Library Authors. 
 SPDX-License-Identifier: Apache-2.0 
*/ 
var p=this||self;function ia(a){a=a.split(".");for(var b=p,c=0;c<a.length;c++)if(b=b[a[c]],b==null)return null;return b}function ja(a){var b=typeof a;return b=="object"&&a!=null||b=="function"}function ka(a){return Object.prototype.hasOwnProperty.call(a,la)&&a[la]||(a[la]=++ma)}var la="closure_uid_"+(Math.random()*1E9>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)} 
function oa(a,b,c){if(!a)throw Error();if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?na:oa;return pa.apply(null,arguments)} 
function qa(a,b,c){a=a.split(".");c=c||p;for(var d;a.length&&(d=a.shift());)a.length||b===void 0?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function ra(a){return a};function sa(a){p.setTimeout(()=>{throw a;},0)};function ta(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]} 
function ua(a,b){let c=0;a=ta(String(a)).split(".");b=ta(String(b)).split(".");const d=Math.max(a.length,b.length);for(let g=0;c==0&&g<d;g++){var e=a[g]||"",f=b[g]||"";do{e=/(\d*)(\D*)(.*)/.exec(e)||["","","",""];f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];if(e[0].length==0&&f[0].length==0)break;c=va(e[1].length==0?0:parseInt(e[1],10),f[1].length==0?0:parseInt(f[1],10))||va(e[2].length==0,f[2].length==0)||va(e[2],f[2]);e=e[3];f=f[3]}while(c==0)}return c}function va(a,b){return a<b?-1:a>b?1:0};var xa,ya=ia("CLOSURE_FLAGS"),za=ya&&ya[610401301];xa=za!=null?za:!1;function Aa(){var a=p.navigator;return a&&(a=a.userAgent)?a:""}var Ba;const Ca=p.navigator;Ba=Ca?Ca.userAgentData||null:null;function Da(a){return xa?Ba?Ba.brands.some(({brand:b})=>b&&b.indexOf(a)!=-1):!1:!1}function q(a){return Aa().indexOf(a)!=-1};function Ea(){return xa?!!Ba&&Ba.brands.length>0:!1}function Fa(){return Ea()?!1:q("Trident")||q("MSIE")}function Ga(){return Ea()?Da("Microsoft Edge"):q("Edg/")}function Ha(){!q("Safari")||Ia()||(Ea()?0:q("Coast"))||(Ea()?0:q("Opera"))||(Ea()?0:q("Edge"))||Ga()||Ea()&&Da("Opera")}function Ia(){return Ea()?Da("Chromium"):(q("Chrome")||q("CriOS"))&&!(Ea()?0:q("Edge"))||q("Silk")}function Ja(a){const b={};a.forEach(c=>{b[c[0]]=c[1]});return c=>b[c.find(d=>d in b)]||""} 
function Ka(){var a=Aa();if(Fa()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{b="";var c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),c[1]=="7.0")if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}c=RegExp("([A-Z][\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g");b=[];let d;for(;d=c.exec(a);)b.push([d[1],d[2],d[3]||void 0]);a=Ja(b);return(Ea()?0:q("Opera"))?a(["Version", 
"Opera"]):(Ea()?0:q("Edge"))?a(["Edge"]):Ga()?a(["Edg"]):q("Silk")?a(["Silk"]):Ia()?a(["Chrome","CriOS","HeadlessChrome"]):(a=b[2])&&a[1]||""};function La(a,b){if(typeof a==="string")return typeof b!=="string"||b.length!=1?-1:a.indexOf(b,0);for(let c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1}function Ma(a,b){const c=a.length,d=[];let e=0;const f=typeof a==="string"?a.split(""):a;for(let g=0;g<c;g++)if(g in f){const h=f[g];b.call(void 0,h,g,a)&&(d[e++]=h)}return d}function Na(a,b){const c=a.length,d=Array(c),e=typeof a==="string"?a.split(""):a;for(let f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d} 
function Oa(a,b){const c=a.length,d=typeof a==="string"?a.split(""):a;for(let e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1}function Pa(a,b){a:{var c=a.length;const d=typeof a==="string"?a.split(""):a;for(--c;c>=0;c--)if(c in d&&b.call(void 0,d[c],c,a)){b=c;break a}b=-1}return b<0?null:typeof a==="string"?a.charAt(b):a[b]}function Qa(a,b){return La(a,b)>=0}function u(a){const b=a.length;if(b>0){const c=Array(b);for(let d=0;d<b;d++)c[d]=a[d];return c}return[]};function Ra(a){Ra[" "](a);return a}Ra[" "]=function(){};var Sa=Fa();!q("Android")||Ia();Ia();Ha();var Ta=null;function Ua(a){const b=[];Va(a,function(c){b.push(c)});return b}function Va(a,b){function c(e){for(;d<a.length;){const f=a.charAt(d++),g=Ta[f];if(g!=null)return g;if(!/^[\s\xa0]*$/.test(f))throw Error("Unknown base64 encoding at char: "+f);}return e}Wa();let d=0;for(;;){const e=c(-1),f=c(0),g=c(64),h=c(64);if(h===64&&e===-1)break;b(e<<2|f>>4);g!=64&&(b(f<<4&240|g>>2),h!=64&&b(g<<6&192|h))}} 
function Wa(){if(!Ta){Ta={};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"];for(let c=0;c<5;c++){const d=a.concat(b[c].split(""));for(let e=0;e<d.length;e++){const f=d[e];Ta[f]===void 0&&(Ta[f]=e)}}}};function Xa(a,b){a.__closure__error__context__984382||(a.__closure__error__context__984382={});a.__closure__error__context__984382.severity=b};let Ya=void 0,Za;function $a(a){if(Za)throw Error("");Za=b=>{p.setTimeout(()=>{a(b)},0)}}function bb(a){if(Za)try{Za(a)}catch(b){throw b.cause=a,b;}}function cb(a){a=Error(a);Xa(a,"warning");bb(a);return a};var db=new Set;function eb(a,b=!1,c=!1){a=c&&Symbol.for&&a?Symbol.for(a):a!=null?Symbol(a):Symbol();b&&db.add(a);return a}var fb=eb(),gb=eb(),hb=eb(void 0,!0),ib=eb(void 0,!0);const w=eb("jas",!0,!0);function jb(a,b){a[w]|=b}function kb(a){if(4&a)return 4096&a?4096:8192&a?8192:0}function lb(a){jb(a,32);return a}function mb(a,b){b[w]=(a|0)&-30975}function nb(a,b){b[w]=(a|34)&-30941};function ob(a){return Array.prototype.slice.call(a)};var pb={};function qb(a){return a!==null&&typeof a==="object"&&!Array.isArray(a)&&a.constructor===Object}var rb;const sb=[];sb[w]=55;rb=Object.freeze(sb);function tb(a){if(a&2)throw Error();}function ub(a,b){const c=ra(ib);(b=c?b[c]:void 0)&&(a[ib]=ob(b))}var vb=Object.freeze({});function wb(a,b){const c=xb;if(!b(a))throw b=(typeof c==="function"?c():c)?.concat("\n")??"",Error(b+String(a));}function yb(a){a.wc=!0;return a}let xb=void 0;const zb=yb(a=>a!==null&&a!==void 0);var Ab=yb(a=>typeof a==="number"),Bb=yb(a=>typeof a==="string"),Cb=yb(a=>a===void 0),Db=yb(a=>Array.isArray(a));function Eb(){return yb(a=>Db(a)?a.every(b=>Ab(b)):!1)};function Fb(a){if(Bb(a)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(a))throw Error(String(a));}else if(Ab(a)&&!Number.isSafeInteger(a))throw Error(String(a));return BigInt(a)}var Ib=yb(a=>a>=Gb&&a<=Hb);const Gb=BigInt(Number.MIN_SAFE_INTEGER),Hb=BigInt(Number.MAX_SAFE_INTEGER);let Jb=0,Kb=0;function Lb(a){const b=a>>>0;Jb=b;Kb=(a-b)/4294967296>>>0}function Mb(a){if(a<0){Lb(-a);a=Jb;var b=Kb;b=~b;a?a=~a+1:b+=1;const [c,d]=[a,b];Jb=c>>>0;Kb=d>>>0}else Lb(a)}function Nb(a,b){b>>>=0;a>>>=0;var c;b<=2097151?c=""+(4294967296*b+a):c=""+(BigInt(b)<<BigInt(32)|BigInt(a));return c}function Ob(){var a=Jb,b=Kb,c;b&2147483648?c=""+(BigInt(b|0)<<BigInt(32)|BigInt(a>>>0)):c=Nb(a,b);return c};function Pb(a,b=`unexpected value ${a}!`){throw Error(b);};const Qb=typeof BigInt==="function"?BigInt.asIntN:void 0,Rb=Number.isSafeInteger,Sb=Number.isFinite,Tb=Math.trunc;function Ub(a){if(a!=null&&typeof a!=="boolean"){var b=typeof a;throw Error(`Expected boolean but got ${b!="object"?b:a?Array.isArray(a)?"array":b:"null"}: ${a}`);}return a}const Vb=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Wb(a){switch(typeof a){case "bigint":return!0;case "number":return Sb(a);case "string":return Vb.test(a);default:return!1}} 
function Xb(a){if(!Sb(a))throw cb("enum");return a|0}function y(a){return a==null?a:Xb(a)}function Yb(a){return a==null?a:Sb(a)?a|0:void 0}function Zb(a){if(typeof a!=="number")throw cb("int32");if(!Sb(a))throw cb("int32");return a|0}function z(a){return a==null?a:Zb(a)}function $b(a){if(a==null)return a;if(typeof a==="string"&&a)a=+a;else if(typeof a!=="number")return;return Sb(a)?a|0:void 0} 
function ac(a){if(a==null)return a;if(typeof a==="string"&&a)a=+a;else if(typeof a!=="number")return;return Sb(a)?a>>>0:void 0}function bc(a){if(!Wb(a))throw cb("int64");switch(typeof a){case "string":return cc(a);case "bigint":return Fb(Qb(64,a));default:return dc(a)}}function ec(a){const b=a.length;return a[0]==="-"?b<20?!0:b===20&&Number(a.substring(0,7))>-922337:b<19?!0:b===19&&Number(a.substring(0,6))<922337} 
function dc(a){a=Tb(a);if(!Rb(a)){Mb(a);var b=Jb,c=Kb;if(a=c&2147483648)b=~b+1>>>0,c=~c>>>0,b==0&&(c=c+1>>>0);const d=c*4294967296+(b>>>0);b=Number.isSafeInteger(d)?d:Nb(b,c);a=typeof b==="number"?a?-b:b:a?"-"+b:b}return a}function fc(a){a=Tb(a);if(Rb(a))a=String(a);else{{const b=String(a);ec(b)?a=b:(Mb(a),a=Ob())}}return a} 
function cc(a){var b=Tb(Number(a));if(Rb(b))return String(b);b=a.indexOf(".");b!==-1&&(a=a.substring(0,b));ec(a)||(a.length<16?Mb(Number(a)):(a=BigInt(a),Jb=Number(a&BigInt(4294967295))>>>0,Kb=Number(a>>BigInt(32)&BigInt(4294967295))),a=Ob());return a}function gc(a){var b=typeof a;if(a==null)return a;if(b==="bigint")return Fb(Qb(64,a));if(Wb(a))return b==="string"?(b=Tb(Number(a)),Rb(b)?a=Fb(b):(b=a.indexOf("."),b!==-1&&(a=a.substring(0,b)),a=Fb(Qb(64,BigInt(a))))):a=Rb(a)?Fb(dc(a)):Fb(fc(a)),a} 
function hc(a){if(typeof a!=="string")throw Error();return a}function jc(a){if(a!=null&&typeof a!=="string")throw Error();return a}function kc(a){return a==null||typeof a==="string"?a:void 0}function lc(a,b,c,d){if(a!=null&&typeof a==="object"&&a.Aa===pb)return a;if(!Array.isArray(a))return c?d&2?((a=b[fb])||(a=new b,jb(a.C,34),a=b[fb]=a),b=a):b=new b:b=void 0,b;let e=c=a[w]|0;e===0&&(e|=d&32);e|=d&2;e!==c&&(a[w]=e);return new b(a)};function mc(a){return a};function nc(a,b,c){const d=ob(a);var e=d.length;const f=b&256?d[e-1]:void 0;e+=f?-1:0;for(b=b&512?1:0;b<e;b++)d[b]=c(d[b]);if(f){b=d[b]={};for(const g in f)Object.prototype.hasOwnProperty.call(f,g)&&(b[g]=c(f[g]))}ub(d,a);return d}function oc(a,b,c,d,e){if(a!=null){if(Array.isArray(a)){const f=a[w]|0;return a.length===0&&f&1?void 0:e&&f&2?a:pc(a,b,c,d!==void 0,e)}return b(a,d)}} 
function pc(a,b,c,d,e){const f=d||c?a[w]|0:0;d=d?!!(f&32):void 0;const g=ob(a);let h=0;const k=g.length;for(let t=0;t<k;t++){var l=g[t];if(t===k-1&&qb(l)){var n=b,m=c,r=d,x=e;let v=void 0;for(let J in l){if(!Object.prototype.hasOwnProperty.call(l,J))continue;const P=oc(l[J],n,m,r,x);P!=null&&((v??(v={}))[J]=P)}l=v}else l=oc(g[t],b,c,d,e);g[t]=l;l!=null&&(h=t+1)}h<k&&(g.length=h);c&&(ub(g,a),c(f,g));return g} 
function qc(a){switch(typeof a){case "number":return Number.isFinite(a)?a:""+a;case "bigint":return Ib(a)?Number(a):""+a;case "boolean":return a?1:0;case "object":if(a!=null&&a instanceof Uint8Array){let b="",c=0;const d=a.length-10240;for(;c<d;)b+=String.fromCharCode.apply(null,a.subarray(c,c+=10240));b+=String.fromCharCode.apply(null,c?a.subarray(c):a);return btoa(b)}if(a.Aa===pb)return rc(a);return}return a}var sc=typeof structuredClone!="undefined"?structuredClone:a=>pc(a,qc,void 0,void 0,!1); 
let tc;function uc(a){try{return rc(a)}finally{tc=void 0}} 
function rc(a){var b=a.C;a=pc(b,qc,void 0,void 0,!1);var c=b[w]|0;if((b=a.length)&&!(c&512)){var d=a[b-1],e=!1;qb(d)?(b--,e=!0):d=void 0;c=c&512?0:-1;var f=b-c,g=(tc??mc)(f,c,a,d);d&&(a[b]=void 0);if(f<g&&d){f=!0;for(var h in d){if(!Object.prototype.hasOwnProperty.call(d,h))continue;const k=+h;if(k<=g)e=k+c,a[e]=d[h],b=Math.max(e+1,b),e=!1,delete d[h];else{f=!1;break}}f&&(d=void 0)}for(f=b-1;b>0;f=b-1)if(h=a[f],h==null)b--,e=!0;else if(f-=c,f>=g)(d??(d={}))[f]=h,b--,e=!0;else break;e&&(a.length=b); 
d&&a.push(d)}return a};function vc(a,b,c=nb){if(a!=null){if(a instanceof Uint8Array)return b?a:new Uint8Array(a);if(Array.isArray(a)){var d=a[w]|0;if(d&2)return a;b&&(b=d===0||!!(d&32)&&!(d&64||!(d&16)));return b?(a[w]=(d|34)&-12293,a):pc(a,vc,d&4?nb:c,!0,!0)}a.Aa===pb&&(c=a.C,d=c[w]|0,a=d&2?a:new a.constructor(wc(c,d,!0)));return a}}function wc(a,b,c){const d=c||b&2?nb:mb,e=!!(b&32);a=nc(a,b,f=>vc(f,e,d));jb(a,32|(c?2:0));return a}function xc(a){const b=a.C,c=b[w]|0;return c&2?new a.constructor(wc(b,c,!1)):a} 
function yc(a){const b=a.C,c=b[w]|0;return c&2?a:new a.constructor(wc(b,c,!0))};const zc=Fb(0);function Ac(a,b){a=a.C;return Bc(a,a[w]|0,b)}function Bc(a,b,c,d){if(c===-1)return null;var e=c+(b&512?0:-1);const f=a.length-1;if(e>=f&&b&256)return a[f][c];if(d&&b&256&&(b=a[f][c],b!=null))return a[e]!=null&&gb!=null&&(a=Ya??(Ya={}),e=a[gb]||0,e>=4||(a[gb]=e+1,a=Error(),Xa(a,"incident"),Za?bb(a):sa(a))),b;if(e<=f)return a[e]}function A(a,b,c){const d=a.C;let e=d[w]|0;tb(e);B(d,e,b,c);return a} 
function B(a,b,c,d){const e=b&512?0:-1,f=c+e;var g=a.length-1;if(f>=g&&b&256)return a[g][c]=d,b;if(f<=g)return a[f]=d,b&256&&(a=a[g],c in a&&delete a[c]),b;d!==void 0&&(g=b>>15&1023||536870912,c>=g?d!=null&&(a[g+e]={[c]:d},b|=256,a[w]=b):a[f]=d);return b}function Cc(a,b,c){return Dc(a,b,c,!1)!==void 0}function C(a){return a===vb?2:4} 
function Ec(a,b,c,d,e){const f=a.C;a=f[w]|0;const g=2&a?1:d;e=!!e;d=Fc(f,a,b);let h=d[w]|0;if(!(4&h)){4&h&&(d=ob(d),h=Gc(h,a),a=B(f,a,b,d));let k=0,l=0;for(;k<d.length;k++){const n=c(d[k]);n!=null&&(d[l++]=n)}l<k&&(d.length=l);h=Hc(h,a);c=(h|20)&-4097;h=c&=-8193;d[w]=h;2&h&&Object.freeze(d)}g===1||g===4&&32&h?Ic(h)||(e=h,h|=2,h!==e&&(d[w]=h),Object.freeze(d)):(g===2&&Ic(h)&&(d=ob(d),h=Gc(h,a),h=Jc(h,a,e),d[w]=h,a=B(f,a,b,d)),Ic(h)||(b=h,h=Jc(h,a,e),h!==b&&(d[w]=h)));return d} 
function Fc(a,b,c){a=Bc(a,b,c);return Array.isArray(a)?a:rb}function Hc(a,b){a===0&&(a=Gc(a,b));return a|1}function Ic(a){return!!(2&a)&&!!(4&a)||!!(2048&a)} 
function Kc(a,b,c,d){const e=a.C;let f=e[w]|0;tb(f);if(c==null)return B(e,f,b),a;let g=c[w]|0,h=g;var k=Ic(g);let l=k||Object.isFrozen(c);k||(g=0);l||(c=ob(c),h=0,g=Gc(g,f),g=Jc(g,f,!0),l=!1);g|=21;k=kb(g)??0;for(let n=0;n<c.length;n++){const m=c[n],r=d(m,k);Object.is(m,r)||(l&&(c=ob(c),h=0,g=Gc(g,f),g=Jc(g,f,!0),l=!1),c[n]=r)}g!==h&&(l&&(c=ob(c),g=Gc(g,f),g=Jc(g,f,!0)),c[w]=g);B(e,f,b,c);return a} 
function D(a,b,c,d){const e=a.C;let f=e[w]|0;tb(f);B(e,f,b,(d==="0"?Number(c)===0:c===d)?void 0:c);return a}function Lc(a,b,c,d){const e=a.C;var f=e[w]|0;tb(f);if(d==null){var g=Mc(e);if(Nc(g,e,f,c)===b)g.set(c,0);else return a}else{g=Mc(e);const h=Nc(g,e,f,c);h!==b&&(h&&(f=B(e,f,h)),g.set(c,b))}B(e,f,b,d);return a}function Oc(a,b,c){return Pc(a,b)===c?c:-1}function Pc(a,b){a=a.C;return Nc(Mc(a),a,a[w]|0,b)}function Mc(a){return a[hb]??(a[hb]=new Map)} 
function Nc(a,b,c,d){let e=a.get(d);if(e!=null)return e;e=0;for(let f=0;f<d.length;f++){const g=d[f];Bc(b,c,g)!=null&&(e!==0&&(c=B(b,c,e)),e=g)}a.set(d,e);return e}function Qc(a,b,c){a=a.C;let d=a[w]|0;tb(d);const e=Bc(a,d,c);b=xc(lc(e,b,!0,d));e!==b&&B(a,d,c,b);return b}function Dc(a,b,c,d){a=a.C;let e=a[w]|0;d=Bc(a,e,c,d);b=lc(d,b,!1,e);b!==d&&b!=null&&B(a,e,c,b);return b}function Rc(a,b,c){(a=Dc(a,b,c,!1))||(a=b[fb])||(a=new b,jb(a.C,34),a=b[fb]=a);return a} 
function E(a,b,c){b=Dc(a,b,c,!1);if(b==null)return b;a=a.C;let d=a[w]|0;if(!(d&2)){const e=xc(b);e!==b&&(b=e,B(a,d,c,b))}return b} 
function F(a,b,c,d){var e=a.C[w]|0,f=e,g=!(2&e);a=a.C;var h=!!(2&f);e=h?1:d;g&&(g=!h);d=Fc(a,f,c);var k=d[w]|0;h=!!(4&k);if(!h){k=Hc(k,f);var l=d,n=f;const m=!!(2&k);m&&(n|=2);let r=!m,x=!0,t=0,v=0;for(;t<l.length;t++){const J=lc(l[t],b,!1,n);if(J instanceof b){if(!m){const P=!!((J.C[w]|0)&2);r&&(r=!P);x&&(x=P)}l[v++]=J}}v<t&&(l.length=v);k|=4;k=x?k|16:k&-17;k=r?k|8:k&-9;l[w]=k;m&&Object.freeze(l)}if(g&&!(8&k||!d.length&&(e===1||e===4&&32&k))){Ic(k)&&(d=ob(d),k=Gc(k,f),f=B(a,f,c,d));b=d;g=k;for(l= 
0;l<b.length;l++)k=b[l],n=xc(k),k!==n&&(b[l]=n);g|=8;g=b.length?g&-17:g|16;k=b[w]=g}e===1||e===4&&32&k?Ic(k)||(f=k,k|=!d.length||16&k&&(!h||32&k)?2:2048,k!==f&&(d[w]=k),Object.freeze(d)):(e===2&&Ic(k)&&(d=ob(d),k=Gc(k,f),k=Jc(k,f,!1),d[w]=k,f=B(a,f,c,d)),Ic(k)||(c=k,k=Jc(k,f,!1),k!==c&&(d[w]=k)));return d}function Sc(a,b,c){c==null&&(c=void 0);return A(a,b,c)}function Tc(a,b,c,d){d==null&&(d=void 0);return Lc(a,b,c,d)} 
function Uc(a,b,c){const d=a.C;let e=d[w]|0;tb(e);if(c==null)return B(d,e,b),a;let f=c[w]|0,g=f;const h=Ic(f),k=h||Object.isFrozen(c);let l=!0,n=!0;for(let r=0;r<c.length;r++){var m=c[r];h||(m=!!((m.C[w]|0)&2),l&&(l=!m),n&&(n=m))}h||(f=l?13:5,f=n?f|16:f&-17);k&&f===g||(c=ob(c),g=0,f=Gc(f,e),f=Jc(f,e,!0));f!==g&&(c[w]=f);B(d,e,b,c);return a}function Gc(a,b){a=(2&b?a|2:a&-3)|32;return a&=-2049}function Jc(a,b,c){32&b&&c||(a&=-33);return a} 
function Vc(a,b){tb(a.C[w]|0);a=Ec(a,4,kc,2,!0);const c=kb(a[w]|0)??0;if(Array.isArray(b)){var d=b.length;for(let e=0;e<d;e++)a.push(hc(b[e],c))}else for(d of b)a.push(hc(d,c))}function Wc(a,b){a=Ac(a,b);a!=null&&(typeof a==="bigint"?Ib(a)?a=Number(a):(a=Qb(64,a),a=Ib(a)?Number(a):String(a)):a=Wb(a)?typeof a==="number"?dc(a):cc(a):void 0);return a}function Xc(a,b){a=Ac(a,b);return a==null||typeof a==="boolean"?a:typeof a==="number"?!!a:void 0}function Yc(a,b){return $b(Ac(a,b))} 
function G(a,b){return kc(Ac(a,b))}function H(a,b){return Yb(Ac(a,b))}function I(a,b,c=!1){return Xc(a,b)??c}function ad(a,b){return Yc(a,b)??0}function bd(a,b){a=a.C;let c=a[w]|0;const d=Bc(a,c,b);var e=d==null||typeof d==="number"?d:d==="NaN"||d==="Infinity"||d==="-Infinity"?Number(d):void 0;e!=null&&e!==d&&B(a,c,b,e);return e??0}function K(a,b){return G(a,b)??""}function L(a,b){return H(a,b)??0}function cd(a,b){return Ec(a,b,kc,C())}function dd(a,b){return Ec(a,b,Yb,C())} 
function ed(a,b,c){return L(a,Oc(a,c,b))}function fd(a,b,c,d){return E(a,b,Oc(a,d,c))}function gd(a,b,c){return D(a,b,c==null?c:bc(c),"0")}function hd(a,b){var c=performance.now();if(c!=null&&typeof c!=="number")throw Error(`Value of float/double field must be a number, found ${typeof c}: ${c}`);D(a,b,c,0)}function id(a,b,c){return A(a,b,jc(c))}function jd(a,b,c){return D(a,b,jc(c),"")};var M=class{constructor(a){a:{if(a==null){var b=96;a=[]}else{if(!Array.isArray(a))throw Error("narr");b=a[w]|0;if(b&2048)throw Error("farr");if(b&64)break a;var c=a;b|=64;var d=c.length;if(d&&(--d,qb(c[d]))){b|=256;c=d-(b&512?0:-1);if(c>=1024)throw Error("pvtlmt");b=b&-33521665|(c&1023)<<15}}a[w]=b}this.C=a}toJSON(){return uc(this)}};M.prototype.Aa=pb; 
function kd(a,b){if(b==null)return new a;if(!Array.isArray(b))throw Error("must be an array");if(Object.isFrozen(b)||Object.isSealed(b)||!Object.isExtensible(b))throw Error("arrays passed to jspb constructors must be mutable");jb(b,128);return new a(lb(b))};function ld(a){return()=>{var b;(b=a[fb])||(b=new a,jb(b.C,34),b=a[fb]=b);return b}}function md(a){return b=>{if(b==null||b=="")b=new a;else{b=JSON.parse(b);if(!Array.isArray(b))throw Error("dnarr");b=new a(lb(b))}return b}};var nd=class extends M{};var od=class extends M{};function pd(a){return function(){return!a.apply(this,arguments)}}function qd(a){let b=!1,c;return function(){b||(c=a(),b=!0);return c}}function rd(a){let b=a;return function(){if(b){const c=b;b=null;c()}}};function sd(a,b,c){a.addEventListener&&a.addEventListener(b,c,!1)}function td(a,b,c){return a.removeEventListener?(a.removeEventListener(b,c,!1),!0):!1};function ud(){return xa&&Ba?Ba.mobile:!vd()&&(q("iPod")||q("iPhone")||q("Android")||q("IEMobile"))}function vd(){return xa&&Ba?!Ba.mobile&&(q("iPad")||q("Android")||q("Silk")):q("iPad")||q("Android")&&!q("Mobile")||q("Silk")};function wd(a,b){const c={};for(const d in a)b.call(void 0,a[d],d,a)&&(c[d]=a[d]);return c}function xd(a,b){for(const c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function yd(a){const b=[];let c=0;for(const d in a)b[c++]=a[d];return b}function zd(a){const b={};for(const c in a)b[c]=a[c];return b};/* 
 
 Copyright Google LLC 
 SPDX-License-Identifier: Apache-2.0 
*/ 
let Ad=globalThis.trustedTypes,Bd;function Cd(){let a=null;if(!Ad)return a;try{const b=c=>c;a=Ad.createPolicy("goog#html",{createHTML:b,createScript:b,createScriptURL:b})}catch(b){}return a};var Dd=class{constructor(a){this.g=a}toString(){return this.g+""}};function Ed(a){Bd===void 0&&(Bd=Cd());var b=Bd;return new Dd(b?b.createScriptURL(a):a)}function Fd(a){if(a instanceof Dd)return a.g;throw Error("");};var Gd=/^\s*(?!javascript:)(?:[\w+.-]+:|[^:/?#]*(?:[/?#]|$))/i;function Hd(a=document){a=a.querySelector?.("script[nonce]");return a==null?"":a.nonce||a.getAttribute("nonce")||""};const Id="alternate author bookmark canonical cite help icon license modulepreload next prefetch dns-prefetch prerender preconnect preload prev search subresource".split(" ");function Jd(a){return String(a).replace(/\-([a-z])/g,function(b,c){return c.toUpperCase()})};var Kd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$"),Ld=/#|$/;function Md(a,b){const c=a.search(Ld);a:{var d=0;for(var e=b.length;(d=a.indexOf(b,d))>=0&&d<c;){var f=a.charCodeAt(d-1);if(f==38||f==63)if(f=a.charCodeAt(d+e),!f||f==61||f==38||f==35)break a;d+=e+1}d=-1}if(d<0)return null;e=a.indexOf("&",d);if(e<0||e>c)e=c;d+=b.length+1;return decodeURIComponent(a.slice(d,e!==-1?e:0).replace(/\+/g," "))};function Nd(a,...b){if(b.length===0)return Ed(a[0]);let c=a[0];for(let d=0;d<b.length;d++)c+=encodeURIComponent(b[d])+a[d+1];return Ed(c)}function Od(a,b){a=Fd(a).toString();const c=a.split(/[?#]/),d=/[?]/.test(a)?"?"+c[1]:"";return Pd(c[0],d,/[#]/.test(a)?"#"+(d?c[2]:c[1]):"",b)} 
function Pd(a,b,c,d){function e(g,h){g!=null&&(Array.isArray(g)?g.forEach(k=>e(k,h)):(b+=f+encodeURIComponent(h)+"="+encodeURIComponent(g),f="&"))}let f=b.length?"&":"?";d.constructor===Object&&(d=Object.entries(d));Array.isArray(d)?d.forEach(g=>e(g[1],g[0])):d.forEach(e);return Ed(a+b+c)};function Qd(a){try{var b;if(b=!!a&&a.location.href!=null)a:{try{Ra(a.foo);b=!0;break a}catch(c){}b=!1}return b}catch{return!1}}function Rd(a){return Qd(a.top)?a.top:null}function Sd(a,b){const c=Td("SCRIPT",a);c.src=Fd(b);(b=Hd(c.ownerDocument))&&c.setAttribute("nonce",b);(a=a.getElementsByTagName("script")[0])&&a.parentNode&&a.parentNode.insertBefore(c,a)}function Ud(a,b){return b.getComputedStyle?b.getComputedStyle(a,null):a.currentStyle} 
function Vd(){if(!globalThis.crypto)return Math.random();try{const a=new Uint32Array(1);globalThis.crypto.getRandomValues(a);return a[0]/65536/65536}catch{return Math.random()}}function Wd(a,b){if(a)for(const c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)}function Xd(a){const b=a.length;if(b==0)return 0;let c=305419896;for(let d=0;d<b;d++)c^=(c<<5)+(c>>2)+a.charCodeAt(d)&4294967295;return c>0?c:4294967296+c}var Yd=/^([0-9.]+)px$/,Zd=/^(-?[0-9.]{1,30})$/; 
function $d(a){if(!Zd.test(a))return null;a=Number(a);return isNaN(a)?null:a}function ae(a){return(a=Yd.exec(a))?+a[1]:null}var be=qd(()=>ud()?2:vd()?1:0),ce=a=>{Wd({display:"none"},(b,c)=>{a.style.setProperty(c,b,"important")})};let de=[];const ee=()=>{const a=de;de=[];for(const b of a)try{b()}catch{}};function fe(){var a=N(ge).A(he.g,he.defaultValue),b=O.document;if(a.length&&b.head)for(const c of a)c&&b.head&&(a=Td("META"),b.head.appendChild(a),a.httpEquiv="origin-trial",a.content=c)} 
var ie=()=>{var a=Math.random;return Math.floor(a()*2**52)},je=a=>{if(typeof a.goog_pvsid!=="number")try{Object.defineProperty(a,"goog_pvsid",{value:ie(),configurable:!1})}catch(b){}return Number(a.goog_pvsid)||-1},le=a=>{var b=ke;b.readyState==="complete"||b.readyState==="interactive"?(de.push(a),de.length==1&&(window.Promise?Promise.resolve().then(ee):window.setImmediate?setImmediate(ee):setTimeout(ee,0))):b.addEventListener("DOMContentLoaded",a)}; 
function Td(a,b=document){return b.createElement(String(a).toLowerCase())};function me(a,b,c=null,d=!1,e=!1){ne(a,b,c,d,e)}function ne(a,b,c,d,e=!1){a.google_image_requests||(a.google_image_requests=[]);const f=Td("IMG",a.document);if(c||d){const g=h=>{c&&c(h);if(d){h=a.google_image_requests;const k=La(h,f);k>=0&&Array.prototype.splice.call(h,k,1)}td(f,"load",g);td(f,"error",g)};sd(f,"load",g);sd(f,"error",g)}e&&(f.attributionSrc="");f.src=b;a.google_image_requests.push(f)} 
var pe=(a,b)=>{let c=`https://${"pagead2.googlesyndication.com"}/pagead/gen_204?id=${b}`;Wd(a,(d,e)=>{if(d||d===0)c+=`&${e}=${encodeURIComponent(""+d)}`});oe(c)},oe=a=>{var b=window;b.fetch?b.fetch(a,{keepalive:!0,credentials:"include",redirect:"follow",method:"get",mode:"no-cors"}):me(b,a,void 0,!1,!1)};var ke=document,O=window;let qe=null;var re=(a,b=[])=>{let c=!1;p.google_logging_queue||(c=!0,p.google_logging_queue=[]);p.google_logging_queue.push([a,b]);if(a=c){if(qe==null){qe=!1;try{const d=Rd(p);d&&d.location.hash.indexOf("google_logging")!==-1&&(qe=!0)}catch(d){}}a=qe}a&&Sd(p.document,Nd`https://pagead2.googlesyndication.com/pagead/js/logging_library.js`)};function se(a,b){this.width=a;this.height=b}se.prototype.aspectRatio=function(){return this.width/this.height};se.prototype.isEmpty=function(){return!(this.width*this.height)};se.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};se.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};se.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this}; 
se.prototype.scale=function(a,b){this.width*=a;this.height*=typeof b==="number"?b:a;return this};function te(a=p){let b=a.context||a.AMP_CONTEXT_DATA;if(!b)try{b=a.parent.context||a.parent.AMP_CONTEXT_DATA}catch{}return b?.pageViewId&&b?.canonicalUrl?b:null}function ue(a=te()){return a?Qd(a.master)?a.master:null:null};function ve(a,b){b=String(b);a.contentType==="application/xhtml+xml"&&(b=b.toLowerCase());return a.createElement(b)}function we(a){this.g=a||p.document||document}we.prototype.contains=function(a,b){return a&&b?a==b||a.contains(b):!1};var xe=a=>{a=ue(te(a))||a;a.google_unique_id=(a.google_unique_id||0)+1;return a.google_unique_id},ye=a=>{a=a.google_unique_id;return typeof a==="number"?a:0},ze=a=>{if(!a)return"";a=a.toLowerCase();a.substring(0,3)!="ca-"&&(a="ca-"+a);return a};var Ae=class{constructor(a,b){this.error=a;this.context=b.context;this.msg=b.message||"";this.id=b.id||"jserror";this.meta={}}},Ce=a=>!!(a.error&&a.meta&&a.id);function De(a){return new Ae(a,{message:Ee(a)})}function Ee(a){let b=a.toString();a.name&&b.indexOf(a.name)==-1&&(b+=": "+a.name);a.message&&b.indexOf(a.message)==-1&&(b+=": "+a.message);if(a.stack)a:{a=a.stack;var c=b;try{a.indexOf(c)==-1&&(a=c+"\n"+a);let d;for(;a!=d;)d=a,a=a.replace(RegExp("((https?:/..*/)[^/:]*:\\d+(?:.|\n)*)\\2"),"$1");b=a.replace(RegExp("\n *","g"),"\n");break a}catch(d){b=c;break a}b=void 0}return b};const Fe=RegExp("^https?://(\\w|-)+\\.cdn\\.ampproject\\.(net|org)(\\?|/|$)");var Ge=class{constructor(a,b){this.g=a;this.i=b}},He=class{constructor(a,b,c){this.url=a;this.u=b;this.Xa=!!c;this.depth=null}};let Ie=null;function Je(){var a=window;if(Ie===null){Ie="";try{let b="";try{b=a.top.location.hash}catch(c){b=a.location.hash}if(b){const c=b.match(/\bdeid=([\d,]+)/);Ie=c?c[1]:""}}catch(b){}}return Ie};function Ke(){const a=p.performance;return a&&a.now&&a.timing?Math.floor(a.now()+a.timing.navigationStart):Date.now()}function Le(){const a=p.performance;return a&&a.now?a.now():null};var Me=class{constructor(a,b){var c=Le()||Ke();this.label=a;this.type=b;this.value=c;this.duration=0;this.taskId=this.slotId=void 0;this.uniqueId=Math.random()}};const Ne=p.performance,Oe=!!(Ne&&Ne.mark&&Ne.measure&&Ne.clearMarks),Pe=qd(()=>{var a;if(a=Oe)a=Je(),a=!!a.indexOf&&a.indexOf("1337")>=0;return a});function Qe(a){a&&Ne&&Pe()&&(Ne.clearMarks(`goog_${a.label}_${a.uniqueId}_start`),Ne.clearMarks(`goog_${a.label}_${a.uniqueId}_end`))}function Re(a){a.g=!1;if(a.i!==a.j.google_js_reporting_queue){if(Pe()){var b=a.i;const c=b.length;b=typeof b==="string"?b.split(""):b;for(let d=0;d<c;d++)d in b&&Qe.call(void 0,b[d])}a.i.length=0}} 
var Se=class{constructor(a){this.i=[];this.j=a||p;let b=null;a&&(a.google_js_reporting_queue=a.google_js_reporting_queue||[],this.i=a.google_js_reporting_queue,b=a.google_measure_js_timing);this.g=Pe()||(b!=null?b:Math.random()<1)}start(a,b){if(!this.g)return null;a=new Me(a,b);b=`goog_${a.label}_${a.uniqueId}_start`;Ne&&Pe()&&Ne.mark(b);return a}end(a){if(this.g&&typeof a.value==="number"){a.duration=(Le()||Ke())-a.value;var b=`goog_${a.label}_${a.uniqueId}_end`;Ne&&Pe()&&Ne.mark(b);!this.g||this.i.length> 
2048||this.i.push(a)}}};function Te(a,b){const c={};c[a]=b;return[c]}function Ue(a,b,c,d,e){const f=[];Wd(a,(g,h)=>{(g=Ve(g,b,c,d,e))&&f.push(`${h}=${g}`)});return f.join(b)} 
function Ve(a,b,c,d,e){if(a==null)return"";b=b||"&";c=c||",$";typeof c==="string"&&(c=c.split(""));if(a instanceof Array){if(d||(d=0),d<c.length){const f=[];for(let g=0;g<a.length;g++)f.push(Ve(a[g],b,c,d+1,e));return f.join(c[d])}}else if(typeof a==="object")return e||(e=0),e<2?encodeURIComponent(Ue(a,b,c,d,e+1)):"...";return encodeURIComponent(String(a))}function We(a){let b=1;for(const c in a.i)c.length>b&&(b=c.length);return 3997-b-a.j.length-1} 
function Xe(a,b){let c="https://pagead2.googlesyndication.com"+b,d=We(a)-b.length;if(d<0)return"";a.g.sort((f,g)=>f-g);b=null;let e="";for(let f=0;f<a.g.length;f++){const g=a.g[f],h=a.i[g];for(let k=0;k<h.length;k++){if(!d){b=b==null?g:b;break}let l=Ue(h[k],a.j,",$");if(l){l=e+l;if(d>=l.length){d-=l.length;c+=l;e=a.j;break}b=b==null?g:b}}}a="";b!=null&&(a=`${e}${"trn"}=${b}`);return c+a}var Ye=class{constructor(){this.j="&";this.i={};this.l=0;this.g=[]}};var $e=class{constructor(a,b,c=null){this.B=a;this.F=b;this.i=c;this.g=null;this.l=!1;this.A=this.G}fb(a){this.A=a}Ca(a){this.g=a}j(a){this.l=a}Z(a,b,c){let d,e;try{this.i&&this.i.g?(e=this.i.start(a.toString(),3),d=b(),this.i.end(e)):d=b()}catch(f){b=this.F;try{Qe(e),b=this.A(a,De(f),void 0,c)}catch(g){this.G(217,g)}if(b)window.console?.error?.(f);else throw f;}return d}na(a,b){return(...c)=>this.Z(a,()=>b.apply(void 0,c))}G(a,b,c,d,e){e=e||"jserror";let f=void 0;try{const ab=new Ye;var g=ab;g.g.push(1); 
g.i[1]=Te("context",a);Ce(b)||(b=De(b));g=b;if(g.msg){b=ab;var h=g.msg.substring(0,512);b.g.push(2);b.i[2]=Te("msg",h)}var k=g.meta||{};h=k;if(this.g)try{this.g(h)}catch(wa){}if(d)try{d(h)}catch(wa){}d=ab;k=[k];d.g.push(3);d.i[3]=k;d=p;k=[];h=null;do{var l=d;if(Qd(l)){var n=l.location.href;h=l.document&&l.document.referrer||null}else n=h,h=null;k.push(new He(n||"",l));try{d=l.parent}catch(wa){d=null}}while(d&&l!=d);for(let wa=0,Tg=k.length-1;wa<=Tg;++wa)k[wa].depth=Tg-wa;l=p;if(l.location&&l.location.ancestorOrigins&& 
l.location.ancestorOrigins.length==k.length-1)for(n=1;n<k.length;++n){var m=k[n];m.url||(m.url=l.location.ancestorOrigins[n-1]||"",m.Xa=!0)}var r=k;let Zc=new He(p.location.href,p,!1);l=null;const Be=r.length-1;for(m=Be;m>=0;--m){var x=r[m];!l&&Fe.test(x.url)&&(l=x);if(x.url&&!x.Xa){Zc=x;break}}x=null;const Nk=r.length&&r[Be].url;Zc.depth!=0&&Nk&&(x=r[Be]);f=new Ge(Zc,x);if(f.i){r=ab;var t=f.i.url||"";r.g.push(4);r.i[4]=Te("top",t)}var v={url:f.g.url||""};if(f.g.url){const wa=f.g.url.match(Kd);var J= 
wa[1],P=wa[3],$c=wa[4];t="";J&&(t+=J+":");P&&(t+="//",t+=P,$c&&(t+=":"+$c));var ic=t}else ic="";J=ab;v=[v,{url:ic}];J.g.push(5);J.i[5]=v;Ze(this.B,e,ab,this.l,c)}catch(ab){try{Ze(this.B,e,{context:"ecmserr",rctx:a,msg:Ee(ab),url:f?.g.url??""},this.l,c)}catch(Zc){}}return this.F}ea(a,b){b.catch(c=>{c=c?c:"unknown rejection";this.G(a,c instanceof Error?c:Error(c),void 0,this.g||void 0)})}};var af=class extends M{},bf=[2,3,4];var cf=class extends M{},df=[3,4,5],ef=[6,7];var ff=class extends M{},gf=[4,5];function hf(a,b){var c=F(a,cf,2,C());if(!c.length)return jf(a,b);a=L(a,1);if(a===1)return c=hf(c[0],b),c.success?{success:!0,value:!c.value}:c;c=Na(c,d=>hf(d,b));switch(a){case 2:return c.find(d=>d.success&&!d.value)??c.find(d=>!d.success)??{success:!0,value:!0};case 3:return c.find(d=>d.success&&d.value)??c.find(d=>!d.success)??{success:!0,value:!1};default:return{success:!1,errorType:3}}} 
function jf(a,b){var c=Pc(a,df);a:{switch(c){case 3:var d=ed(a,3,df);break a;case 4:d=ed(a,4,df);break a;case 5:d=ed(a,5,df);break a}d=void 0}if(!d)return{success:!1,errorType:2};b=(b=b[c])&&b[d];if(!b)return{success:!1,property:d,da:c,errorType:1};let e;try{var f=cd(a,8);e=b(...f)}catch(g){return{success:!1,property:d,da:c,errorType:2}}f=L(a,1);if(f===4)return{success:!0,value:!!e};if(f===5)return{success:!0,value:e!=null};if(f===12)a=K(a,Oc(a,ef,7));else a:{switch(c){case 4:a=bd(a,Oc(a,ef,6));break a; 
case 5:a=K(a,Oc(a,ef,7));break a}a=void 0}if(a==null)return{success:!1,property:d,da:c,errorType:3};if(f===6)return{success:!0,value:e===a};if(f===9)return{success:!0,value:e!=null&&ua(String(e),a)===0};if(e==null)return{success:!1,property:d,da:c,errorType:4};switch(f){case 7:c=e<a;break;case 8:c=e>a;break;case 12:c=Bb(a)&&Bb(e)&&(new RegExp(a)).test(e);break;case 10:c=e!=null&&ua(String(e),a)===-1;break;case 11:c=e!=null&&ua(String(e),a)===1;break;default:return{success:!1,errorType:3}}return{success:!0, 
value:c}}function kf(a,b){return a?b?hf(a,b):{success:!1,errorType:1}:{success:!0,value:!0}};var lf=class extends M{};var mf=class extends M{getValue(){return E(this,lf,2)}};var nf=class extends M{},of=md(nf),pf=[1,2,3,6,7,8];var qf=class extends M{};function rf(a,b){try{const c=d=>[{[d.Da]:d.za}];return JSON.stringify([a.filter(d=>d.la).map(c),uc(b),a.filter(d=>!d.la).map(c)])}catch(c){return sf(c,b),""}}function sf(a,b){try{pe({m:Ee(a instanceof Error?a:Error(String(a))),b:L(b,1)||null,v:K(b,2)||null},"rcs_internal")}catch(c){}}var tf=class{constructor(a,b){var c=new qf;a=D(c,1,y(a),0);b=jd(a,2,b);this.j=yc(b)}};var uf=class extends M{getWidth(){return ad(this,3)}getHeight(){return ad(this,4)}};var vf=class extends M{};function wf(a,b){return A(a,1,b==null?b:bc(b))}function xf(a,b){return A(a,2,b==null?b:bc(b))}var yf=class extends M{getWidth(){return gc(Ac(this,1))??zc}getHeight(){return gc(Ac(this,2))??zc}};var zf=class extends M{};var Af=class extends M{};var Bf=class extends M{getValue(){return L(this,1)}};var Cf=class extends M{getContentUrl(){return K(this,4)}};var Df=class extends M{};function Ef(a){return Qc(a,Df,3)}var Ff=class extends M{};var Gf=class extends M{getContentUrl(){return K(this,1)}};var Hf=class extends M{};function If(a){var b=new Jf;return D(b,1,y(a),0)}var Jf=class extends M{};var Kf=class extends M{},Lf=[4,5,6,8,9,10,11,12,13,14,15,16,17];var Mf=class extends M{};function Nf(a,b){return D(a,1,y(b),0)}function Of(a,b){return D(a,2,y(b),0)}var Pf=class extends M{};var Qf=class extends M{},Rf=[1,2];function Sf(a,b){return Sc(a,1,b)}function Tf(a,b){return Uc(a,2,b)}function Uf(a,b){return Kc(a,4,b,Zb)}function Vf(a,b){return Uc(a,5,b)}function Wf(a,b){return D(a,6,y(b),0)}var Xf=class extends M{};var Yf=class extends M{},Zf=[1,2,3,4,6];var $f=class extends M{};function ag(a){var b=new bg;return Tc(b,4,cg,a)}var bg=class extends M{getTagSessionCorrelator(){return gc(Ac(this,2))??zc}},cg=[4,5,7,8,9];var dg=class extends M{};function eg(){var a=xc(fg());return jd(a,1,gg())}var hg=class extends M{};var ig=class extends M{};var jg=class extends M{getTagSessionCorrelator(){return gc(Ac(this,1))??zc}};var kg=class extends M{},lg=[1,7],mg=[4,6,8];class ng extends tf{constructor(){super(...arguments)}}function og(a,...b){pg(a,...b.map(c=>({la:!0,Da:3,za:uc(c)})))}function qg(a,...b){pg(a,...b.map(c=>({la:!0,Da:4,za:uc(c)})))}function rg(a,...b){pg(a,...b.map(c=>({la:!0,Da:7,za:uc(c)})))}var sg=class extends ng{};var tg=(a,b)=>{globalThis.fetch(a,{method:"POST",body:b,keepalive:b.length<65536,credentials:"omit",mode:"no-cors",redirect:"follow"}).catch(()=>{})};function pg(a,...b){try{a.F&&rf(a.g.concat(b),a.j).length>=65536&&ug(a),a.l&&!a.A&&(a.A=!0,vg(a.l,()=>{ug(a)})),a.g.push(...b),a.g.length>=a.B&&ug(a),a.g.length&&a.i===null&&(a.i=setTimeout(()=>{ug(a)},a.P))}catch(c){sf(c,a.j)}}function ug(a){a.i!==null&&(clearTimeout(a.i),a.i=null);if(a.g.length){var b=rf(a.g,a.j);a.I("https://pagead2.googlesyndication.com/pagead/ping?e=1",b);a.g=[]}} 
var wg=class extends sg{constructor(a,b,c,d,e,f){super(a,b);this.I=tg;this.P=c;this.B=d;this.F=e;this.l=f;this.g=[];this.i=null;this.A=!1}},xg=class extends wg{constructor(a,b,c=1E3,d=100,e=!1,f){super(a,b,c,d,e&&!0,f)}};function yg(a,b){var c=Date.now();c=Number.isFinite(c)?Math.round(c):0;b=gd(b,1,c);c=je(window);b=gd(b,2,c);return gd(b,6,a.A)}function zg(a,b,c,d,e,f){if(a.j){var g=Of(Nf(new Pf,b),c);b=Wf(Tf(Sf(Vf(Uf(new Xf,d),e),g),a.g.slice()),f);b=ag(b);qg(a.i,yg(a,b));if(f===1||f===3||f===4&&!a.g.some(h=>L(h,1)===L(g,1)&&L(h,2)===c))a.g.push(g),a.g.length>100&&a.g.shift()}}function Ag(a,b,c,d){if(a.j){var e=new Mf;b=A(e,1,z(b));c=A(b,2,z(c));d=A(c,3,y(d));c=new bg;d=Tc(c,8,cg,d);qg(a.i,yg(a,d))}} 
function Bg(a,b,c,d,e){if(a.j){var f=new ff;b=Sc(f,1,b);c=A(b,2,y(c));d=A(c,3,z(d));if(e.da===void 0)Lc(d,4,gf,y(e.errorType));else switch(e.da){case 3:c=new af;c=Lc(c,2,bf,y(e.property));e=A(c,1,y(e.errorType));Tc(d,5,gf,e);break;case 4:c=new af;c=Lc(c,3,bf,y(e.property));e=A(c,1,y(e.errorType));Tc(d,5,gf,e);break;case 5:c=new af,c=Lc(c,4,bf,y(e.property)),e=A(c,1,y(e.errorType)),Tc(d,5,gf,e)}e=new bg;e=Tc(e,9,cg,d);qg(a.i,yg(a,e))}} 
var Cg=class{constructor(a,b,c,d=new xg(6,"unknown",b)){this.A=a;this.l=c;this.i=d;this.g=[];this.j=a>0&&Vd()<1/a}};var N=a=>{var b="ya";if(a.ya&&a.hasOwnProperty(b))return a.ya;b=new a;return a.ya=b};var Dg=class{constructor(){this.M={[3]:{},[4]:{},[5]:{}}}};var Eg=/^true$/.test("false");function Fg(a,b){switch(b){case 1:return ed(a,1,pf);case 2:return ed(a,2,pf);case 3:return ed(a,3,pf);case 6:return ed(a,6,pf);case 8:return ed(a,8,pf);default:return null}}function Gg(a,b){if(!a)return null;switch(b){case 1:return I(a,1);case 7:return K(a,3);case 2:return bd(a,2);case 3:return K(a,3);case 6:return cd(a,4);case 8:return cd(a,4);default:return null}} 
const Hg=qd(()=>{if(!Eg)return{};try{var a=window;try{var b=a.sessionStorage.getItem("GGDFSSK")}catch{b=null}if(b)return JSON.parse(b)}catch{}return{}});function Ig(a,b,c,d=0){N(Jg).j[d]=N(Jg).j[d]?.add(b)??(new Set).add(b);const e=Hg();if(e[b]!=null)return e[b];b=Kg(d)[b];if(!b)return c;b=of(JSON.stringify(b));b=Lg(b);a=Gg(b,a);return a!=null?a:c} 
function Lg(a){const b=N(Dg).M;if(b&&Pc(a,pf)!==8){const c=Pa(F(a,mf,5,C()),d=>{d=kf(E(d,cf,1),b);return d.success&&d.value});if(c)return c.getValue()??null}return E(a,lf,4)??null}class Jg{constructor(){this.i={};this.l=[];this.j={};this.g=new Map}}function Mg(a,b=!1,c){return!!Ig(1,a,b,c)}function Ng(a,b=0,c){a=Number(Ig(2,a,b,c));return isNaN(a)?b:a}function Og(a,b="",c){a=Ig(3,a,b,c);return typeof a==="string"?a:b}function Pg(a,b=[],c){a=Ig(6,a,b,c);return Array.isArray(a)?a:b} 
function Qg(a,b=[],c){a=Ig(8,a,b,c);return Array.isArray(a)?a:b}function Kg(a){return N(Jg).i[a]||(N(Jg).i[a]={})}function Rg(a,b){const c=Kg(b);Wd(a,(d,e)=>{if(c[e]){const g=of(JSON.stringify(d));if(H(g,Oc(g,pf,8))!=null){var f=of(JSON.stringify(c[e]));d=Qc(g,lf,4);f=cd(Rc(f,lf,4),4);Vc(d,f)}c[e]=uc(g)}else c[e]=d})} 
function Sg(a,b,c,d,e=!1){var f=[],g=[];for(const m of b){b=Kg(m);for(const r of a){var h=Pc(r,pf);const x=Fg(r,h);if(x){a:{var k=x;var l=h,n=N(Jg).g.get(m)?.get(x)?.slice(0)??[];const t=new Yf;switch(l){case 1:Lc(t,1,Zf,y(k));break;case 2:Lc(t,2,Zf,y(k));break;case 3:Lc(t,3,Zf,y(k));break;case 6:Lc(t,4,Zf,y(k));break;case 8:Lc(t,6,Zf,y(k));break;default:k=void 0;break a}Kc(t,5,n,Zb);k=t}k&&N(Jg).j[m]?.has(x)&&f.push(k);h===8&&b[x]?(k=of(JSON.stringify(b[x])),h=Qc(r,lf,4),k=cd(Rc(k,lf,4),4),Vc(h, 
k)):k&&N(Jg).g.get(m)?.has(x)&&g.push(k);e||(h=x,k=m,l=d,n=N(Jg),n.g.has(k)||n.g.set(k,new Map),n.g.get(k).has(h)||n.g.get(k).set(h,[]),l&&n.g.get(k).get(h).push(l));b[x]=uc(r)}}}if(f.length||g.length)a=d??void 0,c.j&&c.l&&(d=new $f,f=Uc(d,2,f),g=Uc(f,3,g),a&&D(g,1,z(a),0),f=new bg,g=Tc(f,7,cg,g),qg(c.i,yg(c,g)))}function Ug(a,b){b=Kg(b);for(const c of a){a=of(JSON.stringify(c));const d=Pc(a,pf);(a=Fg(a,d))&&(b[a]||(b[a]=c))}}function Vg(){return Object.keys(N(Jg).i).map(a=>Number(a))} 
function Wg(a){N(Jg).l.includes(a)||Rg(Kg(4),a)};function Q(a,b,c){c.hasOwnProperty(a)||Object.defineProperty(c,String(a),{value:b})}function Xg(a,b,c){return b[a]||c}function Yg(a){Q(5,Mg,a);Q(6,Ng,a);Q(7,Og,a);Q(8,Pg,a);Q(17,Qg,a);Q(13,Ug,a);Q(15,Wg,a)}function Zg(a){Q(4,b=>{N(Dg).M=b},a);Q(9,(b,c)=>{var d=N(Dg);d.M[3][b]==null&&(d.M[3][b]=c)},a);Q(10,(b,c)=>{var d=N(Dg);d.M[4][b]==null&&(d.M[4][b]=c)},a);Q(11,(b,c)=>{var d=N(Dg);d.M[5][b]==null&&(d.M[5][b]=c)},a);Q(14,b=>{var c=N(Dg);for(const d of[3,4,5])Object.assign(c.M[d],b[d])},a)} 
function $g(a){a.hasOwnProperty("init-done")||Object.defineProperty(a,"init-done",{value:!0})};function ah(a,b,c){a.j=Xg(1,b,()=>{});a.l=(d,e)=>Xg(2,b,()=>[])(d,c,e);a.g=()=>Xg(3,b,()=>[])(c);a.i=d=>{Xg(16,b,()=>{})(d,c)}}class bh{j(){}i(){}l(){return[]}g(){return[]}};function Ze(a,b,c,d=!1,e){if((d?a.g:Math.random())<(e||.01))try{let f;c instanceof Ye?f=c:(f=new Ye,Wd(c,(h,k)=>{var l=f;const n=l.l++;h=Te(k,h);l.g.push(n);l.i[n]=h}));const g=Xe(f,"/pagead/gen_204?id="+b+"&");g&&me(p,g)}catch(f){}}function ch(a,b){b>=0&&b<=1&&(a.g=b)}class dh{constructor(){this.g=Math.random()}};let eh,fh;const gh=new Se(window);(a=>{eh=a??new dh;typeof window.google_srt!=="number"&&(window.google_srt=Math.random());ch(eh,window.google_srt);fh=new $e(eh,!0,gh);fh.Ca(()=>{});fh.j(!0);window.document.readyState=="complete"?window.google_measure_js_timing||Re(gh):gh.g&&sd(window,"load",()=>{window.google_measure_js_timing||Re(gh)})})();let hh=(new Date).getTime();var ih={ac:0,Zb:1,Wb:2,Rb:3,Xb:4,Sb:5,Yb:6,Ub:7,Vb:8,Qb:9,Tb:10,bc:11};var jh={ec:0,fc:1,dc:2};function kh(a){if(a.g!=0)throw Error("Already resolved/rejected.");}var nh=class{constructor(){this.i=new lh(this);this.g=0}resolve(a){kh(this);this.g=1;this.l=a;mh(this.i)}reject(a){kh(this);this.g=2;this.j=a;mh(this.i)}};function mh(a){switch(a.g.g){case 0:break;case 1:a.i&&a.i(a.g.l);break;case 2:a.j&&a.j(a.g.j);break;default:throw Error("Unhandled deferred state.");}}var lh=class{constructor(a){this.g=a}then(a,b){if(this.i)throw Error("Then functions already set.");this.i=a;this.j=b;mh(this)}};var oh=class{constructor(a){this.g=a.slice(0)}forEach(a){this.g.forEach((b,c)=>void a(b,c,this))}filter(a){return new oh(Ma(this.g,a))}apply(a){return new oh(a(this.g.slice(0)))}sort(a){return new oh(this.g.slice(0).sort(a))}get(a){return this.g[a]}add(a){const b=this.g.slice(0);b.push(a);return new oh(b)}};function ph(a,b){const c=[],d=a.length;for(let e=0;e<d;e++)c.push(a[e]);c.forEach(b,void 0)};var rh=class{constructor(){this.g={};this.i={}}set(a,b){const c=qh(a);this.g[c]=b;this.i[c]=a}get(a,b){a=qh(a);return this.g[a]!==void 0?this.g[a]:b}clear(){this.g={};this.i={}}};function qh(a){return a instanceof Object?String(ka(a)):a+""};function sh(a){return new th({value:a},null)}function uh(a){return new th(null,a)}function vh(a){try{return sh(a())}catch(b){return uh(b)}}function wh(a){return a.g!=null?a.getValue():null}function xh(a,b){a.g!=null&&b(a.getValue());return a}function yh(a,b){a.g!=null||b(a.i);return a}var th=class{constructor(a,b){this.g=a;this.i=b}getValue(){return this.g.value}map(a){return this.g!=null?(a=a(this.getValue()),a instanceof th?a:sh(a)):this}};var zh=class{constructor(a){this.g=new rh;if(a)for(let b=0;b<a.length;++b)this.add(a[b])}add(a){this.g.set(a,!0)}contains(a){return this.g.g[qh(a)]!==void 0}};var Ah=class{constructor(){this.g=new rh}set(a,b){let c=this.g.get(a);c||(c=new zh,this.g.set(a,c));c.add(b)}};var Bh=class extends M{getId(){return G(this,3)}};var Ch=class{constructor({ob:a,ic:b,vc:c,Hb:d}){this.g=b;this.l=new oh(a||[]);this.j=d;this.i=c}};const Eh=a=>{const b=[],c=a.l;c&&c.g.length&&b.push({aa:"a",ca:Dh(c)});a.g!=null&&b.push({aa:"as",ca:a.g});a.i!=null&&b.push({aa:"i",ca:String(a.i)});a.j!=null&&b.push({aa:"rp",ca:String(a.j)});b.sort(function(d,e){return d.aa.localeCompare(e.aa)});b.unshift({aa:"t",ca:"aa"});return b},Dh=a=>{a=a.g.slice(0).map(Fh);a=JSON.stringify(a);return Xd(a)},Fh=a=>{const b={};G(a,7)!=null&&(b.q=G(a,7));Yc(a,2)!=null&&(b.o=Yc(a,2));Yc(a,5)!=null&&(b.p=Yc(a,5));return b};var Gh=class extends M{setLocation(a){return A(this,1,y(a))}};function Hh(a){const b=[].slice.call(arguments).filter(pd(e=>e===null));if(!b.length)return null;let c=[],d={};b.forEach(e=>{c=c.concat(e.Ua||[]);d=Object.assign(d,e.eb)});return new Ih(c,d)}function Jh(a){switch(a){case 1:return new Ih(null,{google_ad_semantic_area:"mc"});case 2:return new Ih(null,{google_ad_semantic_area:"h"});case 3:return new Ih(null,{google_ad_semantic_area:"f"});case 4:return new Ih(null,{google_ad_semantic_area:"s"});default:return null}} 
function Kh(a){if(a==null)var b=null;else{b=Ih;var c=Eh(a);a=[];for(let d of c)c=String(d.ca),a.push(d.aa+"."+(c.length<=20?c:c.slice(0,19)+"_"));b=new b(null,{google_placement_id:a.join("~")})}return b}var Ih=class{constructor(a,b){this.Ua=a;this.eb=b}};var Lh=new Ih(["google-auto-placed"],{google_reactive_ad_format:40,google_tag_origin:"qs"});var Mh=md(class extends M{});var Nh=class extends M{};var Oh=class extends M{};var Ph=class extends M{};var Qh=class extends M{};var Rh=class extends M{};function Sh(a){if(a.nodeType!=1)var b=!1;else if(b=a.tagName=="INS")a:{b=["adsbygoogle-placeholder"];var c=a.className?a.className.split(/\s+/):[];a={};for(let d=0;d<c.length;++d)a[c[d]]=!0;for(c=0;c<b.length;++c)if(!a[b[c]]){b=!1;break a}b=!0}return b};function Th(a,b,c){switch(c){case 0:b.parentNode&&b.parentNode.insertBefore(a,b);break;case 3:if(c=b.parentNode){var d=b.nextSibling;if(d&&d.parentNode!=c)for(;d&&d.nodeType==8;)d=d.nextSibling;c.insertBefore(a,d)}break;case 1:b.insertBefore(a,b.firstChild);break;case 2:b.appendChild(a)}Sh(b)&&(b.setAttribute("data-init-display",b.style.display),b.style.display="block")};var R=class{constructor(a,b=!1){this.g=a;this.defaultValue=b}},S=class{constructor(a,b=0){this.g=a;this.defaultValue=b}},Uh=class{constructor(a,b=[]){this.g=a;this.defaultValue=b}};var Vh=new R(1333),Wh=new S(1359),Xh=new S(1358),Yh=new R(1360),Zh=new S(1357),$h=new R(1345),ai=new R(1332),bi=new R(1381),ci=new S(1130,100),di=new S(1340,.2),ei=new S(1338,.3),fi=new S(1336,1.2),gi=new S(1339,.3),hi=new R(1337),ii=new class{constructor(a,b=""){this.g=a;this.defaultValue=b}}(14),ji=new R(1342),ki=new R(1344),li=new S(1343,300),mi=new R(316),ni=new R(313),oi=new R(369),pi=new R(1318,!0),qi=new R(1378),ri=new R(626390500),si=new S(717888910),ti=new Uh(627094447,"1 2 3 4 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 24 29 30 34".split(" ")), 
ui=new S(717888911),vi=new Uh(641845510,["33","38"]),wi=new R(717888913),xi=new Uh(635821288,["29_18","30_19"]),yi=new Uh(636146137,["29_5","30_6"]),zi=new S(717888912),Ai=new Uh(627094446,"1 2 4 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 24 29 30 34".split(" ")),Bi=new Uh(683929765),Ci=new R(506914611),Di=new S(643258048,.15),Ei=new S(643258049,.33938),Fi=new R(711741274),Gi=new R(45650663),Hi=new S(684147711,-1),Ii=new S(684147712,-1),Ji=new R(662101537),Ki=new R(45675855,!0),Li=new R(45676172), 
Mi=new R(45675638),Ni=new R(45675667),Oi=new R(45674084),Pi=new S(1079,5),Qi=new R(10013),he=new class{constructor(a,b=[]){this.g=a;this.defaultValue=b}}(1934,["AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ==","Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ==", 
"A9wSqI5i0iwGdf6L1CERNdmsTPgVu44ewj8QxTBYgsv1LCPUVF7YmWOvTappqB1139jAymxUW/RO8zmMqo4zlAAAAACNeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiRmxlZGdlQmlkZGluZ0FuZEF1Y3Rpb25TZXJ2ZXIiLCJleHBpcnkiOjE3MzY4MTI4MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9","A+d7vJfYtay4OUbdtRPZA3y7bKQLsxaMEPmxgfhBGqKXNrdkCQeJlUwqa6EBbSfjwFtJWTrWIioXeMW+y8bWAgQAAACTeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiRmxlZGdlQmlkZGluZ0FuZEF1Y3Rpb25TZXJ2ZXIiLCJleHBpcnkiOjE3MzY4MTI4MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"]), 
Ri=new R(84);var ge=class{constructor(){const a={};this.i=(b,c)=>a[b]!=null?a[b]:c;this.l=(b,c)=>a[b]!=null?a[b]:c;this.g=(b,c)=>a[b]!=null?a[b]:c;this.A=(b,c)=>a[b]!=null?a[b]:c;this.j=(b,c)=>a[b]!=null?c.concat(a[b]):c;this.B=()=>{}}};function T(a){return N(ge).i(a.g,a.defaultValue)}function U(a){return N(ge).l(a.g,a.defaultValue)}function Si(a){return N(ge).j(a.g,a.defaultValue)};function Ti(a,b){const c=e=>{e=Ui(e);return e==null?!1:0<e},d=e=>{e=Ui(e);return e==null?!1:0>e};switch(b){case 0:return{init:Vi(a.previousSibling,c),ha:e=>Vi(e.previousSibling,c),ma:0};case 2:return{init:Vi(a.lastChild,c),ha:e=>Vi(e.previousSibling,c),ma:0};case 3:return{init:Vi(a.nextSibling,d),ha:e=>Vi(e.nextSibling,d),ma:3};case 1:return{init:Vi(a.firstChild,d),ha:e=>Vi(e.nextSibling,d),ma:3}}throw Error("Un-handled RelativePosition: "+b);} 
function Ui(a){return a.hasOwnProperty("google-ama-order-assurance")?a["google-ama-order-assurance"]:null}function Vi(a,b){return a&&b(a)?a:null};var Wi={rectangle:1,horizontal:2,vertical:4};var Xi={overlays:1,interstitials:2,vignettes:2,inserts:3,immersives:4,list_view:5,full_page:6,side_rails:7};function Yi(a){a=a.document;let b={};a&&(b=a.compatMode=="CSS1Compat"?a.documentElement:a.body);return b||{}}function V(a){return Yi(a).clientWidth??void 0};function Zi(a,b){do{const c=Ud(a,b);if(c&&c.position=="fixed")return!1}while(a=a.parentElement);return!0};function $i(a,b){var c=["width","height"];for(let e=0;e<c.length;e++){const f="google_ad_"+c[e];if(!b.hasOwnProperty(f)){var d=ae(a[c[e]]);d=d===null?null:Math.round(d);d!=null&&(b[f]=d)}}}function aj(a,b){return!((Zd.test(b.google_ad_width)||Yd.test(a.style.width))&&(Zd.test(b.google_ad_height)||Yd.test(a.style.height)))}function bj(a,b){return(a=cj(a,b))?a.y:0} 
function cj(a,b){try{const c=b.document.documentElement.getBoundingClientRect(),d=a.getBoundingClientRect();return{x:d.left-c.left,y:d.top-c.top}}catch(c){return null}} 
function dj(a,b,c,d,e){if(a!==a.top)return Rd(a)?3:16;if(!(V(a)<488))return 4;if(!(a.innerHeight>=a.innerWidth))return 5;const f=V(a);if(!f||(f-c)/f>d)a=6;else{if(c=e.google_full_width_responsive!=="true")a:{c=b.parentElement;for(b=V(a);c;c=c.parentElement)if((d=Ud(c,a))&&(e=ae(d.width))&&!(e>=b)&&d.overflow!=="visible"){c=!0;break a}c=!1}a=c?7:!0}return a} 
function ej(a,b,c,d){const e=dj(b,c,a,U(gi),d);e!==!0?a=e:d.google_full_width_responsive==="true"||Zi(c,b)?(b=V(b),a=b-a,a=b&&a>=0?!0:b?a<-10?11:a<0?14:12:10):a=9;return a}function fj(a,b,c){a=a.style;b==="rtl"?a.marginRight=c:a.marginLeft=c} 
function gj(a,b){if(b.nodeType===3)return/\S/.test(b.data);if(b.nodeType===1){if(/^(script|style)$/i.test(b.nodeName))return!1;let c;try{c=Ud(b,a)}catch(d){}return!c||c.display!=="none"&&!(c.position==="absolute"&&(c.visibility==="hidden"||c.visibility==="collapse"))}return!1}function hj(a,b,c){a=cj(b,a);return c==="rtl"?-a.x:a.x} 
function ij(a,b){var c;c=(c=b.parentElement)?(c=Ud(c,a))?c.direction:"":"";if(c){var d=b.style;d.border=d.borderStyle=d.outline=d.outlineStyle=d.transition="none";d.borderSpacing=d.padding="0";fj(b,c,"0px");d.width=`${V(a)}px`;if(hj(a,b,c)!==0){fj(b,c,"0px");var e=hj(a,b,c);fj(b,c,`${-1*e}px`);a=hj(a,b,c);a!==0&&a!==e&&fj(b,c,`${e/(a-e)*e}px`)}d.zIndex="30"}};function jj(a,b,c){let d;return a.style&&!!a.style[c]&&ae(a.style[c])||(d=Ud(a,b))&&!!d[c]&&ae(d[c])||null}function kj(a,b){const c=ye(a)===0;return b&&c?Math.max(250,2*Yi(a).clientHeight/3):250}function lj(a,b){let c;return a.style&&a.style.zIndex||(c=Ud(a,b))&&c.zIndex||null}function mj(a){return b=>b.g<=a}function nj(a,b,c,d){const e=a&&oj(c,b),f=kj(b,d);return g=>!(e&&g.height()>=f)}function pj(a){return b=>b.height()<=a}function oj(a,b){return bj(a,b)<Yi(b).clientHeight-100} 
function qj(a,b){var c=jj(b,a,"height");if(c)return c;var d=b.style.height;b.style.height="inherit";c=jj(b,a,"height");b.style.height=d;if(c)return c;c=Infinity;do(d=b.style&&ae(b.style.height))&&(c=Math.min(c,d)),(d=jj(b,a,"maxHeight"))&&(c=Math.min(c,d));while(b.parentElement&&(b=b.parentElement)&&b.tagName!=="HTML");return c};var rj={google_ad_channel:!0,google_ad_client:!0,google_ad_host:!0,google_ad_host_channel:!0,google_adtest:!0,google_tag_for_child_directed_treatment:!0,google_tag_for_under_age_of_consent:!0,google_tag_partner:!0,google_restrict_data_processing:!0,google_page_url:!0,google_debug_params:!0,google_adbreak_test:!0,google_ad_frequency_hint:!0,google_admob_interstitial_slot:!0,google_admob_rewarded_slot:!0,google_admob_ads_only:!0,google_ad_start_delay_hint:!0,google_max_ad_content_rating:!0,google_traffic_source:!0, 
google_overlays:!0,google_privacy_treatments:!0,google_special_category_data:!0,google_ad_intent_query:!0,google_ad_intent_qetid:!0,google_ad_intent_eids:!0};const sj=RegExp("(^| )adsbygoogle($| )");function tj(a,b){for(let c=0;c<b.length;c++){const d=b[c],e=Jd(d.property);a[e]=d.value}};var uj=class extends M{g(){return Xc(this,23)}};var vj=class extends M{g(){return Wc(this,1)??void 0}};var wj=class extends M{};var xj=class extends M{};var yj=class extends M{};var zj=class extends M{};var Aj=class extends M{getName(){return G(this,4)}},Bj=[1,2,3];var Cj=class extends M{};var Dj=class extends M{};var Fj=class extends M{g(){return fd(this,Dj,2,Ej)}},Ej=[1,2];var Gj=class extends M{g(){return E(this,Fj,3)}};var Hj=class extends M{},Ij=md(Hj);function Jj(a){const b=[];ph(a.getElementsByTagName("p"),function(c){Kj(c)>=100&&b.push(c)});return b}function Kj(a){if(a.nodeType==3)return a.length;if(a.nodeType!=1||a.tagName=="SCRIPT")return 0;let b=0;ph(a.childNodes,function(c){b+=Kj(c)});return b}function Lj(a){return a.length==0||isNaN(a[0])?a:"\\"+(30+parseInt(a[0],10))+" "+a.substring(1)} 
function Mj(a,b){if(a.g==null)return b;switch(a.g){case 1:return b.slice(1);case 2:return b.slice(0,b.length-1);case 3:return b.slice(1,b.length-1);case 0:return b;default:throw Error("Unknown ignore mode: "+a.g);}} 
function Nj(a,b){var c=[];try{c=b.querySelectorAll(a.l)}catch(d){}if(!c.length)return[];b=u(c);b=Mj(a,b);typeof a.i==="number"&&(c=a.i,c<0&&(c+=b.length),b=c>=0&&c<b.length?[b[c]]:[]);if(typeof a.j==="number"){c=[];for(let d=0;d<b.length;d++){const e=Jj(b[d]);let f=a.j;f<0&&(f+=e.length);f>=0&&f<e.length&&c.push(e[f])}b=c}return b} 
var Oj=class{constructor(a,b,c,d){this.l=a;this.i=b;this.j=c;this.g=d}toString(){return JSON.stringify({nativeQuery:this.l,occurrenceIndex:this.i,paragraphIndex:this.j,ignoreMode:this.g})}};var Pj=class{constructor(){this.g=Nd`https://pagead2.googlesyndication.com/pagead/js/err_rep.js`}G(a,b,c=.01,d="jserror"){if(Math.random()>c)return!1;Ce(b)||(b=new Ae(b,{context:a,id:d}));p.google_js_errors=p.google_js_errors||[];p.google_js_errors.push(b);p.error_rep_loaded||(Sd(p.document,this.g),p.error_rep_loaded=!0);return!1}Z(a,b){try{return b()}catch(c){if(!this.G(a,c,.01,"jserror"))throw c;}}na(a,b){return(...c)=>this.Z(a,()=>b.apply(void 0,c))}ea(a,b){b.catch(c=>{c=c?c:"unknown rejection"; 
this.G(a,c instanceof Error?c:Error(c),void 0)})}};function Qj(a,b){b=b.google_js_reporting_queue=b.google_js_reporting_queue||[];b.length<2048&&b.push(a)} 
function Rj(a,b,c,d,e=!1){const f=d||window,g=typeof queueMicrotask!=="undefined";return function(...h){e&&g&&queueMicrotask(()=>{f.google_rum_task_id_counter=f.google_rum_task_id_counter||1;f.google_rum_task_id_counter+=1});const k=Le();let l,n=3;try{l=b.apply(this,h)}catch(m){n=13;if(!c)throw m;c(a,m)}finally{f.google_measure_js_timing&&k&&Qj({label:a.toString(),value:k,duration:(Le()||0)-k,type:n,...(e&&g&&{taskId:f.google_rum_task_id_counter=f.google_rum_task_id_counter||1})},f)}return l}} 
function Sj(a,b){return Rj(a,b,(c,d)=>{(new Pj).G(c,d)},void 0,!1)};function Tj(a,b,c){return Rj(a,b,void 0,c,!0).apply()}function Uj(a){if(!a)return null;var b=G(a,7);if(G(a,1)||a.getId()||cd(a,4).length>0){var c=a.getId(),d=G(a,1),e=cd(a,4);b=Yc(a,2);var f=Yc(a,5);a=Vj(H(a,6));let g="";d&&(g+=d);c&&(g+="#"+Lj(c));if(e)for(c=0;c<e.length;c++)g+="."+Lj(e[c]);b=(e=g)?new Oj(e,b,f,a):null}else b=b?new Oj(b,Yc(a,2),Yc(a,5),Vj(H(a,6))):null;return b}const Wj={1:1,2:2,3:3,0:0};function Vj(a){return a==null?a:Wj[a]}const Xj={1:0,2:1,3:2,4:3}; 
function Yj(a){return a.google_ama_state=a.google_ama_state||{}}function Zj(a){a=Yj(a);return a.optimization=a.optimization||{}};var ak=a=>{switch(H(a,8)){case 1:case 2:if(a==null)var b=null;else b=E(a,Bh,1),b==null?b=null:(a=H(a,2),b=a==null?null:new Ch({ob:[b],Hb:a}));return b!=null?sh(b):uh(Error("Missing dimension when creating placement id"));case 3:return uh(Error("Missing dimension when creating placement id"));default:return uh(Error("Invalid type: "+H(a,8)))}};var bk=(a,b)=>{const c=[];let d=a;for(a=()=>{c.push({anchor:d.anchor,position:d.position});return d.anchor==b.anchor&&d.position==b.position};d;){switch(d.position){case 1:if(a())return c;d.position=2;case 2:if(a())return c;if(d.anchor.firstChild){d={anchor:d.anchor.firstChild,position:1};continue}else d.position=3;case 3:if(a())return c;d.position=4;case 4:if(a())return c}for(;d&&!d.anchor.nextSibling&&d.anchor.parentNode!=d.anchor.ownerDocument.body;){d={anchor:d.anchor.parentNode,position:3};if(a())return c; 
d.position=4;if(a())return c}d&&d.anchor.nextSibling?d={anchor:d.anchor.nextSibling,position:1}:d=null}return c};function ck(a,b){const c=new Ah,d=new zh;b.forEach(e=>{if(fd(e,yj,1,Bj)){e=fd(e,yj,1,Bj);if(E(e,Nh,1)&&E(E(e,Nh,1),Bh,1)&&E(e,Nh,2)&&E(E(e,Nh,2),Bh,1)){const g=dk(a,E(E(e,Nh,1),Bh,1)),h=dk(a,E(E(e,Nh,2),Bh,1));if(g&&h)for(var f of bk({anchor:g,position:H(E(e,Nh,1),2)},{anchor:h,position:H(E(e,Nh,2),2)}))c.set(ka(f.anchor),f.position)}E(e,Nh,3)&&E(E(e,Nh,3),Bh,1)&&(f=dk(a,E(E(e,Nh,3),Bh,1)))&&c.set(ka(f),H(E(e,Nh,3),2))}else fd(e,zj,2,Bj)?ek(a,fd(e,zj,2,Bj),c):fd(e,xj,3,Bj)&&fk(a,fd(e,xj,3,Bj),d)}); 
return new gk(c,d)}var gk=class{constructor(a,b){this.i=a;this.g=b}};const ek=(a,b,c)=>{E(b,Nh,2)?(b=E(b,Nh,2),(a=dk(a,E(b,Bh,1)))&&c.set(ka(a),H(b,2))):E(b,Bh,1)&&(a=hk(a,E(b,Bh,1)))&&a.forEach(d=>{d=ka(d);c.set(d,1);c.set(d,4);c.set(d,2);c.set(d,3)})},fk=(a,b,c)=>{E(b,Bh,1)&&(a=hk(a,E(b,Bh,1)))&&a.forEach(d=>{c.add(ka(d))})},dk=(a,b)=>(a=hk(a,b))&&a.length>0?a[0]:null,hk=(a,b)=>(b=Uj(b))?Nj(b,a):null;function gg(){return"m202502110101"};var ik=ld(dg);var fg=ld(hg);function jk(a,b){return b(a)?a:void 0} 
function kk(a,b,c,d,e){c=c instanceof Ae?c.error:c;var f=new kg;const g=new jg;try{var h=je(window);gd(g,1,h)}catch(r){}try{var k=N(bh).g();Kc(g,2,k,Zb)}catch(r){}try{jd(g,3,window.document.URL)}catch(r){}h=Sc(f,2,g);k=new ig;b=D(k,1,y(b),0);try{var l=Bb(c?.name)?c.name:"Unknown error";jd(b,2,l)}catch(r){}try{var n=Bb(c?.message)?c.message:`Caught ${c}`;jd(b,3,n)}catch(r){}try{var m=Bb(c?.stack)?c.stack:Error().stack;m&&Kc(b,4,m.split(/\n\s*/),hc)}catch(r){}l=Tc(h,1,lg,b);if(e){n=0;switch(e.errSrc){case "LCC":n= 
1;break;case "PVC":n=2}m=eg();b=jk(e.shv,Bb);m=jd(m,2,b);n=D(m,6,y(n),0);m=ik();m=xc(m);b=jk(e.es,Eb());m=Kc(m,1,b,Zb);m=yc(m);n=Sc(n,4,m);m=jk(e.client,Bb);n=id(n,3,m);m=jk(e.slotname,Bb);n=jd(n,7,m);e=jk(e.tag_origin,Bb);e=jd(n,8,e);e=yc(e)}else e=yc(eg());e=Tc(l,6,mg,e);d=gd(e,5,d??1);og(a,d)};let lk,mk=64;function nk(){try{return lk??(lk=new Uint32Array(64)),mk>=64&&(crypto.getRandomValues(lk),mk=0),lk[mk++]}catch(a){return Math.floor(Math.random()*2**32)}};var pk=class{constructor(){this.g=ok}};function ok(){return{Fb:nk()+(nk()&2**21-1)*2**32,vb:Number.MAX_SAFE_INTEGER}};var rk=class{constructor(a=!1){this.A=qk;this.l=a;this.g=null;this.i=this.G}fb(a){this.i=a}Ca(a){this.g=a}j(){}Z(a,b,c){let d;try{d=b()}catch(e){b=this.l;try{b=this.i(a,De(e),void 0,c)}catch(f){this.G(217,f)}if(b)window.console?.error?.(e);else throw e;}return d}na(a,b){return(...c)=>this.Z(a,()=>b.apply(void 0,c))}ea(a,b){b.catch(c=>{c=c?c:"unknown rejection";this.G(a,c instanceof Error?c:Error(c),void 0,void 0)})}G(a,b,c,d){try{c=c===void 0?100:c===0?0:1/c;var e=(new pk).g();if(c>0&&e.Fb*c<=e.vb){var f= 
this.A;e={};if(this.g)try{this.g(e)}catch(g){}if(d)try{d(e)}catch(g){}kk(f,a,b,c,e)}}catch(g){}return this.l}};var W=class extends Error{constructor(a=""){super();this.name="TagError";this.message=a?"adsbygoogle.push() error: "+a:"";Error.captureStackTrace?Error.captureStackTrace(this,W):this.stack=Error().stack||""}};let qk,sk,tk,uk;const vk=new Se(p);function wk(a){a!=null&&(p.google_measure_js_timing=a);p.google_measure_js_timing||Re(vk)}(function(a,b,c=!0){typeof p.google_srt!=="number"&&(p.google_srt=Math.random());sk=a||new dh;ch(sk,p.google_srt);tk=new $e(sk,c,vk);tk.j(!0);qk=b||new xg(2,gg(),1E3);uk=new rk(c);p.document.readyState==="complete"?wk():vk.g&&sd(p,"load",()=>{wk()})})();function xk(a,b,c){return T(bi)?uk.Z(a,b,c):tk.Z(a,b,c)}function yk(a,b){return T(bi)?uk.na(a,b):tk.na(a,b)} 
function zk(a,b){T(bi)?uk.ea(a,b):tk.ea(a,b)}function Ak(a,b,c=.01){const d=N(bh).g();!b.eid&&d.length&&(b.eid=d.toString());Ze(sk,a,b,!0,c)}function Bk(a,b,c=.01,d,e){return T(bi)?uk.G(a,b,c,d,e):tk.G(a,b,c,d,e)}function Ck(a,b,c=.01,d,e){return(Ce(b)?b.msg||Ee(b.error):Ee(b)).indexOf("TagError")===0?((Ce(b)?b.error:b).pbr=!0,!1):Bk(a,b,c,d,e)};var Dk=class{constructor(){this.g=ie();this.i=0}};function Ek(a,b,c){switch(c){case 2:case 3:break;case 1:case 4:b=b.parentElement;break;default:throw Error("Unknown RelativePosition: "+c);}for(c=[];b;){if(Fk(b))return!0;if(a.g.has(b))break;c.push(b);b=b.parentElement}c.forEach(d=>a.g.add(d));return!1}function Gk(a){a=Hk(a);return a.has("all")||a.has("after")}function Ik(a){a=Hk(a);return a.has("all")||a.has("before")}function Hk(a){return(a=a&&a.getAttribute("data-no-auto-ads"))?new Set(a.split("|")):new Set} 
function Fk(a){const b=Hk(a);return a&&(a.tagName==="AUTO-ADS-EXCLUSION-AREA"||b.has("inside")||b.has("all"))}var Jk=class{constructor(){this.g=new Set;this.i=new Dk}};function Kk(a,b){if(!a)return!1;a=Ud(a,b);if(!a)return!1;a=a.cssFloat||a.styleFloat;return a=="left"||a=="right"}function Lk(a){for(a=a.previousSibling;a&&a.nodeType!=1;)a=a.previousSibling;return a?a:null}function Mk(a){return!!a.nextSibling||!!a.parentNode&&Mk(a.parentNode)};function Ok(a=null){({googletag:a}=a??window);return a?.apiReady?a:void 0};var Uk=a=>({hc:u(a.document.querySelectorAll("ins.adsbygoogle-ablated-ad-slot")),jc:u(a.document.querySelectorAll("body ins.adsbygoogle")),lb:Pk(a),mb:u(a.document.querySelectorAll(".google-auto-placed")),nb:u(a.document.querySelectorAll("ins.adsbygoogle[data-anchor-status]")),wb:Qk(a),nc:Rk(a),xc:Sk(a),Eb:Tk(a),mc:u(a.document.querySelectorAll("div.googlepublisherpluginad")),Ob:u(a.document.querySelectorAll("html > ins.adsbygoogle"))}); 
const Rk=a=>Vk(a)||u(a.document.querySelectorAll("div[id^=div-gpt-ad]")),Vk=a=>{const b=Ok(a);return b?Ma(Na(b.pubads().getSlots(),c=>a.document.getElementById(c.getSlotElementId())),c=>c!=null):null},Pk=a=>u(a.document.querySelectorAll("iframe[id^=aswift_],iframe[id^=google_ads_frame]")),Sk=a=>u(a.document.querySelectorAll("ins.adsbygoogle[data-ad-format=autorelaxed]")),Qk=a=>Rk(a).concat(u(a.document.querySelectorAll("iframe[id^=google_ads_iframe]"))),Tk=a=>u(a.document.querySelectorAll("div.trc_related_container,div.OUTBRAIN,div[id^=rcjsload],div[id^=ligatusframe],div[id^=crt-],iframe[id^=cto_iframe],div[id^=yandex_], div[id^=Ya_sync],iframe[src*=adnxs],div.advertisement--appnexus,div[id^=apn-ad],div[id^=amzn-native-ad],iframe[src*=amazon-adsystem],iframe[id^=ox_],iframe[src*=openx],img[src*=openx],div[class*=adtech],div[id^=adtech],iframe[src*=adtech],div[data-content-ad-placement=true],div.wpcnt div[id^=atatags-]")); 
var Wk=a=>{const b=[];for(const c of a){a=!0;for(let d=0;d<b.length;d++){const e=b[d];if(e.contains(c)){a=!1;break}if(c.contains(e)){a=!1;b[d]=c;break}}a&&b.push(c)}return b};function Xk(a,b){if(a.l)return!0;a.l=!0;const c=F(a.j,Ph,1,C());a.i=0;const d=Yk(a.I);var e=a.g;var f;try{var g=(f=e.localStorage.getItem("google_ama_settings"))?Mh(f):null}catch(r){g=null}f=g!==null&&I(g,2,!1);g=Yj(e);f&&(g.eatf=!0,re(7,[!0,0,!1]));b:{var h={zb:!1,Ab:!1},k=u(e.document.querySelectorAll(".google-auto-placed")),l=u(e.document.querySelectorAll("ins.adsbygoogle[data-anchor-status]")),n=Sk(e);const r=Qk(e),x=Tk(e),t=u(e.document.querySelectorAll("ins.adsbygoogle-ablated-ad-slot")),v= 
u(e.document.querySelectorAll("div.googlepublisherpluginad")),J=u(e.document.querySelectorAll("html > ins.adsbygoogle"));let P=[].concat(Pk(e),u(e.document.querySelectorAll("body ins.adsbygoogle")));f=[];for(const [$c,ic]of[[h.qc,k],[h.zb,l],[h.tc,n],[h.rc,r],[h.uc,x],[h.oc,t],[h.sc,v],[h.Ab,J]])$c===!1?f=f.concat(ic):P=P.concat(ic);h=Wk(P);f=Wk(f);h=h.slice(0);for(m of f)for(f=0;f<h.length;f++)(m.contains(h[f])||h[f].contains(m))&&h.splice(f,1);var m=h;e=Yi(e).clientHeight;for(f=0;f<m.length;f++)if(!(m[f].getBoundingClientRect().top> 
e)){e=!0;break b}e=!1}e=e?g.eatfAbg=!0:!1;if(e)return!0;e=new zh([2]);for(g=0;g<c.length;g++){m=a;l=c[g];f=g;h=b;if(E(l,Gh,4)&&e.contains(H(E(l,Gh,4),1))&&H(l,8)===1&&Zk(l,d)){m.i++;if(h=$k(m,l,h,d))k=Yj(m.g),k.numAutoAdsPlaced||(k.numAutoAdsPlaced=0),(n=!E(l,Bh,1))||(l=E(l,Bh,1),n=(Yc(l,5)??void 0)==null),n||(k.numPostPlacementsPlaced?k.numPostPlacementsPlaced++:k.numPostPlacementsPlaced=1),k.placed==null&&(k.placed=[]),k.numAutoAdsPlaced++,k.placed.push({index:f,element:h.fa}),re(7,[!1,m.i,!0]); 
m=h}else m=null;if(m)return!0}re(7,[!1,a.i,!1]);return!1} 
function $k(a,b,c,d){if(!Zk(b,d)||(H(b,8)??void 0)!=1)return null;d=E(b,Bh,1);if(!d)return null;d=Uj(d);if(!d)return null;d=Nj(d,a.g.document);if(d.length==0)return null;d=d[0];var e=H(b,2);e=Xj[e];e=e===void 0?null:e;var f;if(!(f=e==null)){a:{f=a.g;switch(e){case 0:f=Kk(Lk(d),f);break a;case 3:f=Kk(d,f);break a;case 2:var g=d.lastChild;f=Kk(g?g.nodeType==1?g:Lk(g):null,f);break a}f=!1}if(c=!f&&!(!c&&e==2&&!Mk(d)))c=e==1||e==2?d:d.parentNode,c=!(c&&!Sh(c)&&c.offsetWidth<=0);f=!c}if(!(c=f)){c=a.B; 
f=H(b,2);g=c.i;var h=ka(d);g=g.g.get(h);if(!(g=g?g.contains(f):!1))a:{if(c.g.contains(ka(d)))switch(f){case 2:case 3:g=!0;break a;default:g=!1;break a}for(f=d.parentElement;f;){if(c.g.contains(ka(f))){g=!0;break a}f=f.parentElement}g=!1}c=g}if(!c){c=a.F;g=H(b,2);a:switch(g){case 1:f=Gk(d.previousElementSibling)||Ik(d);break a;case 4:f=Gk(d)||Ik(d.nextElementSibling);break a;case 2:f=Ik(d.firstElementChild);break a;case 3:f=Gk(d.lastElementChild);break a;default:throw Error("Unknown RelativePosition: "+ 
g);}g=Ek(c,d,g);c=c.i;Ak("ama_exclusion_zone",{typ:f?g?"siuex":"siex":g?"suex":"noex",cor:c.g,num:c.i++,dvc:be()},.1);c=f||g}if(c)return null;f=E(b,Oh,3);c={};f&&(c.ib=G(f,1),c.Sa=G(f,2),c.tb=!!Xc(f,3));f=E(b,Gh,4)&&H(E(b,Gh,4),2)?H(E(b,Gh,4),2):null;f=Jh(f);g=Yc(b,12)!=null?Yc(b,12):null;g=g==null?null:new Ih(null,{google_ml_rank:g});b=al(a,b);b=Hh(a.A,f,g,b);f=a.g;a=a.P;h=f.document;var k=c.tb||!1;g=ve((new we(h)).g,"DIV");const l=g.style;l.width="100%";l.height="auto";l.clear=k?"both":"none";k= 
g.style;k.textAlign="center";c.Gb&&tj(k,c.Gb);h=ve((new we(h)).g,"INS");k=h.style;k.display="block";k.margin="auto";k.backgroundColor="transparent";c.ib&&(k.marginTop=c.ib);c.Sa&&(k.marginBottom=c.Sa);c.kb&&tj(k,c.kb);g.appendChild(h);c={wa:g,fa:h};c.fa.setAttribute("data-ad-format","auto");g=[];if(h=b&&b.Ua)c.wa.className=h.join(" ");h=c.fa;h.className="adsbygoogle";h.setAttribute("data-ad-client",a);g.length&&h.setAttribute("data-ad-channel",g.join("+"));a:{try{var n=c.wa;if(T(ni)){{const v=Ti(d, 
e);if(v.init){var m=v.init;for(d=m;d=v.ha(d);)m=d;var r={anchor:m,position:v.ma}}else r={anchor:d,position:e}}n["google-ama-order-assurance"]=0;Th(n,r.anchor,r.position)}else Th(n,d,e);b:{var x=c.fa;x.dataset.adsbygoogleStatus="reserved";x.className+=" adsbygoogle-noablate";n={element:x};var t=b&&b.eb;if(x.hasAttribute("data-pub-vars")){try{t=JSON.parse(x.getAttribute("data-pub-vars"))}catch(v){break b}x.removeAttribute("data-pub-vars")}t&&(n.params=t);(f.adsbygoogle=f.adsbygoogle||[]).push(n)}}catch(v){(x= 
c.wa)&&x.parentNode&&(t=x.parentNode,t.removeChild(x),Sh(t)&&(t.style.display=t.getAttribute("data-init-display")||"none"));x=!1;break a}x=!0}return x?c:null}function al(a,b){return wh(yh(ak(b).map(Kh),c=>{Yj(a.g).exception=c}))}var bl=class{constructor(a,b,c,d,e){this.g=a;this.P=b;this.j=c;this.A=e||null;(this.I=d)?(a=a.document,d=F(d,Aj,5,C()),d=ck(a,d)):d=ck(a.document,[]);this.B=d;this.F=new Jk;this.i=0;this.l=!1}};function Yk(a){const b={};a&&dd(a,6).forEach(c=>{b[c]=!0});return b} 
function Zk(a,b){return a&&Cc(a,Gh,4)&&b[H(E(a,Gh,4),2)]?!1:!0};var cl=md(class extends M{});function dl(a){try{var b=a.localStorage.getItem("google_auto_fc_cmp_setting")||null}catch(d){b=null}const c=b;return c?vh(()=>cl(c)):sh(null)};function el(){if(fl)return fl;var a=ue()||window;const b=a.google_persistent_state_async;return b!=null&&typeof b=="object"&&b.S!=null&&typeof b.S=="object"?fl=b:a.google_persistent_state_async=fl=new gl}function hl(a){return il[a]||`google_ps_${a}`}function jl(a,b,c){b=hl(b);a=a.S;const d=a[b];return d===void 0?(a[b]=c(),a[b]):d}function kl(a,b,c){return jl(a,b,()=>c)}var gl=class{constructor(){this.S={}}},fl=null;const il={[8]:"google_prev_ad_formats_by_region",[9]:"google_prev_ad_slotnames_by_region"};function ll(a){this.g=a||{cookie:""}} 
ll.prototype.set=function(a,b,c){let d,e,f,g=!1,h;typeof c==="object"&&(h=c.yc,g=c.zc||!1,f=c.domain||void 0,e=c.path||void 0,d=c.Cb);if(/[;=\s]/.test(a))throw Error('Invalid cookie name "'+a+'"');if(/[;\r\n]/.test(b))throw Error('Invalid cookie value "'+b+'"');d===void 0&&(d=-1);this.g.cookie=a+"="+b+(f?";domain="+f:"")+(e?";path="+e:"")+(d<0?"":d==0?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(Date.now()+d*1E3)).toUTCString())+(g?";secure":"")+(h!=null?";samesite="+h:"")}; 
ll.prototype.get=function(a,b){const c=a+"=",d=(this.g.cookie||"").split(";");for(let e=0,f;e<d.length;e++){f=ta(d[e]);if(f.lastIndexOf(c,0)==0)return f.slice(c.length);if(f==a)return""}return b};ll.prototype.isEmpty=function(){return!this.g.cookie}; 
ll.prototype.clear=function(){var a=(this.g.cookie||"").split(";");const b=[];var c=[];let d,e;for(let f=0;f<a.length;f++)e=ta(a[f]),d=e.indexOf("="),d==-1?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));for(c=b.length-1;c>=0;c--)a=b[c],this.get(a),this.set(a,"",{Cb:0,path:void 0,domain:void 0})};function ml(a,b=window){if(I(a,5))try{return b.localStorage}catch{}return null};function nl(a){var b=new ol;return A(b,5,Ub(a))}var ol=class extends M{};function pl(){this.A=this.A;this.i=this.i}pl.prototype.A=!1;pl.prototype.dispose=function(){this.A||(this.A=!0,this.F())};pl.prototype[fa(Symbol,"dispose")]=function(){this.dispose()};function ql(a,b){a.A?b():(a.i||(a.i=[]),a.i.push(b))}pl.prototype.F=function(){if(this.i)for(;this.i.length;)this.i.shift()()};function rl(a){a.addtlConsent!==void 0&&typeof a.addtlConsent!=="string"&&(a.addtlConsent=void 0);a.gdprApplies!==void 0&&typeof a.gdprApplies!=="boolean"&&(a.gdprApplies=void 0);return a.tcString!==void 0&&typeof a.tcString!=="string"||a.listenerId!==void 0&&typeof a.listenerId!=="number"?2:a.cmpStatus&&a.cmpStatus!=="error"?0:3} 
function sl(a){if(a.gdprApplies===!1)return!0;a.internalErrorState===void 0&&(a.internalErrorState=rl(a));return a.cmpStatus==="error"||a.internalErrorState!==0?a.internalBlockOnErrors?(pe({e:String(a.internalErrorState)},"tcfe"),!1):!0:a.cmpStatus!=="loaded"||a.eventStatus!=="tcloaded"&&a.eventStatus!=="useractioncomplete"?!1:!0} 
function tl(a){if(a.g)return a.g;a:{let d=a.j;for(let e=0;e<50;++e){try{var b=!(!d.frames||!d.frames.__tcfapiLocator)}catch{b=!1}if(b){b=d;break a}b:{try{const f=d.parent;if(f&&f!=d){var c=f;break b}}catch{}c=null}if(!(d=c))break}b=null}a.g=b;return a.g}function ul(a,b,c,d){c||(c=()=>{});var e=a.j;typeof e.__tcfapi==="function"?(a=e.__tcfapi,a(b,2,c,d)):tl(a)?(vl(a),e=++a.ba,a.B[e]=c,a.g&&a.g.postMessage({__tcfapiCall:{command:b,version:2,callId:e,parameter:d}},"*")):c({},!1)} 
function vl(a){if(!a.l){var b=c=>{try{var d=(typeof c.data==="string"?JSON.parse(c.data):c.data).__tcfapiReturn;a.B[d.callId](d.returnValue,d.success)}catch(e){}};a.l=b;sd(a.j,"message",b)}} 
var wl=class extends pl{constructor(a){var b={};super();this.g=null;this.B={};this.ba=0;this.l=null;this.j=a;this.P=b.hb??500;this.I=b.kc??!1}F(){this.B={};this.l&&(td(this.j,"message",this.l),delete this.l);delete this.B;delete this.j;delete this.g;super.F()}addEventListener(a){let b={internalBlockOnErrors:this.I};const c=rd(()=>a(b));let d=0;this.P!==-1&&(d=setTimeout(()=>{b.tcString="tcunavailable";b.internalErrorState=1;c()},this.P));const e=(f,g)=>{clearTimeout(d);f?(b=f,b.internalErrorState= 
rl(b),b.internalBlockOnErrors=this.I,g&&b.internalErrorState===0||(b.tcString="tcunavailable",g||(b.internalErrorState=3))):(b.tcString="tcunavailable",b.internalErrorState=3);a(b)};try{ul(this,"addEventListener",e)}catch(f){b.tcString="tcunavailable",b.internalErrorState=3,d&&(clearTimeout(d),d=0),c()}}removeEventListener(a){a&&a.listenerId&&ul(this,"removeEventListener",null,a.listenerId)}};var Bl=({u:a,Y:b,hb:c,rb:d,ia:e=!1,ja:f=!1})=>{b=xl({u:a,Y:b,ia:e,ja:f});b.g!=null||b.i.message!="tcunav"?d(b):yl(a,c).then(g=>g.map(zl)).then(g=>g.map(h=>Al(a,h))).then(d)},xl=({u:a,Y:b,ia:c=!1,ja:d=!1})=>{if(!Cl({u:a,Y:b,ia:c,ja:d}))return Al(a,nl(!0));b=el();return(b=kl(b,24))?Al(a,zl(b)):uh(Error("tcunav"))}; 
function Cl({u:a,Y:b,ia:c,ja:d}){if(d=!d)d=new wl(a),d=typeof d.j.__tcfapi==="function"||tl(d)!=null;if(!d){if(c=!c){if(b){a=dl(a);if(a.g!=null)if((a=a.getValue())&&H(a,1)!=null)b:switch(a=L(a,1),a){case 1:a=!0;break b;default:throw Error("Unhandled AutoGdprFeatureStatus: "+a);}else a=!1;else Bk(806,a.i),a=!1;b=!a}c=b}d=c}return d?!0:!1}function yl(a,b){return Promise.race([Dl(),El(a,b)])} 
function Dl(){return(new Promise(a=>{var b=el();a={resolve:a};const c=kl(b,25,[]);c.push(a);b.S[hl(25)]=c})).then(Fl)}function El(a,b){return new Promise(c=>{a.setTimeout(c,b,uh(Error("tcto")))})}function Fl(a){return a?sh(a):uh(Error("tcnull"))} 
function zl(a){var b={};if(sl(a))if(a.gdprApplies===!1)a=!0;else if(a.tcString==="tcunavailable")a=!b.Wa;else if((b.Wa||a.gdprApplies!==void 0||b.lc)&&(b.Wa||typeof a.tcString==="string"&&a.tcString.length)){b:{if(a.publisher&&a.publisher.restrictions&&(b=a.publisher.restrictions["1"],b!==void 0)){b=b["755"];break b}b=void 0}b===0?a=!1:a.purpose&&a.vendor?(b=a.vendor.consents,(b=!(!b||!b["755"]))&&a.purposeOneTreatment&&a.publisherCC==="CH"?a=!0:(b&&(a=a.purpose.consents,b=!(!a||!a["1"])),a=b)):a= 
!0}else a=!0;else a=!1;return nl(a)}function Al(a,b){return(a=ml(b,a))?sh(a):uh(Error("unav"))};var Gl=class extends M{};var Hl=class extends M{};var Il=class extends M{g(){return E(this,Gl,2)}i(){return E(this,Hl,3)}};var Jl=class{constructor(a){this.exception=a}};function Kl(a,b){try{var c=a.i,d=c.resolve,e=a.g;Yj(e.g);F(e.j,Ph,1,C());d.call(c,new Jl(b))}catch(f){a.i.reject(f)}}var Ll=class{constructor(a,b,c){this.j=a;this.g=b;this.i=c}start(){this.l()}l(){try{switch(this.j.document.readyState){case "complete":case "interactive":Xk(this.g,!0);Kl(this);break;default:Xk(this.g,!1)?Kl(this):this.j.setTimeout(pa(this.l,this),100)}}catch(a){Kl(this,a)}}};var Ml=class extends M{getVersion(){return ad(this,2)}};function Nl(a){return Ua(a.length%4!==0?a+"A":a).map(b=>b.toString(2).padStart(8,"0")).join("")}function Ol(a){if(!/^[0-1]+$/.test(a))throw Error(`Invalid input [${a}] not a bit string.`);return parseInt(a,2)}function Pl(a){if(!/^[0-1]+$/.test(a))throw Error(`Invalid input [${a}] not a bit string.`);const b=[1,2,3,5];let c=0;for(let d=0;d<a.length-1;d++)b.length<=d&&b.push(b[d-1]+b[d-2]),c+=parseInt(a[d],2)*b[d];return c};function Ql(a){var b=Nl(a),c=Ol(b.slice(0,6));a=Ol(b.slice(6,12));var d=new Ml;c=D(d,1,z(c),0);a=D(c,2,z(a),0);b=b.slice(12);c=Ol(b.slice(0,12));d=[];let e=b.slice(12).replace(/0+$/,"");for(let k=0;k<c;k++){if(e.length===0)throw Error(`Found ${k} of ${c} sections [${d}] but reached end of input [${b}]`);var f=Ol(e[0])===0;e=e.slice(1);var g=Rl(e,b),h=d.length===0?0:d[d.length-1];h=Pl(g)+h;e=e.slice(g.length);if(f)d.push(h);else{f=Rl(e,b);g=Pl(f);for(let l=0;l<=g;l++)d.push(h+l);e=e.slice(f.length)}}if(e.length> 
0)throw Error(`Found ${c} sections [${d}] but has remaining input [${e}], entire input [${b}]`);return Kc(a,3,d,Zb)}function Rl(a,b){const c=a.indexOf("11");if(c===-1)throw Error(`Expected section bitstring but not found in [${a}] part of [${b}]`);return a.slice(0,c+2)};var Sl="a".charCodeAt(),Tl=yd(ih),Ul=yd(jh);function Vl(){var a=new Wl;return gd(a,1,0)}function Xl(a){var b=Number;{var c=Ac(a,1);const d=typeof c;c=c==null?c:d==="bigint"?String(Qb(64,c)):Wb(c)?d==="string"?cc(c):fc(c):void 0}b=b(c??"0");a=ad(a,2);return new Date(b*1E3+a/1E6)}var Wl=class extends M{};function Yl(a,b){if(a.g+b>a.i.length)throw Error("Requested length "+b+" is past end of string.");const c=a.i.substring(a.g,a.g+b);a.g+=b;return parseInt(c,2)}function Zl(a){let b=Yl(a,12);const c=[];for(;b--;){var d=!!Yl(a,1)===!0,e=Yl(a,16);if(d)for(d=Yl(a,16);e<=d;e++)c.push(e);else c.push(e)}c.sort((f,g)=>f-g);return c}function $l(a,b,c){const d=[];for(let e=0;e<b;e++)if(Yl(a,1)){const f=e+1;if(c&&c.indexOf(f)===-1)throw Error(`ID: ${f} is outside of allowed values!`);d.push(f)}return d} 
function am(a){const b=Yl(a,16);return!!Yl(a,1)===!0?(a=Zl(a),a.forEach(c=>{if(c>b)throw Error(`ID ${c} is past MaxVendorId ${b}!`);}),a):$l(a,b)}var bm=class{constructor(a){if(/[^01]/.test(a))throw Error(`Input bitstring ${a} is malformed!`);this.i=a;this.g=0}skip(a){this.g+=a}};var dm=(a,b)=>{try{var c=Ua(a.split(".")[0]).map(e=>e.toString(2).padStart(8,"0")).join("");const d=new bm(c);c={};c.tcString=a;c.gdprApplies=b;d.skip(78);c.cmpId=Yl(d,12);c.cmpVersion=Yl(d,12);d.skip(30);c.tcfPolicyVersion=Yl(d,6);c.isServiceSpecific=!!Yl(d,1);c.useNonStandardStacks=!!Yl(d,1);c.specialFeatureOptins=cm($l(d,12,Ul),Ul);c.purpose={consents:cm($l(d,24,Tl),Tl),legitimateInterests:cm($l(d,24,Tl),Tl)};c.purposeOneTreatment=!!Yl(d,1);c.publisherCC=String.fromCharCode(Sl+Yl(d,6))+String.fromCharCode(Sl+ 
Yl(d,6));c.vendor={consents:cm(am(d),null),legitimateInterests:cm(am(d),null)};return c}catch(d){return null}};const cm=(a,b)=>{const c={};if(Array.isArray(b)&&b.length!==0)for(const d of b)c[d]=a.indexOf(d)!==-1;else for(const d of a)c[d]=!0;delete c[0];return c};var em=class extends M{g(){return G(this,2)!=null}};var fm=class extends M{g(){return G(this,2)!=null}};var gm=class extends M{};var hm=md(class extends M{});function im(a){a=jm(a);try{var b=a?hm(a):null}catch(c){b=null}return b?E(b,gm,4)||null:null}function jm(a){a=(new ll(a)).get("FCCDCF","");if(a)if(a.startsWith("%"))try{var b=decodeURIComponent(a)}catch(c){b=null}else b=a;else b=null;return b};yd(ih).map(a=>Number(a));yd(jh).map(a=>Number(a));function km(a){a.__tcfapiPostMessageReady||lm(new mm(a))} 
function lm(a){a.g=b=>{const c=typeof b.data==="string";let d;try{d=c?JSON.parse(b.data):b.data}catch(f){return}const e=d.__tcfapiCall;e&&(e.command==="ping"||e.command==="addEventListener"||e.command==="removeEventListener")&&(0,a.u.__tcfapi)(e.command,e.version,(f,g)=>{const h={};h.__tcfapiReturn=e.command==="removeEventListener"?{success:f,callId:e.callId}:{returnValue:f,success:g,callId:e.callId};f=c?JSON.stringify(h):h;b.source&&typeof b.source.postMessage==="function"&&b.source.postMessage(f, 
b.origin);return f},e.parameter)};a.u.addEventListener("message",a.g);a.u.__tcfapiPostMessageReady=!0}var mm=class{constructor(a){this.u=a}};function nm(a){a.__uspapiPostMessageReady||om(new pm(a))} 
function om(a){a.g=b=>{const c=typeof b.data==="string";let d;try{d=c?JSON.parse(b.data):b.data}catch(f){return}const e=d.__uspapiCall;e&&e.command==="getUSPData"&&a.u.__uspapi(e.command,e.version,(f,g)=>{const h={};h.__uspapiReturn={returnValue:f,success:g,callId:e.callId};f=c?JSON.stringify(h):h;b.source&&typeof b.source.postMessage==="function"&&b.source.postMessage(f,b.origin);return f})};a.u.addEventListener("message",a.g);a.u.__uspapiPostMessageReady=!0} 
var pm=class{constructor(a){this.u=a;this.g=null}};var qm=class extends M{};var rm=md(class extends M{g(){return G(this,1)!=null}});function sm(a,b){function c(m){if(m.length<10)return null;var r=h(m.slice(0,4));r=k(r);m=h(m.slice(6,10));m=l(m);return"1"+r+m+"N"}function d(m){if(m.length<10)return null;var r=h(m.slice(0,6));r=k(r);m=h(m.slice(6,10));m=l(m);return"1"+r+m+"N"}function e(m){if(m.length<12)return null;var r=h(m.slice(0,6));r=k(r);m=h(m.slice(8,12));m=l(m);return"1"+r+m+"N"}function f(m){if(m.length<18)return null;var r=h(m.slice(0,8));r=k(r);m=h(m.slice(12,18));m=l(m);return"1"+r+m+"N"}function g(m){if(m.length<10)return null; 
var r=h(m.slice(0,6));r=k(r);m=h(m.slice(6,10));m=l(m);return"1"+r+m+"N"}function h(m){const r=[];let x=0;for(let t=0;t<m.length/2;t++)r.push(Ol(m.slice(x,x+2))),x+=2;return r}function k(m){return m.every(r=>r===1)?"Y":"N"}function l(m){return m.some(r=>r===1)?"Y":"N"}if(a.length===0)return null;a=a.split(".");if(a.length>2)return null;a=Nl(a[0]);const n=Ol(a.slice(0,6));a=a.slice(6);if(n!==1)return null;switch(b){case 8:return c(a);case 10:case 12:case 9:return d(a);case 11:return e(a);case 7:return f(a); 
case 13:return g(a);default:return null}};function tm(a,b){const c=a.document,d=()=>{if(!a.frames[b])if(c.body){const e=Td("IFRAME",c);e.style.display="none";e.style.width="0px";e.style.height="0px";e.style.border="none";e.style.zIndex="-1000";e.style.left="-1000px";e.style.top="-1000px";e.name=b;c.body.appendChild(e)}else a.setTimeout(d,5)};d()};function um(a){var b=T(Gi);O!==O.top||O.__uspapi||O.frames.__uspapiLocator||(a=new vm(a,b),wm(a),xm(a))}function wm(a){!a.l||a.u.__uspapi||a.u.frames.__uspapiLocator||(a.u.__uspapiManager="fc",tm(a.u,"__uspapiLocator"),qa("__uspapi",(b,c,d)=>{typeof d==="function"&&b==="getUSPData"&&(b=a.i&&!I(a.j,3),d({version:1,uspString:b?"1---":a.l},!0))},a.u),nm(a.u))} 
function xm(a){!a.tcString||a.u.__tcfapi||a.u.frames.__tcfapiLocator||(a.u.__tcfapiManager="fc",tm(a.u,"__tcfapiLocator"),a.u.__tcfapiEventListeners=a.u.__tcfapiEventListeners||[],qa("__tcfapi",(b,c,d,e)=>{if(typeof d==="function")if(c&&(c>2.2||c<=1))d(null,!1);else{var f=a.u.__tcfapiEventListeners;c=a.i&&!I(a.j,1);switch(b){case "ping":d({gdprApplies:!c,cmpLoaded:!0,cmpStatus:"loaded",displayStatus:"disabled",apiVersion:"2.2",cmpVersion:2,cmpId:300});break;case "addEventListener":e=f.push(d);b=!c; 
--e;a.tcString?(b=dm(a.tcString,b),b.addtlConsent=a.g!=null?a.g:void 0,b.cmpStatus="loaded",b.eventStatus="tcloaded",e!=null&&(b.listenerId=e)):b=null;d(b,!0);break;case "removeEventListener":e!==void 0&&f[e]?(f[e]=null,d(!0)):d(!1);break;case "getInAppTCData":case "getVendorList":d(null,!1);break;case "getTCData":d(null,!1)}}},a.u),km(a.u))} 
function ym(a){if(!a?.g()||K(a,1).length===0||F(a,qm,2,C()).length===0)return null;const b=K(a,1);let c;try{var d=Ql(b.split("~")[0]);c=b.includes("~")?b.split("~").slice(1):[]}catch(e){return null}a=F(a,qm,2,C()).reduce((e,f)=>{var g=zm(e);g=Wc(g,1)??0;var h=zm(f);h=Wc(h,1)??0;return g>h?e:f});d=Ec(d,3,$b,C()).indexOf(ad(a,1));return d===-1||d>=c.length?null:{uspString:sm(c[d],ad(a,1)),va:Xl(zm(a))}} 
function Am(a){a=a.find(b=>b&&L(b,1)===13);if(a?.g())try{return rm(K(a,2))}catch(b){}return null}function zm(a){return Cc(a,Wl,2)?E(a,Wl,2):Vl()} 
var vm=class{constructor(a,b){var c=O;this.u=c;this.j=a;this.i=b;a=jm(this.u.document);try{var d=a?hm(a):null}catch(e){d=null}(a=d)?(d=E(a,fm,5)||null,a=F(a,em,7,C()),a=Am(a??[]),d={Ta:d,Va:a}):d={Ta:null,Va:null};a=d;d=ym(a.Va);a=a.Ta;a?.g()&&K(a,2).length!==0?(b=Cc(a,Wl,1)?E(a,Wl,1):Vl(),a={uspString:K(a,2),va:Xl(b)}):a=null;this.l=a&&d?d.va>a.va?d.uspString:a.uspString:a?a.uspString:d?d.uspString:null;this.tcString=(d=im(c.document))&&G(d,1)!=null?K(d,1):null;this.g=(c=im(c.document))&&G(c,2)!= 
null?K(c,2):null}};const Bm={google_ad_channel:!0,google_ad_host:!0};function Cm(a,b){a.location.href&&a.location.href.substring&&(b.url=a.location.href.substring(0,200));Ak("ama",b,.01)}function Dm(a){const b={};Wd(Bm,(c,d)=>{d in a&&(b[d]=a[d])});return b};function Em(a){const b=/[a-zA-Z0-9._~-]/,c=/%[89a-zA-Z]./;return a.replace(/(%[a-zA-Z0-9]{2})/g,d=>{if(!d.match(c)){const e=decodeURIComponent(d);if(e.match(b))return e}return d.toUpperCase()})}function Fm(a){let b="";const c=/[/%?&=]/;for(let d=0;d<a.length;++d){const e=a[d];b=e.match(c)?b+e:b+encodeURIComponent(e)}return b};function Gm(a){a=dd(a,2);if(!a)return!1;for(let b=0;b<a.length;b++)if(a[b]==1)return!0;return!1}function Hm(a,b){a=Fm(Em(a.location.pathname)).replace(/(^\/)|(\/$)/g,"");const c=Xd(a),d=Im(a);return b.find(e=>{if(Cc(e,wj,7)){var f=E(e,wj,7);f=ac(Ac(f,1))}else f=ac(Ac(e,1));e=Cc(e,wj,7)?H(E(e,wj,7),2):2;if(typeof f!=="number")return!1;switch(e){case 1:return f==c;case 2:return d[f]||!1}return!1})||null} 
function Im(a){const b={};for(;;){b[Xd(a)]=!0;if(!a)return b;a=a.substring(0,a.lastIndexOf("/"))}};let Jm=void 0;function X(a){return a.google_ad_modifications=a.google_ad_modifications||{}}function Km(a){a=X(a);const b=a.space_collapsing||"none";return a.remove_ads_by_default?{Ra:!0,Mb:b,ta:a.ablation_viewport_offset}:null}function Lm(a){a=X(a);a.had_ads_ablation=!0;a.remove_ads_by_default=!0;a.space_collapsing="slot";a.ablation_viewport_offset=1}function Mm(a){X(O).allow_second_reactive_tag=a}function Nm(){const a=X(window);a.afg_slotcar_vars||(a.afg_slotcar_vars={});return a.afg_slotcar_vars};function Om(a){return X(a)?.head_tag_slot_vars?.google_ad_host??Pm(a)}function Pm(a){return a.document?.querySelector('meta[name="google-adsense-platform-account"]')?.getAttribute("content")??null};const Qm=[2,7,1];function Rm(a,b,c="",d=null){return b===1&&Sm(a,c,d)?!0:Tm(a,c,e=>Oa(F(e,nd,2,C()),f=>H(f,1)===b))}function Sm(a,b,c){return c?T(Mi)?Um(a,b,c)?.A()??!1:c.j()?I(c.i(),1):c.l()&&b!==""&&c.g().g()===b?I(c.g().i(),1):!1:!1}function Vm(a){const b=Rd(O)||O;return Wm(b,a)?!0:Tm(O,"",c=>Oa(dd(c,3),d=>d===a))}function Wm(a,b){a=(a=(a=a.location&&a.location.hash)&&a.match(/forced_clientside_labs=([\d,]+)/))&&a[1];return!!a&&Qa(a.split(","),b.toString())} 
function Tm(a,b,c){a=Rd(a)||a;const d=Xm(a);b&&(b=ze(String(b)));return xd(d,(e,f)=>Object.prototype.hasOwnProperty.call(d,f)&&(!b||b===f)&&c(e))}function Xm(a){a=Ym(a);const b={};Wd(a,(c,d)=>{try{const e=kd(od,sc(c));b[d]=e}catch(e){}});return b}function Ym(a){wb(Jm,zb);a=xl({u:a,Y:Jm});return a.g!=null?Zm(a.getValue()):{}} 
function Zm(a){try{const b=a.getItem("google_adsense_settings");if(!b)return{};const c=JSON.parse(b);return c!==Object(c)?{}:wd(c,(d,e)=>Object.prototype.hasOwnProperty.call(c,e)&&typeof e==="string"&&Array.isArray(d))}catch(b){return{}}}function $m(a){return!!a&&(F(a,Ph,1,C()).length>0||F(a,Qh,3,C()).length>0)} 
function an(a,b){if(Om(p))return Qm;if(T(Ni))return(a=Um(p,a,b))?[...dd(Qc(a,Hl,6),3)]:Qm;if(b?.j()){const c=K(b.i(),9);b=b?.i()?.g()?.i();return a&&c===a&&b?[...dd(b,3)]:Qm}return b?.l()&&b?.g()?.g()===a&&K(b,17)===p.location.host?(a=b?.g()?.i()?.g()?.i())?[...dd(a,3)]:Qm:Qm}function bn(a,b){const c=[];a=an(a,b);a.includes(1)||c.push(1);a.includes(2)||c.push(2);a.includes(7)||c.push(7);return c} 
function Um(a,b,c){if(!b)return null;const d=cn(c)?.l();a=cn(c)?.g()?.g()===b&&a.location.host&&K(c,17)===a.location.host;return d===b||a?cn(c):null};function dn(a,b,c,d){en(new fn(a,b,c,d))}function en(a){yh(xh(xl({u:a.u,Y:I(a.g,6)}),b=>{gn(a,b,!0)}),()=>{hn(a)})}function gn(a,b,c){yh(xh(jn(b),d=>{kn("ok");a.i(d,{fromLocalStorage:!0})}),()=>{var d=a.u;try{b.removeItem("google_ama_config")}catch(e){Cm(d,{lserr:1})}c?hn(a):a.i(null,null)})}function hn(a){yh(xh(ln(a),b=>{a.i(b,{fromPABGSettings:!0})}),()=>{mn(a)})} 
function jn(a){if(T(mi))var b=null;else try{b=a.getItem("google_ama_config")}catch(d){b=null}try{var c=b?Ij(b):null}catch(d){c=null}return(a=(a=c)?(E(a,vj,3)?.g()??0)>Date.now()?a:null:null)?sh(a):uh(Error("invlocst"))} 
function ln(a){if(Om(a.u)&&!I(a.g,22))return uh(Error("invtag"));a:{var b=a.u;var c=a.j;a=a.g;if(T(Li))b=Um(b,c,a)?.j(),b=$m(b)?b:null;else if(a?.j())b=a?.i()?.g()?.g(),b=$m(b)?b:null;else{if(a?.l()){const d=a?.g()?.i()?.g()?.g();if(a?.g().g()===c&&$m(d)&&K(a,17)===b.location.host){b=d;break a}}b=null}}b?(c=new Hj,a=F(b,Ph,1,C()),c=Uc(c,1,a),a=F(b,Cj,2,C()),c=Uc(c,7,a),!T(Ki)&&F(b,Qh,3,C()).length>0&&(a=new Rh,b=F(b,Qh,3,C()),b=Uc(a,1,b),Sc(c,6,b)),b=sh(c)):b=uh(Error("invtag"));return b} 
function mn(a){Bl({u:a.u,Y:I(a.g,6),hb:50,rb:b=>{nn(a,b)}})}function nn(a,b){yh(xh(b,c=>{gn(a,c,!1)}),c=>{kn(c.message);a.i(null,null)})}function kn(a){Ak("abg::amalserr",{status:a,guarding:"true",timeout:50,rate:.01},.01)}class fn{constructor(a,b,c,d){this.u=a;this.g=b;this.j=c;this.i=d}};function on(a,b,c,d){var e=pn;try{const f=Hm(a,F(c,Cj,7,C()));if(f&&Gm(f)){if(G(f,4)??void 0){const h=new Ih(null,{google_package:G(f,4)??void 0});d=Hh(d,h)}const g=e(a,b,c,f,d);Tj(1E3,()=>{const h=new nh;(new Ll(a,g,h)).start();return h.i},a).then(()=>{Cm(a,{atf:1})},h=>{(a.google_ama_state=a.google_ama_state||{}).exception=h;Cm(a,{atf:0})})}}catch(f){Cm(a,{atf:-1})}}function pn(a,b,c,d,e){return new bl(a,b,c,d,e)};function qn(a){return a.length?a.join("~"):void 0};function rn(a,b){if(!a)return!1;a=a.hash;if(!a||!a.indexOf)return!1;if(a.indexOf(b)!=-1)return!0;b=sn(b);return b!="go"&&a.indexOf(b)!=-1?!0:!1}function sn(a){let b="";Wd(a.split("_"),c=>{b+=c.substr(0,2)});return b};var tn=class extends M{};var un=class extends M{g(){return K(this,3)}i(){return Xc(this,4)!=null}};var vn=class extends M{g(){return Rc(this,un,1)}};function wn(a){const b=new vn;var c=new un;var d=ad(a,1);c=A(c,1,z(d));d=ad(a,18);c=A(c,2,z(d));d=K(a,2);c=id(c,3,d);d=I(a,6);c=A(c,4,Ub(d));d=I(a,20);c=A(c,5,Ub(d));d=I(a,9);c=A(c,6,Ub(d));d=I(a,25);c=A(c,7,Ub(d));d=K(a,8);c=id(c,8,d);d=K(a,3);c=id(c,9,d);a=E(a,tn,26);a=Sc(c,10,a);Sc(b,1,a);return b};Sa||Ha();function xn(){const a={};N(ge).g(ii.g,ii.defaultValue)&&(a.bust=N(ge).g(ii.g,ii.defaultValue));return a};class yn{constructor(){this.promise=new Promise((a,b)=>{this.resolve=a;this.reject=b})}};function zn(){const {promise:a,resolve:b}=new yn;return{promise:a,resolve:b}};function An(a=()=>{}){p.google_llp||(p.google_llp={});const b=p.google_llp;let c=b[7];if(c)return c;c=zn();b[7]=c;a();return c}function Bn(a){return An(()=>{Sd(p.document,a)}).promise};function Cn(a){a.google_reactive_ads_global_state?(a.google_reactive_ads_global_state.sideRailProcessedFixedElements==null&&(a.google_reactive_ads_global_state.sideRailProcessedFixedElements=new Set),a.google_reactive_ads_global_state.sideRailAvailableSpace==null&&(a.google_reactive_ads_global_state.sideRailAvailableSpace=new Map),a.google_reactive_ads_global_state.sideRailPlasParam==null&&(a.google_reactive_ads_global_state.sideRailPlasParam=new Map),a.google_reactive_ads_global_state.sideRailMutationCallbacks== 
null&&(a.google_reactive_ads_global_state.sideRailMutationCallbacks=[])):a.google_reactive_ads_global_state=new Dn;return a.google_reactive_ads_global_state} 
var Dn=class{constructor(){this.wasPlaTagProcessed=!1;this.wasReactiveAdConfigReceived={};this.adCount={};this.wasReactiveAdVisible={};this.stateForType={};this.reactiveTypeEnabledInAsfe={};this.wasReactiveTagRequestSent=!1;this.reactiveTypeDisabledByPublisher={};this.tagSpecificState={};this.messageValidationEnabled=!1;this.floatingAdsStacking=new En;this.sideRailProcessedFixedElements=new Set;this.sideRailAvailableSpace=new Map;this.sideRailPlasParam=new Map;this.sideRailMutationCallbacks=[];this.clickTriggeredInterstitialMayBeDisplayed= 
!1}},En=class{constructor(){this.maxZIndexRestrictions={};this.nextRestrictionId=0;this.maxZIndexListeners=[]}};var Fn=a=>{if(p.google_apltlad||a.google_ad_intent_query)return null;var b=a.google_loader_used!=="sd"&&T(pi)&&(p.top==p?0:Qd(p.top)?1:2)===1;if(p!==p.top&&!b||!a.google_ad_client)return null;p.google_apltlad=!0;b={enable_page_level_ads:{pltais:!0},google_ad_client:a.google_ad_client};const c=b.enable_page_level_ads;Wd(a,(d,e)=>{rj[e]&&e!=="google_ad_client"&&(c[e]=d)});c.google_pgb_reactive=7;c.asro=T(Ci);c.aihb=T(ri);c.ailel=qn(Si(Ai));c.aiael=qn(Si(ti));c.aicel=qn(Si(vi));c.aifxl=qn(Si(xi));c.aiixl= 
qn(Si(yi));U(Di)&&(c.aiapm=U(Di));U(Ei)&&(c.aiapmi=U(Ei));U(si)&&(c.aiact=U(si));U(ui)&&(c.aicct=U(ui));U(zi)&&(c.ailct=U(zi));T(wi)&&(c.aiescf=!0);c.aiof=qn(Si(Bi));if("google_ad_section"in a||"google_ad_region"in a)c.google_ad_section=a.google_ad_section||a.google_ad_region;return b};function Gn(a,b){X(O).ama_ran_on_page||Tj(1001,()=>{Hn(new In(a,b))},p)}function Hn(a){dn(a.u,a.i,a.g.google_ad_client||"",(b,c)=>{var d=a.u,e=a.g;X(O).ama_ran_on_page||b&&Jn(d,e,b,c)})}class In{constructor(a,b){this.u=p;this.g=a;this.i=b}} 
function Jn(a,b,c,d){d&&(Yj(a).configSourceInAbg=d);Cc(c,Gj,24)&&(d=Zj(a),d.availableAbg=!0,d.ablationFromStorage=!!E(c,Gj,24)?.g()?.g());if(ja(b.enable_page_level_ads)&&b.enable_page_level_ads.google_pgb_reactive===7){if(!Hm(a,F(c,Cj,7,C()))){Ak("amaait",{value:"true"});return}Ak("amaait",{value:"false"})}X(O).ama_ran_on_page=!0;E(c,uj,15)?.g()&&(X(a).enable_overlap_observer=!0);E(c,Gj,24)?.g()?.g()&&(Zj(a).ablatingThisPageview=!0,Lm(a));re(3,[uc(c)]);const e=b.google_ad_client||"";b=Dm(ja(b.enable_page_level_ads)? 
b.enable_page_level_ads:{});const f=Hh(Lh,new Ih(null,b));xk(782,()=>{on(a,e,c,f)})};function Kn(a,b){a=a.document;for(var c=void 0,d=0;!c||a.getElementById(c+"_host");)c="aswift_"+d++;a=c;c=Number(b.google_ad_width||0);b=Number(b.google_ad_height||0);d=document.createElement("div");d.id=a+"_host";const e=d.style;e.border="none";e.height=`${b}px`;e.width=`${c}px`;e.margin="0px";e.padding="0px";e.position="relative";e.visibility="visible";e.backgroundColor="transparent";e.display="inline-block";return{yb:a,Pb:d}};function Ln({ua:a,Ba:b}){return a||(b==="dev"?"dev":"")};function Mn(a){return a.google_ad_client?String(a.google_ad_client):X(a).head_tag_slot_vars?.google_ad_client??a.document.querySelector(".adsbygoogle[data-ad-client]")?.getAttribute("data-ad-client")??""};var Nn={"120x90":!0,"160x90":!0,"180x90":!0,"200x90":!0,"468x15":!0,"728x15":!0};function On(a,b){if(b==15){if(a>=728)return 728;if(a>=468)return 468}else if(b==90){if(a>=200)return 200;if(a>=180)return 180;if(a>=160)return 160;if(a>=120)return 120}return null};var Pn=class extends M{getVersion(){return K(this,2)}};function Qn(a,b){return id(a,2,b)}function Rn(a,b){return id(a,3,b)}function Sn(a,b){return id(a,4,b)}function Tn(a,b){return id(a,5,b)}function Un(a,b){return id(a,9,b)}function Vn(a,b){return Uc(a,10,b)}function Wn(a,b){return A(a,11,Ub(b))}function Xn(a,b){return id(a,1,b)}function Yn(a,b){return A(a,7,Ub(b))}var Zn=class extends M{};const $n="platform platformVersion architecture model uaFullVersion bitness fullVersionList wow64".split(" ");function ao(){var a=O;if(typeof a.navigator?.userAgentData?.getHighEntropyValues!=="function")return null;const b=a.google_tag_data??(a.google_tag_data={});if(b.uach_promise)return b.uach_promise;a=a.navigator.userAgentData.getHighEntropyValues($n).then(c=>{b.uach??(b.uach=c);return c});return b.uach_promise=a} 
function bo(a){return Wn(Vn(Tn(Qn(Xn(Sn(Yn(Un(Rn(new Zn,a.architecture||""),a.bitness||""),a.mobile||!1),a.model||""),a.platform||""),a.platformVersion||""),a.uaFullVersion||""),a.fullVersionList?.map(b=>{var c=new Pn;c=id(c,1,b.brand);return id(c,2,b.version)})||[]),a.wow64||!1)}function co(){return ao()?.then(a=>bo(a))??null};function eo(a,b){b.google_ad_host||(a=Pm(a))&&(b.google_ad_host=a)}function fo(a,b,c=""){O.google_sa_queue||(O.google_sa_queue=[],O.google_process_slots=yk(215,()=>{go(O.google_sa_queue)}),a=ho(c,a,b),Sd(O.document,a))}function go(a){const b=a.shift();typeof b==="function"&&xk(216,b);a.length&&p.setTimeout(yk(215,()=>{go(a)}),0)}function io(a,b){a.google_sa_queue=a.google_sa_queue||[];a.google_sa_impl?b():a.google_sa_queue.push(b)} 
function ho(a,b,c){var d=O;b=I(c,4)?b.Ib:b.Jb;a:{if(I(c,4)){if(a=a||Mn(d)){b:{try{for(;d;){if(d.location?.hostname){var e=d.location.hostname;break b}d=d.parent}}catch(f){}e=""}e={client:ze(a),plah:e};break a}throw Error("PublisherCodeNotFoundForAma");}e={}}e={...e,...xn()};d=U(Hi);!I(c,4)&&[0,1].includes(d)&&(e.osttc=`${d}`);return Od(b,new Map(Object.entries(e)))} 
function jo(a,b,c,d){const {yb:e,Pb:f}=Kn(a,b);c.appendChild(f);ko(a,c,b);c=b.google_start_time??hh;const g=(new Date).getTime();b.google_lrv=Ln({ua:gg(),Ba:K(d,2)});b.google_async_iframe_id=e;b.google_start_time=c;b.google_bpp=g>c?g-c:1;a.google_sv_map=a.google_sv_map||{};a.google_sv_map[e]=b;io(a,()=>{var h=f;if(!h||!h.isConnected)if(h=a.document.getElementById(String(b.google_async_iframe_id)+"_host"),h==null)throw Error("no_div");(h=a.google_sa_impl({pubWin:a,vars:b,innerInsElement:h}))&&zk(911, 
h)})} 
function ko(a,b,c){var d=c.google_ad_output,e=c.google_ad_format,f=c.google_ad_width||0,g=c.google_ad_height||0;e||d!=="html"&&d!=null||(e=`${f}x${g}`);T(Qi)&&(c.google_reactive_ad_format===10?e="interstitial":c.google_reactive_ad_format===11&&(e="rewarded"));d=!c.google_ad_slot||c.google_override_format||!Nn[c.google_ad_width+"x"+c.google_ad_height]&&c.google_loader_used==="aa";e=e&&d?e.toLowerCase():"";c.google_ad_format=e;if(typeof c.google_reactive_sra_index!=="number"||!c.google_ad_unit_key){e=[c.google_ad_slot, 
c.google_orig_ad_format||c.google_ad_format,c.google_ad_type,c.google_orig_ad_width||c.google_ad_width,c.google_orig_ad_height||c.google_ad_height];d=[];f=0;for(g=b;g&&f<25;g=g.parentNode,++f)g.nodeType===9?d.push(""):d.push(g.id);(d=d.join())&&e.push(d);c.google_ad_unit_key=Xd(e.join(":")).toString();e=[];for(d=0;b&&d<25;++d){f=(f=b.nodeType!==9&&b.id)?"/"+f:"";a:{if(b&&b.nodeName&&b.parentElement){g=b.nodeName.toString().toLowerCase();const h=b.parentElement.childNodes;let k=0;for(let l=0;l<h.length;++l){const n= 
h[l];if(n.nodeName&&n.nodeName.toString().toLowerCase()===g){if(b===n){g="."+k;break a}++k}}}g=""}e.push((b.nodeName&&b.nodeName.toString().toLowerCase())+f+g);b=b.parentElement}b=e.join()+":";e=[];if(a)try{let h=a.parent;for(d=0;h&&h!==a&&d<25;++d){const k=h.frames;for(f=0;f<k.length;++f)if(a===k[f]){e.push(f);break}a=h;h=a.parent}}catch(h){}c.google_ad_dom_fingerprint=Xd(b+e.join()).toString()}} 
function lo(){var a=Rd(p);a&&(a=Cn(a),a.tagSpecificState[1]||(a.tagSpecificState[1]={debugCard:null,debugCardRequested:!1}))}function mo(){const a=co();a!=null&&a.then(b=>{O.google_user_agent_client_hint=JSON.stringify(uc(b))});fe()};var no=class{constructor(a,b){this.g=a;this.l=b}height(){return this.l}i(a){return a>U(li)&&this.l>300?this.g:Math.min(1200,Math.round(a))}j(){}};function oo(a){return b=>!!(b.X()&a)}var Y=class extends no{constructor(a,b,c,d=!1){super(a,b);this.B=c;this.A=d}X(){return this.B}j(a,b,c){c.style.height=`${this.height()}px`;b.rpe=!0}};const po={image_stacked:1/1.91,image_sidebyside:1/3.82,mobile_banner_image_sidebyside:1/3.82,pub_control_image_stacked:1/1.91,pub_control_image_sidebyside:1/3.82,pub_control_image_card_stacked:1/1.91,pub_control_image_card_sidebyside:1/3.74,pub_control_text:0,pub_control_text_card:0},qo={image_stacked:80,image_sidebyside:0,mobile_banner_image_sidebyside:0,pub_control_image_stacked:80,pub_control_image_sidebyside:0,pub_control_image_card_stacked:85,pub_control_image_card_sidebyside:0,pub_control_text:80, 
pub_control_text_card:80},ro={pub_control_image_stacked:100,pub_control_image_sidebyside:200,pub_control_image_card_stacked:150,pub_control_image_card_sidebyside:250,pub_control_text:100,pub_control_text_card:150}; 
function so(a){var b=0;a.O&&b++;a.J&&b++;a.K&&b++;if(b<3)return{W:"Tags data-matched-content-ui-type, data-matched-content-columns-num and data-matched-content-rows-num should be set together."};b=a.O.split(",");const c=a.K.split(",");a=a.J.split(",");if(b.length!==c.length||b.length!==a.length)return{W:'Lengths of parameters data-matched-content-ui-type, data-matched-content-columns-num and data-matched-content-rows-num must match. Example: \n data-matched-content-rows-num="4,2"\ndata-matched-content-columns-num="1,6"\ndata-matched-content-ui-type="image_stacked,image_card_sidebyside"'}; 
if(b.length>2)return{W:"The parameter length of attribute data-matched-content-ui-type, data-matched-content-columns-num and data-matched-content-rows-num is too long. At most 2 parameters for each attribute are needed: one for mobile and one for desktop, while "+`you are providing ${b.length} parameters. Example: ${'\n data-matched-content-rows-num="4,2"\ndata-matched-content-columns-num="1,6"\ndata-matched-content-ui-type="image_stacked,image_card_sidebyside"'}.`};const d=[],e=[];for(let g=0;g< 
b.length;g++){var f=Number(c[g]);if(Number.isNaN(f)||f===0)return{W:`Wrong value '${c[g]}' for ${"data-matched-content-rows-num"}.`};d.push(f);f=Number(a[g]);if(Number.isNaN(f)||f===0)return{W:`Wrong value '${a[g]}' for ${"data-matched-content-columns-num"}.`};e.push(f)}return{K:d,J:e,Za:b}} 
function to(a){return a>=1200?{width:1200,height:600}:a>=850?{width:a,height:Math.floor(a*.5)}:a>=550?{width:a,height:Math.floor(a*.6)}:a>=468?{width:a,height:Math.floor(a*.7)}:{width:a,height:Math.floor(a*3.44)}}function uo(a,b,c,d){b=Math.floor(((a-8*b-8)/b*po[d]+qo[d])*c+8*c+8);return a>1500?{width:0,height:0,Kb:`Calculated slot width is too large: ${a}`}:b>1500?{width:0,height:0,Kb:`Calculated slot height is too large: ${b}`}:{width:a,height:b}} 
function vo(a,b){const c=a-8-8;--b;return{width:a,height:Math.floor(c/1.91+70)+Math.floor((c*po.mobile_banner_image_sidebyside+qo.mobile_banner_image_sidebyside)*b+8*b+8)}};const wo=Ra("script");var xo=class{constructor(a,b,c=null,d=null,e=null,f=null,g=null,h=null,k=null,l=null,n=null,m=null){this.F=a;this.U=b;this.X=c;this.g=d;this.I=e;this.D=f;this.N=g;this.l=h;this.A=k;this.i=l;this.j=n;this.B=m}size(){return this.U}};const yo=["google_content_recommendation_ui_type","google_content_recommendation_columns_num","google_content_recommendation_rows_num"];var zo=class extends no{i(a){return Math.min(1200,Math.max(this.g,Math.round(a)))}}; 
function Ao(a,b){Bo(a,b);if(b.google_content_recommendation_ui_type==="pedestal")return new xo(9,new zo(a,Math.floor(a*b.google_phwr)));if(T(Yh)){var c=ud();var d=U(Zh);var e=U(Xh),f=U(Wh);a<468?c?(a=vo(a,d),d={V:a.width,T:a.height,J:1,K:d,O:"mobile_banner_image_sidebyside"}):(a=uo(a,1,d,"image_sidebyside"),d={V:a.width,T:a.height,J:1,K:d,O:"image_sidebyside"}):(d=to(a),e===1&&(d.height=Math.floor(d.height*.5)),d={V:d.width,T:d.height,J:f,K:e,O:"image_stacked"})}else d=ud(),a<468?d?(d=vo(a,12),d= 
{V:d.width,T:d.height,J:1,K:12,O:"mobile_banner_image_sidebyside"}):(d=to(a),d={V:d.width,T:d.height,J:1,K:13,O:"image_sidebyside"}):(d=to(a),d={V:d.width,T:d.height,J:4,K:2,O:"image_stacked"});Co(b,d);return new xo(9,new zo(d.V,d.T))} 
function Do(a,b){Bo(a,b);{const f=so({K:b.google_content_recommendation_rows_num,J:b.google_content_recommendation_columns_num,O:b.google_content_recommendation_ui_type});if(f.W)a={V:0,T:0,J:0,K:0,O:"image_stacked",W:f.W};else{var c=f.Za.length===2&&a>=468?1:0;var d=f.Za[c];d=d.indexOf("pub_control_")===0?d:"pub_control_"+d;var e=ro[d];let g=f.J[c];for(;a/g<e&&g>1;)g--;e=g;c=f.K[c];a=uo(a,e,c,d);a={V:a.width,T:a.height,J:e,K:c,O:d}}}if(a.W)throw new W(a.W);Co(b,a);return new xo(9,new zo(a.V,a.T))} 
function Bo(a,b){if(a<=0)throw new W(`Invalid responsive width from Matched Content slot ${b.google_ad_slot}: ${a}. Please ensure to put this Matched Content slot into a non-zero width div container.`);}function Co(a,b){a.google_content_recommendation_ui_type=b.O;a.google_content_recommendation_columns_num=b.J;a.google_content_recommendation_rows_num=b.K};var Eo=class extends no{i(){return this.g}j(a,b,c){ij(a,c);c.style.height=`${this.height()}px`;b.rpe=!0}};const Fo={"image-top":a=>a<=600?284+(a-250)*.414:429,"image-middle":a=>a<=500?196-(a-250)*.13:164+(a-500)*.2,"image-side":a=>a<=500?205-(a-250)*.28:134+(a-500)*.21,"text-only":a=>a<=500?187-.228*(a-250):130,"in-article":a=>a<=420?a/1.2:a<=460?a/1.91+130:a<=800?a/4:200};var Go=class extends no{i(){return Math.min(1200,this.g)}}; 
function Ho(a,b,c,d,e){var f=e.google_ad_layout||"image-top";if(f==="in-article"){var g=a;if(e.google_full_width_responsive==="false")a=g;else if(a=dj(b,c,g,U(di),e),a!==!0)e.gfwrnwer=a,a=g;else if(a=V(b))if(e.google_full_width_responsive_allowed=!0,c.parentElement){b:{g=c;for(let h=0;h<100&&g.parentElement;++h){const k=g.parentElement.childNodes;for(let l=0;l<k.length;++l){const n=k[l];if(n!==g&&gj(b,n))break b}g=g.parentElement;g.style.width="100%";g.style.height="auto"}}ij(b,c)}else a=g;else a= 
g}if(a<250)throw new W("Fluid responsive ads must be at least 250px wide: "+`availableWidth=${a}`);a=Math.min(1200,Math.floor(a));if(d&&f!=="in-article"){f=Math.ceil(d);if(f<50)throw new W("Fluid responsive ads must be at least 50px tall: "+`height=${f}`);return new xo(11,new no(a,f))}if(f!=="in-article"&&(d=e.google_ad_layout_key)){f=`${d}`;if(d=(c=f.match(/([+-][0-9a-z]+)/g))&&c.length)for(b=[],e=0;e<d;e++)b.push(parseInt(c[e],36)/1E3);else b=null;if(!b)throw new W(`Invalid data-ad-layout-key value: ${f}`); 
f=(a+-725)/1E3;c=0;d=1;e=b.length;for(g=0;g<e;g++)c+=b[g]*d,d*=f;f=Math.ceil(c*1E3- -725+10);if(isNaN(f))throw new W(`Invalid height: height=${f}`);if(f<50)throw new W("Fluid responsive ads must be at least 50px tall: "+`height=${f}`);if(f>1200)throw new W("Fluid responsive ads must be at most 1200px tall: "+`height=${f}`);return new xo(11,new no(a,f))}d=Fo[f];if(!d)throw new W("Invalid data-ad-layout value: "+f);c=oj(c,b);b=V(b);b=f!=="in-article"||c||a!==b?Math.ceil(d(a)):Math.ceil(d(a)*1.25);return new xo(11, 
f==="in-article"?new Go(a,b):new no(a,b))};function Io(a){return b=>{for(let c=a.length-1;c>=0;--c)if(!a[c](b))return!1;return!0}}function Jo(a,b){var c=Ko.slice(0);const d=c.length;let e=null;for(let f=0;f<d;++f){const g=c[f];if(a(g)){if(b==null||b(g))return g;e===null&&(e=g)}}return e};var Z=[new Y(970,90,2),new Y(728,90,2),new Y(468,60,2),new Y(336,280,1),new Y(320,100,2),new Y(320,50,2),new Y(300,600,4),new Y(300,250,1),new Y(250,250,1),new Y(234,60,2),new Y(200,200,1),new Y(180,150,1),new Y(160,600,4),new Y(125,125,1),new Y(120,600,4),new Y(120,240,4),new Y(120,120,1,!0)],Ko=[Z[6],Z[12],Z[3],Z[0],Z[7],Z[14],Z[1],Z[8],Z[10],Z[4],Z[15],Z[2],Z[11],Z[5],Z[13],Z[9],Z[16]];function Lo(a,b,c,d,e){e.google_full_width_responsive==="false"?c={H:a,D:1}:b==="autorelaxed"&&e.google_full_width_responsive||Mo(b)||e.google_ad_resize?(b=ej(a,c,d,e),c=b!==!0?{H:a,D:b}:{H:V(c)||a,D:!0}):c={H:a,D:2};const {H:f,D:g}=c;return g!==!0?{H:a,D:g}:d.parentElement?{H:f,D:g}:{H:a,D:g}} 
function No(a,b,c,d,e){const {H:f,D:g}=xk(247,()=>Lo(a,b,c,d,e));var h=g===!0;const k=ae(d.style.width),l=ae(d.style.height),{U:n,N:m,X:r,Ya:x}=Oo(f,b,c,d,e,h);h=Po(b,r);var t;const v=(t=jj(d,c,"marginLeft"))?`${t}px`:"",J=(t=jj(d,c,"marginRight"))?`${t}px`:"";t=lj(d,c)||"";return new xo(h,n,r,null,x,g,m,v,J,l,k,t)}function Mo(a){return a==="auto"||/^((^|,) *(horizontal|vertical|rectangle) *)+$/.test(a)} 
function Oo(a,b,c,d,e,f){b=Qo(c,a,b);let g;var h=!1;let k=!1;var l=V(c)<488;if(l){g=Zi(d,c);var n=oj(d,c);h=!n&&g;k=n&&g}n=[mj(a),oo(b)];T(ji)||n.push(nj(l,c,d,k));e.google_max_responsive_height!=null&&n.push(pj(e.google_max_responsive_height));l=[t=>!t.A];if(h||k)h=qj(c,d),l.push(pj(h));const m=Jo(Io(n),Io(l));if(!m)throw new W(`No slot size for availableWidth=${a}`);const {U:r,N:x}=xk(248,()=>{var t;a:if(f){if(e.gfwrnh&&(t=ae(e.gfwrnh))){t={U:new Eo(a,t),N:!0};break a}t=U(fi);t=t>0?a/t:a/1.2;if(e.google_resizing_allowed|| 
e.google_full_width_responsive==="true")var v=Infinity;else{v=d;let P=Infinity;do{var J=jj(v,c,"height");J&&(P=Math.min(P,J));(J=jj(v,c,"maxHeight"))&&(P=Math.min(P,J))}while(v.parentElement&&(v=v.parentElement)&&v.tagName!=="HTML");v=P}!(T(hi)&&v<=t*2)&&(v=Math.min(t,v),v<t*.5||v<100)&&(v=t);t={U:new Eo(a,Math.floor(v)),N:v<t?102:!0}}else t={U:m,N:100};return t});return e.google_ad_layout==="in-article"&&Ro(c)?{U:So(a,c,d,r,e),N:!1,X:b,Ya:g}:{U:r,N:x,X:b,Ya:g}} 
function Po(a,b){if(a==="auto")return 1;switch(b){case 2:return 2;case 1:return 3;case 4:return 4;case 3:return 5;case 6:return 6;case 5:return 7;case 7:return 8;default:throw Error("bad mask");}}function Qo(a,b,c){if(c==="auto")c=Math.min(1200,V(a)),b=b/c<=.25?4:3;else{b=0;for(const d in Wi)c.indexOf(d)!==-1&&(b|=Wi[d])}return b}function So(a,b,c,d,e){const f=e.google_ad_height||jj(c,b,"height");b=Ho(a,b,c,f,e).size();return b.g*b.height()>a*d.height()?new Y(b.g,b.height(),1):d} 
function Ro(a){return T(Vh)||a.location&&a.location.hash==="#hffwroe2etoq"};function To(a,b,c,d,e){var f;(f=V(b))?V(b)<488?b.innerHeight>=b.innerWidth?(e.google_full_width_responsive_allowed=!0,ij(b,c),f={H:f,D:!0}):f={H:a,D:5}:f={H:a,D:4}:f={H:a,D:10};const {H:g,D:h}=f;if(h!==!0||a===g)return new xo(12,new no(a,d),null,null,!0,h,100);const {U:k,N:l,X:n}=Oo(g,"auto",b,c,e,!0);return new xo(1,k,n,2,!0,h,l)};function Uo(a,b){var c=b.google_ad_format;if(c==="autorelaxed"){a:{if(b.google_content_recommendation_ui_type!=="pedestal")for(const d of yo)if(b[d]!=null){a=!0;break a}a=!1}return a?9:5}if(Mo(c))return 1;if(c==="link")return 4;if(c==="fluid"){if(c=b.google_ad_layout==="in-article")c=T(ai)||a.location&&(a.location.hash==="#hffwroe2etop"||a.location.hash==="#hffwroe2etoq");return c?(Vo(b),1):8}if(b.google_reactive_ad_format===27)return Vo(b),1} 
function Wo(a,b,c,d,e=!1){var f=b.offsetWidth||(c.google_ad_resize||e)&&jj(b,d,"width")||c.google_ad_width||0;a===4&&(c.google_ad_format="auto",a=1);e=(e=Xo(a,f,b,c,d))?e:No(f,c.google_ad_format,d,b,c);e.size().j(d,c,b);e.X!=null&&(c.google_responsive_formats=e.X);e.I!=null&&(c.google_safe_for_responsive_override=e.I);e.D!=null&&(e.D===!0?c.google_full_width_responsive_allowed=!0:(c.google_full_width_responsive_allowed=!1,c.gfwrnwer=e.D));e.N!=null&&e.N!==!0&&(c.gfwrnher=e.N);d=e.j||c.google_ad_width; 
d!=null&&(c.google_resizing_width=d);d=e.i||c.google_ad_height;d!=null&&(c.google_resizing_height=d);d=e.size().i(f);const g=e.size().height();c.google_ad_width=d;c.google_ad_height=g;var h=e.size();f=`${h.i(f)}x${h.height()}`;c.google_ad_format=f;c.google_responsive_auto_format=e.F;e.g!=null&&(c.armr=e.g);c.google_ad_resizable=!0;c.google_override_format=1;c.google_loader_features_used=128;e.D===!0&&(c.gfwrnh=`${e.size().height()}px`);e.l!=null&&(c.gfwroml=e.l);e.A!=null&&(c.gfwromr=e.A);e.i!=null&& 
(c.gfwroh=e.i);e.j!=null&&(c.gfwrow=e.j);e.B!=null&&(c.gfwroz=e.B);f=Rd(window)||window;rn(f.location,"google_responsive_dummy_ad")&&(Qa([1,2,3,4,5,6,7,8],e.F)||e.g===1)&&e.g!==2&&(f=JSON.stringify({googMsgType:"adpnt",key_value:[{key:"qid",value:"DUMMY_AD"}]}),c.dash=`<${wo}>window.top.postMessage('${f}', '*'); 
          </${wo}> 
          <div id="dummyAd" style="width:${d}px;height:${g}px; 
            background:#ddd;border:3px solid #f00;box-sizing:border-box; 
            color:#000;"> 
            <p>Requested size:${d}x${g}</p> 
            <p>Rendered size:${d}x${g}</p> 
          </div>`);a!==1&&(a=e.size().height(),b.style.height=`${a}px`)}function Xo(a,b,c,d,e){const f=d.google_ad_height||jj(c,e,"height")||0;switch(a){case 5:const {H:g,D:h}=xk(247,()=>Lo(b,d.google_ad_format,e,c,d));h===!0&&b!==g&&ij(e,c);h===!0?d.google_full_width_responsive_allowed=!0:(d.google_full_width_responsive_allowed=!1,d.gfwrnwer=h);return Ao(g,d);case 9:return Do(b,d);case 8:return Ho(b,e,c,f,d);case 10:return To(b,e,c,f,d)}}function Vo(a){a.google_ad_format="auto";a.armr=3};function Yo(a,b){a.google_resizing_allowed=!0;a.ovlp=!0;a.google_ad_format="auto";a.iaaso=!0;a.armr=b};function Zo(a,b){var c=Rd(b);if(c){c=V(c);const d=Ud(a,b)||{},e=d.direction;if(d.width==="0px"&&d.cssFloat!=="none")return-1;if(e==="ltr"&&c)return Math.floor(Math.min(1200,c-a.getBoundingClientRect().left));if(e==="rtl"&&c)return a=b.document.body.getBoundingClientRect().right-a.getBoundingClientRect().right,Math.floor(Math.min(1200,c-a-Math.floor((c-b.document.body.clientWidth)/2)))}return-1};function $o(a,b){switch(a){case "google_reactive_ad_format":return a=parseInt(b,10),isNaN(a)?0:a;default:return b}} 
function ap(a,b){if(a.getAttribute("src")){var c=a.getAttribute("src")||"",d=Md(c,"client");d&&(b.google_ad_client=$o("google_ad_client",d));(c=Md(c,"host"))&&(b.google_ad_host=$o("google_ad_host",c))}a=a.attributes;c=a.length;for(d=0;d<c;d++){var e=a[d];if(/data-/.test(e.name)){const f=ta(e.name.replace("data-matched-content","google_content_recommendation").replace("data","google").replace(/-/g,"_"));b.hasOwnProperty(f)||(e=$o(f,e.value),e!==null&&(b[f]=e))}}} 
function bp(a){if(a=te(a))switch(a.data&&a.data.autoFormat){case "rspv":return 13;case "mcrspv":return 15;default:return 14}else return 12} 
function cp(a,b,c,d){ap(a,b);if(c.document&&c.document.body&&!Uo(c,b)&&!b.google_reactive_ad_format&&!b.google_ad_intent_query){var e=parseInt(a.style.width,10),f=Zo(a,c);if(f>0&&e>f){var g=parseInt(a.style.height,10);e=!!Nn[e+"x"+g];let h=f;if(e){const k=On(f,g);if(k)h=k,b.google_ad_format=k+"x"+g+"_0ads_al";else throw new W("No slot size for availableWidth="+f);}b.google_ad_resize=!0;b.google_ad_width=h;e||(b.google_ad_format=null,b.google_override_format=!0);f=h;a.style.width=`${f}px`;Yo(b,4)}}if(T($h)|| 
V(c)<488){f=Rd(c)||c;g=a.offsetWidth||jj(a,c,"width")||b.google_ad_width||0;e=b.google_ad_client;if(d=rn(f.location,"google_responsive_slot_preview")||Rm(f,1,e,d))b:if(b.google_reactive_ad_format||b.google_ad_resize||Uo(c,b)||aj(a,b))d=!1;else{for(d=a;d;d=d.parentElement){f=Ud(d,c);if(!f){b.gfwrnwer=18;d=!1;break b}if(!Qa(["static","relative"],f.position)){b.gfwrnwer=17;d=!1;break b}}if(!T(ki)&&(d=U(ei),d=dj(c,a,g,d,b),d!==!0)){b.gfwrnwer=d;d=!1;break b}d=c===c.top?!0:!1}d?(Yo(b,1),d=!0):d=!1}else d= 
!1;if(g=Uo(c,b))Wo(g,a,b,c,d);else{if(aj(a,b)){if(d=Ud(a,c))a.style.width=d.width,a.style.height=d.height,$i(d,b);b.google_ad_width||(b.google_ad_width=a.offsetWidth);b.google_ad_height||(b.google_ad_height=a.offsetHeight);b.google_loader_features_used=256;b.google_responsive_auto_format=bp(c)}else $i(a.style,b);c.location&&c.location.hash==="#gfwmrp"||b.google_responsive_auto_format===12&&b.google_full_width_responsive==="true"?Wo(10,a,b,c,!1):Math.random()<.01&&b.google_responsive_auto_format=== 
12&&(a=ej(a.offsetWidth||parseInt(a.style.width,10)||b.google_ad_width,c,a,b),a!==!0?(b.efwr=!1,b.gfwrnwer=a):b.efwr=!0)}};function dp(a){if(a===a.top)return 0;for(let b=a;b&&b!==b.top&&Qd(b);b=b.parent){if(a.sf_)return 2;if(a.$sf)return 3;if(a.inGptIF)return 4;if(a.inDapIF)return 5}return 1};function ep(a,b,c){for(const f of b)a:{b=a;var d=f,e=c;for(let g=0;g<b.g.length;g++){if(b.g[g].element.contains(d)){b.g[g].labels.add(e);break a}if(d.contains(b.g[g].element)){b.g[g].element=d;b.g[g].labels.add(e);break a}}b.g.push({element:d,labels:new Set([e])})}}class fp{constructor(){this.g=[]}getSlots(){return this.g}} 
function gp(a){const b=Uk(a),c=new fp;ep(c,b.lb,1);ep(c,b.mb,2);ep(c,b.wb,3);ep(c,b.Ob,4);ep(c,b.nb,5);ep(c,b.Eb,6);return c.getSlots().map(d=>{var e=new vf;var f=[...d.labels];e=Kc(e,1,f,Xb);d=d.element.getBoundingClientRect();f=new uf;f=A(f,1,z(d.left+a.scrollX));f=A(f,2,z(d.top+a.scrollY));f=A(f,3,z(d.width));d=A(f,4,z(d.height));d=yc(d);e=Sc(e,2,d);return yc(e)}).sort((d,e)=>ad(E(d,uf,2),2)-ad(E(e,uf,2),2))};function vg(a,b,c=0){a.g.size>0||hp(a);c=Math.min(Math.max(0,c),9);const d=a.g.get(c);d?d.push(b):a.g.set(c,[b])}function ip(a,b,c,d){sd(b,c,d);ql(a,()=>td(b,c,d))}function jp(a,b){a.j!==1&&(a.j=1,a.g.size>0&&kp(a,b))} 
function hp(a){a.u.document.visibilityState?ip(a,a.u.document,"visibilitychange",b=>{a.u.document.visibilityState==="hidden"&&jp(a,b);a.u.document.visibilityState==="visible"&&(a.j=0)}):"onpagehide"in a.u?(ip(a,a.u,"pagehide",b=>{jp(a,b)}),ip(a,a.u,"pageshow",()=>{a.j=0})):ip(a,a.u,"beforeunload",b=>{jp(a,b)})}function kp(a,b){for(let c=9;c>=0;c--)a.g.get(c)?.forEach(d=>{d(b)})}var lp=class extends pl{constructor(a){super();this.u=a;this.j=0;this.g=new Map}};async function mp(a,b){var c=10;return c<=0?Promise.reject(Error(`wfc bad input ${c} ${200}`)):b()?Promise.resolve():new Promise((d,e)=>{const f=a.setInterval(()=>{--c?b()&&(a.clearInterval(f),d()):(a.clearInterval(f),e(Error(`wfc timed out ${c}`)))},200)})};function np(a){const b=a.g.pc;return b!==null&&b!==0?b:a.g.pc=je(a.u)}function op(a){const b=a.g.wpc;return b!==null&&b!==""?b:a.g.wpc=Mn(a.u)}function pp(a,b){var c=new Kf;var d=np(a);c=gd(c,1,d);d=op(a);c=jd(c,2,d);c=gd(c,3,a.g.sd);return gd(c,7,Math.round(b||a.u.performance.now()))}async function qp(a){await mp(a.u,()=>!(!np(a)||!op(a)))}function rp(a){var b=N(sp);if(b.j){var c=b.A;a(c);b.g.psi=uc(c)}} 
function tp(a){vg(a.l,()=>{var b=pp(a);b=Tc(b,12,Lf,a.B);a.j&&!a.g.le.includes(3)&&(a.g.le.push(3),rg(a.i,b))},9)}function up(a){const b=new Gf;vg(a.l,()=>{Sc(b,2,a.A);gd(b,3,a.g.tar);var c=a.u;var d=new zf;var e=gp(c);d=Uc(d,1,e);e=yc(xf(wf(new yf,V(c)),Yi(c).clientHeight));d=Sc(d,2,e);c=yc(xf(wf(new yf,Yi(c).scrollWidth),Yi(c).scrollHeight));c=Sc(d,3,c);c=yc(c);Sc(b,4,c);c=a.i;d=pp(a);d=Tc(d,8,Lf,b);rg(c,d)},9)} 
async function vp(a){var b=N(sp);if(b.j&&!b.g.le.includes(1)){b.g.le.push(1);var c=b.u.performance.now();await qp(b);var d=new Cf;a=D(d,5,Ub(a),!1);d=xf(wf(new yf,Yi(b.u).scrollWidth),Yi(b.u).scrollHeight);a=Sc(a,2,d);d=xf(wf(new yf,V(b.u)),Yi(b.u).clientHeight);a=Sc(a,1,d);for(var e=d=b.u;d&&d!=d.parent;)d=d.parent,Qd(d)&&(e=d);a=jd(a,4,e.location.href);d=dp(b.u);d!==0&&(e=new Bf,d=A(e,1,y(d)),Sc(a,3,d));d=b.i;c=pp(b,c);c=Tc(c,4,Lf,a);rg(d,c);tp(b);up(b)}} 
async function wp(a,b,c){if(a.j&&c.length&&!a.g.lgdp.includes(Number(b))){a.g.lgdp.push(Number(b));var d=a.u.performance.now();await qp(a);var e=a.i;a=pp(a,d);d=new Af;b=D(d,1,y(b),0);c=Kc(b,2,c,Zb);c=Tc(a,9,Lf,c);rg(e,c)}}async function xp(a,b){await qp(a);var c=a.i;a=pp(a);a=gd(a,3,1);b=Tc(a,10,Lf,b);rg(c,b)} 
var sp=class{constructor(a,b){this.u=ue()||window;this.l=b??new lp(this.u);this.i=a??new xg(2,gg(),100,100,!0,this.l);this.g=jl(el(),33,()=>{const c=U(ci);return{sd:c,ssp:c>0&&Vd()<1/c,pc:null,wpc:null,cu:null,le:[],lgdp:[],psi:null,tar:0,cc:null}})}get j(){return this.g.ssp}get A(){return xk(1178,()=>kd(Ff,sc(this.g.psi||[])))||new Ff}get B(){return xk(1227,()=>kd(Hf,sc(this.g.cc||[])))||new Hf}};function yp(){var a=window;return p.google_adtest==="on"||p.google_adbreak_test==="on"||a.location.host.endsWith("h5games.usercontent.goog")||a.location.host==="gamesnacks.com"?a.document.querySelector('meta[name="h5-games-eids"]')?.getAttribute("content")?.split(",").map(b=>Math.floor(Number(b))).filter(b=>!isNaN(b)&&b>0)||[]:[]};function zp(a,b){return a instanceof HTMLScriptElement&&b.test(a.src)?0:1}function Ap(a){var b=O.document;if(b.currentScript)return zp(b.currentScript,a);for(const c of b.scripts)if(zp(c,a)===0)return 0;return 1};function Bp(a,b){return{[3]:{[55]:()=>a===0,[23]:c=>Rm(O,Number(c)),[24]:c=>Vm(Number(c)),[61]:()=>I(b,6),[63]:()=>I(b,6)||K(b,8)===".google.ch"},[4]:{},[5]:{[6]:()=>K(b,15)}}};function Cp(a=p){return a.ggeac||(a.ggeac={})};function Dp(a,b=document){return!!b.featurePolicy?.features().includes(a)}function Ep(a,b=document){return!!b.featurePolicy?.allowedFeatures().includes(a)}function Fp(a,b=navigator){try{return!!b.protectedAudience?.queryFeatureSupport?.(a)}catch(c){return!1}};function Gp(a,b){try{const d=a.split(".");a=p;let e=0,f;for(;a!=null&&e<d.length;e++)f=a,a=a[d[e]],typeof a==="function"&&(a=f[d[e]]());var c=a;if(typeof c===b)return c}catch{}} 
var Hp={[3]:{[8]:a=>{try{return ia(a)!=null}catch{}},[9]:a=>{try{var b=ia(a)}catch{return}if(a=typeof b==="function")b=b&&b.toString&&b.toString(),a=typeof b==="string"&&b.indexOf("[native code]")!=-1;return a},[10]:()=>window===window.top,[6]:a=>Qa(N(bh).g(),Number(a)),[27]:a=>{a=Gp(a,"boolean");return a!==void 0?a:void 0},[60]:a=>{try{return!!p.document.querySelector(a)}catch{}},[80]:a=>{try{return!!p.matchMedia(a).matches}catch{}},[69]:a=>Dp(a,p.document),[70]:a=>Ep(a,p.document),[79]:a=>Fp(a, 
p.navigator)},[4]:{[3]:()=>be(),[6]:a=>{a=Gp(a,"number");return a!==void 0?a:void 0}},[5]:{[2]:()=>window.location.href,[3]:()=>{try{return window.top.location.hash}catch{return""}},[4]:a=>{a=Gp(a,"string");return a!==void 0?a:void 0},[12]:a=>{try{const b=Gp(a,"string");if(b!==void 0)return atob(b)}catch(b){}}}};var Ip=class extends M{getId(){return ad(this,1)}};function Jp(a){return F(a,Ip,2,C())}var Kp=class extends M{};var Lp=class extends M{};var Mp=class extends M{g(){return Wc(this,2)??0}i(){return Wc(this,4)??0}j(){return I(this,3)}};var Np=class extends M{};function Op(a,b){const c=new Map;for(const [f,g]of a[1].entries()){var d=f,e=g;const {gb:h,ab:k,bb:l}=e[e.length-1];c.set(d,h+k*l)}for(const f of b)for(const g of F(f,Kp,2,C()))if(Jp(g).length!==0){b=ac(Ac(g,8))??0;!L(g,4)||L(g,13)||L(g,14)||(b=c.get(L(g,4))??0,d=(ac(Ac(g,1))??0)*Jp(g).length,c.set(L(g,4),b+d));d=[];for(e=0;e<Jp(g).length;e++){const h={gb:b,ab:ac(Ac(g,1))??0,bb:Jp(g).length,Db:e,ga:L(f,1),oa:g,R:Jp(g)[e]};d.push(h)}Pp(a[2],L(g,10),d)||Pp(a[1],L(g,4),d)||Pp(a[0],Jp(g)[0].getId(),d)}return a} 
function Pp(a,b,c){if(!b)return!1;a.has(b)||a.set(b,[]);a.get(b).push(...c);return!0};function Qp(a=Vd()){return b=>Xd(`${b} + ${a}`)%1E3};const Rp=[12,13,20];function Sp(a,b){var c=N(Dg).M;const d=kf(E(b.oa,cf,3),c);if(!d.success)return Bg(a.L,E(b.oa,cf,3),b.ga,b.R.getId(),d),!1;if(!d.value)return!1;c=kf(E(b.R,cf,3),c);return c.success?c.value?!0:!1:(Bg(a.L,E(b.R,cf,3),b.ga,b.R.getId(),c),!1)}function Tp(a,b,c){a.g[c]||(a.g[c]=[]);a=a.g[c];a.includes(b)||a.push(b)} 
function Up(a,b,c,d){const e=[];var f;if(f=b!==9)a.l[b]?f=!0:(a.l[b]=!0,f=!1);if(f)return zg(a.L,b,c,e,[],4),e;f=Rp.includes(b);const g=[],h=[];for(const m of[0,1,2])for(const [r,x]of a.ka[m].entries()){var k=r,l=x;const t=new Qf;var n=l.filter(v=>v.ga===b&&a.i[v.R.getId()]&&Sp(a,v));if(n.length)for(const v of n)h.push(v.R);else if(!a.xa&&(m===2?(n=d[1],Lc(t,2,Rf,y(k))):n=d[0],k=n?.(String(k))??(m===2&&L(l[0].oa,11)===1?void 0:d[0](String(k))),k!==void 0)){for(const v of l){if(v.ga!==b)continue;l= 
k-v.gb;n=v.ab;const J=v.bb,P=v.Db;l<0||l>=n*J||l%J!==P||!Sp(a,v)||(l=L(v.oa,13),l!==0&&l!==void 0&&(n=a.j[String(l)],n!==void 0&&n!==v.R.getId()?Ag(a.L,a.j[String(l)],v.R.getId(),l):a.j[String(l)]=v.R.getId()),h.push(v.R))}Pc(t,Rf)!==0&&(D(t,3,z(k),0),g.push(t))}}for(const m of h)d=m.getId(),e.push(d),Tp(a,d,f?4:c),Sg(F(m,nf,2,C()),f?Vg():[c],a.L,d);zg(a.L,b,c,e,g,1);return e}function Vp(a,b){b=b.map(c=>new Lp(c)).filter(c=>!Rp.includes(L(c,1)));a.ka=Op(a.ka,b)} 
function Wp(a,b){Q(1,c=>{a.i[c]=!0},b);Q(2,(c,d,e)=>Up(a,c,d,e),b);Q(3,c=>(a.g[c]||[]).concat(a.g[4]),b);Q(12,c=>void Vp(a,c),b);Q(16,(c,d)=>void Tp(a,c,d),b)}var Xp=class{constructor(a,b,c,{xa:d=!1,Ac:e=[]}={}){this.ka=a;this.L=c;this.l={};this.xa=d;this.g={[b]:[],[4]:[]};this.i={};this.j={};if(a=Je()){a=a.split(",")||[];for(const f of a)(a=Number(f))&&(this.i[a]=!0)}for(const f of e)this.i[f]=!0}};function Yp(a,b){a.g=Xg(14,b,()=>{})}class Zp{constructor(){this.g=()=>{}}}function $p(a){N(Zp).g(a)};function aq({xb:a,M:b,config:c,pb:d=Cp(),qb:e=0,L:f=new Cg(E(a,Mp,5)?.g()??0,E(a,Mp,5)?.i()??0,E(a,Mp,5)?.j()??!1),ka:g=Op({[0]:new Map,[1]:new Map,[2]:new Map},F(a,Lp,2,C(vb)))}){d.hasOwnProperty("init-done")?(Xg(12,d,()=>{})(F(a,Lp,2,C()).map(h=>uc(h))),Xg(13,d,()=>{})(F(a,nf,1,C()).map(h=>uc(h)),e),b&&Xg(14,d,()=>{})(b),bq(e,d)):(Wp(new Xp(g,e,f,c),d),Yg(d),Zg(d),$g(d),bq(e,d),Sg(F(a,nf,1,C(vb)),[e],f,void 0,!0),Eg=Eg||!(!c||!c.Bb),$p(Hp),b&&$p(b))} 
function bq(a,b=Cp()){ah(N(bh),b,a);cq(b,a);Yp(N(Zp),b);N(ge).B()}function cq(a,b){const c=N(ge);c.i=(d,e)=>Xg(5,a,()=>!1)(d,e,b);c.l=(d,e)=>Xg(6,a,()=>0)(d,e,b);c.g=(d,e)=>Xg(7,a,()=>"")(d,e,b);c.A=(d,e)=>Xg(8,a,()=>[])(d,e,b);c.j=(d,e)=>Xg(17,a,()=>[])(d,e,b);c.B=()=>{Xg(15,a,()=>{})(b)}};function dq(a,b){b={[0]:Qp(je(b).toString())};b=N(bh).l(a,b);fh.ea(1085,wp(N(sp),a,b))}function eq(a,b,c){var d=X(a);if(d.plle)bq(1,Cp(a));else{d.plle=!0;d=E(b,Np,12);var e=I(b,9);aq({xb:d,M:Bp(c,b),config:{xa:e&&!!a.google_disable_experiments,Bb:e},pb:Cp(a),qb:1});if(c=K(b,15))c=Number(c),N(bh).j(c);for(const f of Ec(b,19,$b,C()))N(bh).i(f);dq(12,a);dq(10,a);a=Rd(a)||a;rn(a.location,"google_mc_lab")&&N(bh).i(44738307)}};function fq(a){(T(bi)?uk:tk).Ca(b=>{b.shv=String(a);b.mjsv=Ln({ua:gg(),Ba:a});const c=N(bh).g(),d=yp();b.eid=c.concat(d).join(",")})}function gq(a,b){const c=b?.g();b=c?.g()||K(a,2);a=c?.i()?I(c,4):I(a,6);fq(b);wb(Jm,Cb);Jm=a};var hq={google_pause_ad_requests:!0,google_user_agent_client_hint:!0};var iq=class extends M{g(){return E(this,Il,2)}i(){return I(this,3)}};var jq=class extends M{g(){return K(this,1)}i(){return L(this,2)}};var kq=class extends M{l(){return K(this,1)}g(){return E(this,jq,2)}A(){return I(this,3)}i(){return I(this,4)}j(){return E(this,Gl,5)}};var lq=class extends M{i(){return E(this,iq,2)}g(){return K(this,4)}j(){return L(this,5)}};function cn(a){return fd(a,kq,27,mq)}var oq=class extends M{i(){return fd(this,iq,13,nq)}j(){return Dc(this,iq,Oc(this,nq,13))!==void 0}g(){return fd(this,lq,14,nq)}l(){return Dc(this,lq,Oc(this,nq,14))!==void 0}},nq=[13,14],mq=[27,28];function pq(a){var b=T(bi)?uk:tk;try{if(wb(a,Bb),a.length>0)return new oq(JSON.parse(a))}catch(c){b.G(838,c instanceof Error?c:Error(String(c)))}return new oq};function qq(a,b){if(I(b,22))return 7;if(I(b,16))return 6;const c=T(qi)?cn(b)?.g()?.g():b.g()?.g();b=(T(qi)?cn(b)?.g()?.i():b.g()?.j())??0;a=c===a;switch(b){case 1:return a?9:8;case 2:return a?11:10;case 3:return a?13:12}return 1}function rq(a,b,c){b.google_loader_used!=="sd"&&(b.abgtt=qq(a,c))};function sq(a,b){var c=new tq;try{if(Ia()&&b.length){var d=a.createElement("link");if(d.relList?.supports("compression-dictionary")){var e=Nd`https://pagead2.googlesyndication.com/pagead/managed/dict/${b}/${"adsbygoogle"}`;if(e instanceof Dd)d.href=Fd(e).toString(),d.rel="compression-dictionary";else{if(Id.indexOf("compression-dictionary")===-1)throw Error('TrustedResourceUrl href attribute required with rel="compression-dictionary"');var f=Gd.test(e)?e:void 0;f!==void 0&&(d.href=f,d.rel="compression-dictionary")}a.head.appendChild(d)}}}catch(g){c.sb.G(1296, 
g instanceof Error?g:Error(String(g)))}};var tq=class{constructor(){this.sb=T(bi)?uk:tk}};var uq=a=>{sd(window,"message",b=>{let c;try{c=JSON.parse(b.data)}catch(d){return}!c||c.googMsgType!=="sc-cnf"||a(c,b)})};function vq(a,b){return b==null?`&${a}=null`:`&${a}=${Math.floor(b)}`}function wq(a,b){return`&${a}=${b.toFixed(3)}`}function xq(){const a=new Set,b=Ok();try{if(!b)return a;const c=b.pubads();for(const d of c.getSlots())a.add(d.getSlotId().getDomId())}catch{}return a}function yq(a){a=a.id;return a!=null&&(xq().has(a)||a.startsWith("google_ads_iframe_")||a.startsWith("aswift"))} 
function zq(a,b,c){if(!a.sources)return!1;switch(Aq(a)){case 2:const d=Bq(a);if(d)return c.some(f=>Cq(d,f));break;case 1:const e=Dq(a);if(e)return b.some(f=>Cq(e,f))}return!1}function Aq(a){if(!a.sources)return 0;a=a.sources.filter(b=>b.previousRect&&b.currentRect);if(a.length>=1){a=a[0];if(a.previousRect.top<a.currentRect.top)return 2;if(a.previousRect.top>a.currentRect.top)return 1}return 0}function Dq(a){return Eq(a,b=>b.currentRect)}function Bq(a){return Eq(a,b=>b.previousRect)} 
function Eq(a,b){return a.sources.reduce((c,d)=>{d=b(d);return c?d&&d.width*d.height!==0?d.top<c.top?d:c:c:d},null)}function Cq(a,b){const c=Math.min(a.right,b.right)-Math.max(a.left,b.left);a=Math.min(a.bottom,b.bottom)-Math.max(a.top,b.top);return c<=0||a<=0?!1:c*a*100/((b.right-b.left)*(b.bottom-b.top))>=50} 
function Fq(){const a=Array.from(document.getElementsByTagName("iframe")).filter(yq),b=[...xq()].map(c=>document.getElementById(c)).filter(c=>c!==null);Gq=window.scrollX;Hq=window.scrollY;return Iq=[...a,...b].map(c=>c.getBoundingClientRect())} 
function Jq(){var a=new Kq;if(T(Ji)){var b=window;if(!b.google_plmetrics&&window.PerformanceObserver){b.google_plmetrics=!0;b=["layout-shift","largest-contentful-paint","first-input","longtask"];a.jb.ub&&b.push("event");for(const c of b)b={type:c,buffered:!0},c==="event"&&(b.durationThreshold=40),Lq(a).observe(b);Mq(a)}}} 
function Nq(a,b){const c=Gq!==window.scrollX||Hq!==window.scrollY?[]:Iq,d=Fq();for(const e of b.getEntries())switch(b=e.entryType,b){case "layout-shift":Oq(a,e,c,d);break;case "largest-contentful-paint":b=e;a.Ja=Math.floor(b.renderTime||b.loadTime);a.Ia=b.size;break;case "first-input":b=e;a.Fa=Number((b.processingStart-b.startTime).toFixed(3));a.Ga=!0;a.g.some(f=>f.entries.some(g=>e.duration===g.duration&&e.startTime===g.startTime))||Pq(a,e);break;case "longtask":b=Math.max(0,e.duration-50);a.B+= 
b;a.P=Math.max(a.P,b);a.ra+=1;break;case "event":Pq(a,e);break;default:Pb(b,void 0)}}function Lq(a){a.L||(a.L=new PerformanceObserver(Sj(640,b=>{Nq(a,b)})));return a.L} 
function Mq(a){const b=Sj(641,()=>{var d=document;(d.prerendering?3:{visible:1,hidden:2,prerender:3,preview:4,unloaded:5}[d.visibilityState||d.webkitVisibilityState||d.mozVisibilityState||""]||0)===2&&Qq(a)}),c=Sj(641,()=>void Qq(a));document.addEventListener("visibilitychange",b);document.addEventListener("pagehide",c);a.Ea=()=>{document.removeEventListener("visibilitychange",b);document.removeEventListener("pagehide",c);Lq(a).disconnect()}} 
function Qq(a){if(!a.Ma){a.Ma=!0;Lq(a).takeRecords();var b="https://pagead2.googlesyndication.com/pagead/gen_204?id=plmetrics";window.LayoutShift&&(b+=wq("cls",a.F),b+=wq("mls",a.ba),b+=vq("nls",a.qa),window.LayoutShiftAttribution&&(b+=wq("cas",a.A),b+=vq("nas",a.La),b+=wq("was",a.Qa)),b+=wq("wls",a.sa),b+=wq("tls",a.Pa));window.LargestContentfulPaint&&(b+=vq("lcp",a.Ja),b+=vq("lcps",a.Ia));window.PerformanceEventTiming&&a.Ga&&(b+=vq("fid",a.Fa));window.PerformanceLongTaskTiming&&(b+=vq("cbt",a.B), 
b+=vq("mbt",a.P),b+=vq("nlt",a.ra));let d=0;for(var c of document.getElementsByTagName("iframe"))yq(c)&&d++;b+=vq("nif",d);b+=vq("ifi",ye(window));c=N(bh).g();b+=`&${"eid"}=${encodeURIComponent(c.join())}`;b+=`&${"top"}=${p===p.top?1:0}`;b+=a.Oa?`&${"qqid"}=${encodeURIComponent(a.Oa)}`:vq("pvsid",je(p));window.googletag&&(b+="&gpt=1");c=Math.min(a.g.length-1,Math.floor((a.L?a.Ha:performance.interactionCount||0)/50));c>=0&&(c=a.g[c].latency,c>=0&&(b+=vq("inp",c)));window.fetch(b,{keepalive:!0,credentials:"include", 
redirect:"follow",method:"get",mode:"no-cors"});a.Ea()}}function Oq(a,b,c,d){if(!b.hadRecentInput){a.F+=Number(b.value);Number(b.value)>a.ba&&(a.ba=Number(b.value));a.qa+=1;if(c=zq(b,c,d))a.A+=b.value,a.La++;if(b.startTime-a.Ka>5E3||b.startTime-a.Na>1E3)a.Ka=b.startTime,a.i=0,a.j=0;a.Na=b.startTime;a.i+=b.value;c&&(a.j+=b.value);a.i>a.sa&&(a.sa=a.i,a.Qa=a.j,a.Pa=b.startTime+b.duration)}} 
function Pq(a,b){Rq(a,b);const c=a.g[a.g.length-1],d=a.I[b.interactionId];if(d||a.g.length<10||b.duration>c.latency)d?(d.entries.push(b),d.latency=Math.max(d.latency,b.duration)):(b={id:b.interactionId,latency:b.duration,entries:[b]},a.I[b.id]=b,a.g.push(b)),a.g.sort((e,f)=>f.latency-e.latency),a.g.splice(10).forEach(e=>{delete a.I[e.id]})}function Rq(a,b){b.interactionId&&(a.pa=Math.min(a.pa,b.interactionId),a.l=Math.max(a.l,b.interactionId),a.Ha=a.l?(a.l-a.pa)/7+1:0)} 
var Kq=class{constructor(){this.j=this.i=this.qa=this.ba=this.F=0;this.Na=this.Ka=Number.NEGATIVE_INFINITY;this.g=[];this.I={};this.Ha=0;this.pa=Infinity;this.Fa=this.Ia=this.Ja=this.La=this.Qa=this.A=this.Pa=this.sa=this.l=0;this.Ga=!1;this.ra=this.P=this.B=0;this.L=null;this.Ma=!1;this.Ea=()=>{};const a=document.querySelector("[data-google-query-id]");this.Oa=a?a.getAttribute("data-google-query-id"):null;this.jb={ub:!0}}},Gq,Hq,Iq=[];let Sq=null;const Tq=[],Uq=new Map;let Vq=-1;function Wq(a){return sj.test(a.className)&&a.dataset.adsbygoogleStatus!=="done"}function Xq(a,b,c){a.dataset.adsbygoogleStatus="done";Yq(a,b,c)} 
function Yq(a,b,c){var d=window;d.google_spfd||(d.google_spfd=cp);var e=b.google_reactive_ads_config;e||cp(a,b,d,c);eo(d,b);if(!Zq(a,b,d)){if(e){e=e.page_level_pubvars||{};if(X(O).page_contains_reactive_tag&&!X(O).allow_second_reactive_tag){if(e.pltais){Mm(!1);return}throw new W("Only one 'enable_page_level_ads' allowed per page.");}X(O).page_contains_reactive_tag=!0;Mm(e.google_pgb_reactive===7)}b.google_unique_id=xe(d);Wd(hq,(f,g)=>{b[g]=b[g]||d[g]});b.google_loader_used!=="sd"&&(b.google_loader_used= 
"aa");b.google_reactive_tag_first=(X(O).first_tag_on_page||0)===1;xk(164,()=>{jo(d,b,a,c)})}} 
function Zq(a,b,c){var d=b.google_reactive_ads_config,e=typeof a.className==="string"&&RegExp("(\\W|^)adsbygoogle-noablate(\\W|$)").test(a.className),f=Km(c);if(f&&f.Ra&&b.google_adtest!=="on"&&!e){e=bj(a,c);const g=Yi(c).clientHeight;e=g===0?null:e/g;if(!f.ta||f.ta&&(e||0)>=f.ta)return a.className+=" adsbygoogle-ablated-ad-slot",c=c.google_sv_map=c.google_sv_map||{},d=ka(a),b.google_element_uid=d,c[b.google_element_uid]=b,a.setAttribute("google_element_uid",String(d)),f.Mb==="slot"&&($d(a.getAttribute("width"))!== 
null&&a.setAttribute("width","0"),$d(a.getAttribute("height"))!==null&&a.setAttribute("height","0"),a.style.width="0px",a.style.height="0px"),!0}if((f=Ud(a,c))&&f.display==="none"&&!(b.google_adtest==="on"||b.google_reactive_ad_format>0||d))return c.document.createComment&&a.appendChild(c.document.createComment("No ad requested because of display:none on the adsbygoogle tag")),!0;a=b.google_pgb_reactive==null||b.google_pgb_reactive===3;return b.google_reactive_ad_format!==1&&b.google_reactive_ad_format!== 
8||!a?!1:(p.console&&p.console.warn("Adsbygoogle tag with data-reactive-ad-format="+String(b.google_reactive_ad_format)+" is deprecated. Check out page-level ads at https://www.google.com/adsense"),!0)}function $q(a){var b=document.getElementsByTagName("INS");for(let d=0,e=b[d];d<b.length;e=b[++d]){var c=e;if(Wq(c)&&c.dataset.adsbygoogleStatus!=="reserved"&&(!a||e.id===a))return e}return null} 
function ar(a,b,c){if(a&&"shift"in a){rp(e=>{bd(Ef(e),2)||(e=Ef(e),hd(e,2))});for(var d=20;a.length>0&&d>0;){try{br(a.shift(),b,c)}catch(e){setTimeout(()=>{throw e;})}--d}}}function cr(){const a=Td("INS");a.className="adsbygoogle";a.className+=" adsbygoogle-noablate";ce(a);return a} 
function dr(a,b){const c={},d=bn(a.google_ad_client,b);Wd(Xi,(g,h)=>{a.enable_page_level_ads===!1?c[h]=!1:a.hasOwnProperty(h)?c[h]=a[h]:d.includes(g)&&(c[h]=!1)});ja(a.enable_page_level_ads)&&(c.page_level_pubvars=a.enable_page_level_ads);const e=cr();ke.body.appendChild(e);const f={google_reactive_ads_config:c,google_ad_client:a.google_ad_client};f.google_pause_ad_requests=!!X(O).pause_ad_requests;rq(er(a)||Mn(O),f,b);Xq(e,f,b);rp(g=>{bd(Ef(g),6)||(g=Ef(g),hd(g,6))})} 
function fr(a,b){Cn(p).wasPlaTagProcessed=!0;const c=()=>{dr(a,b)},d=p.document;if(d.body||d.readyState==="complete"||d.readyState==="interactive")dr(a,b);else{const e=rd(yk(191,c));sd(d,"DOMContentLoaded",e);p.MutationObserver!=null&&(new p.MutationObserver((f,g)=>{d.body&&(e(),g.disconnect())})).observe(d,{childList:!0,subtree:!0})}} 
function br(a,b,c){const d={};xk(165,()=>{gr(a,d,b,c)},e=>{e.client=e.client||d.google_ad_client||a.google_ad_client;e.slotname=e.slotname||d.google_ad_slot;e.tag_origin=e.tag_origin||d.google_tag_origin})}function hr(a){delete a.google_checked_head;Wd(a,(b,c)=>{rj[c]||(delete a[c],b=c.replace("google","data").replace(/_/g,"-"),p.console.warn(`AdSense head tag doesn't support ${b} attribute.`))})} 
function ir(a,b){var c=O.document.querySelector('script[src*="/pagead/js/adsbygoogle.js?client="]:not([data-checked-head])')||O.document.querySelector('script[src*="/pagead/js/adsbygoogle_direct.js?client="]:not([data-checked-head])')||O.document.querySelector('script[src*="/pagead/js/adsbygoogle.js"][data-ad-client]:not([data-checked-head])')||O.document.querySelector('script[src*="/pagead/js/adsbygoogle_direct.js"][data-ad-client]:not([data-checked-head])');if(c){c.setAttribute("data-checked-head", 
"true");var d=X(window);if(d.head_tag_slot_vars)jr(c);else{rp(g=>{g=Ef(g);D(g,7,Ub(!0),!1)});var e={};ap(c,e);hr(e);var f=zd(e);d.head_tag_slot_vars=f;c={google_ad_client:e.google_ad_client,enable_page_level_ads:e};e.google_ad_intent_query&&(c.enable_ad_intent_display_ads=!0);e.google_overlays==="bottom"&&(c.overlays={bottom:!0});delete e.google_overlays;O.adsbygoogle||(O.adsbygoogle=[]);d=O.adsbygoogle;d.loaded?d.push(c):d.splice&&d.splice(0,0,c);b=T(Oi)?cn(b)?.i():b.i()?.i();e.google_adbreak_test|| 
b?kr(f,a):uq(()=>{kr(f,a)})}}}function jr(a){const b=X(window).head_tag_slot_vars,c=a.getAttribute("src")||"";if((a=Md(c,"client")||a.getAttribute("data-ad-client")||"")&&a!==b.google_ad_client)throw new W("Warning: Do not add multiple property codes with AdSense tag to avoid seeing unexpected behavior. These codes were found on the page "+a+", "+b.google_ad_client);} 
function lr(a){if(typeof a==="object"&&a!=null){if(typeof a.type==="string")return 2;if(typeof a.sound==="string"||typeof a.preloadAdBreaks==="string"||typeof a.h5AdsConfig==="object")return 3}return 0} 
function gr(a,b,c,d){if(a==null)throw new W("push() called with no parameters.");rp(f=>{bd(Ef(f),3)||(f=Ef(f),hd(f,3))});var e=lr(a);if(e!==0)if(d=Nm(),d.first_slotcar_request_processing_time||(d.first_slotcar_request_processing_time=Date.now(),d.adsbygoogle_execution_start_time=hh),Sq==null)mr(a),Tq.push(a);else if(e===3){const f=Sq;xk(787,()=>{f.handleAdConfig(a)})}else zk(730,Sq.handleAdBreak(a));else{hh=(new Date).getTime();fo(c,d,er(a));nr();a:{if(!a.enable_ad_intent_display_ads&&a.enable_page_level_ads!= 
void 0){if(typeof a.google_ad_client==="string"){e=!0;break a}throw new W("'google_ad_client' is missing from the tag config.");}e=!1}if(e)rp(f=>{bd(Ef(f),4)||(f=Ef(f),hd(f,4))}),or(a,d);else if((e=a.params)&&Wd(e,(f,g)=>{b[g]=f}),b.google_ad_output==="js")console.warn("Ads with google_ad_output='js' have been deprecated and no longer work. Contact your AdSense account manager or switch to standard AdSense ads.");else{rq(er(a)||Mn(O),b,d);e=pr(b,a);ap(e,b);c=X(p).head_tag_slot_vars||{};Wd(c,(f,g)=> 
{b.hasOwnProperty(g)||(b[g]=f)});if(e.hasAttribute("data-require-head")&&!X(p).head_tag_slot_vars)throw new W("AdSense head tag is missing. AdSense body tags don't work without the head tag. You can copy the head tag from your account on https://adsense.com.");if(!b.google_ad_client)throw new W("Ad client is missing from the slot.");if(c=(X(O).first_tag_on_page||0)===0&&Fn(b))rp(f=>{bd(Ef(f),5)||(f=Ef(f),hd(f,5))}),qr(c);(X(O).first_tag_on_page||0)===0&&(X(O).first_tag_on_page=2);b.google_pause_ad_requests= 
!!X(O).pause_ad_requests;Xq(e,b,d)}}}function er(a){return a.google_ad_client?a.google_ad_client:(a=a.params)&&a.google_ad_client?a.google_ad_client:""}function nr(){if(T(oi)){const a=Km(O);a&&a.Ra||Lm(O)}}function qr(a){le(()=>{Cn(p).wasPlaTagProcessed||p.adsbygoogle&&p.adsbygoogle.push(a)})}function or(a,b){(X(O).first_tag_on_page||0)===0&&(X(O).first_tag_on_page=1);if(a.tag_partner){var c=a.tag_partner;const d=X(p);d.tag_partners=d.tag_partners||[];d.tag_partners.push(c)}Gn(a,b);fr(a,b)} 
function pr(a,b){if(a.google_ad_format==="rewarded"){if(a.google_ad_slot==null)throw new W("Rewarded format does not have valid ad slot");if(a.google_ad_loaded_callback==null)throw new W("Rewarded format does not have ad loaded callback");a.google_reactive_ad_format=11;a.google_wrap_fullscreen_ad=!0;a.google_video_play_muted=!1;a.google_acr=a.google_ad_loaded_callback;delete a.google_ad_loaded_callback;delete a.google_ad_format}var c=!!a.google_wrap_fullscreen_ad;if(c)b=cr(),b.dataset.adsbygoogleStatus= 
"reserved",ke.documentElement.appendChild(b);else if(b=b.element){if(!Wq(b)&&(b.id?b=$q(b.id):b=null,!b))throw new W("'element' has already been filled.");if(!("innerHTML"in b))throw new W("'element' is not a good DOM element.");}else if(b=$q(),!b)throw new W("All 'ins' elements in the DOM with class=adsbygoogle already have ads in them.");if(c){c=O;try{const e=(c||window).document,f=e.compatMode=="CSS1Compat"?e.documentElement:e.body;var d=(new se(f.clientWidth,f.clientHeight)).round()}catch(e){d= 
new se(-12245933,-12245933)}a.google_ad_height=d.height;a.google_ad_width=d.width;a.fsapi=!0}return b}function rr(a){a={value:`${I(a,16)}`,host_v:`${I(a,22)}`,frequency:.01};Ak("new_abg_tag",a,.01)}function sr(a){el().S[hl(26)]=!!Number(a)} 
function tr(a){Number(a)?X(O).pause_ad_requests=!0:(X(O).pause_ad_requests=!1,a=()=>{if(!X(O).pause_ad_requests){var b={};let c;typeof window.CustomEvent==="function"?c=new CustomEvent("adsbygoogle-pub-unpause-ad-requests-event",b):(c=document.createEvent("CustomEvent"),c.initCustomEvent("adsbygoogle-pub-unpause-ad-requests-event",!!b.bubbles,!!b.cancelable,b.detail));O.dispatchEvent(c)}},p.setTimeout(a,0),p.setTimeout(a,1E3))} 
function ur(a){a&&a.call&&typeof a==="function"&&window.setTimeout(a,0)}function kr(a,b){const c={...xn()},d=U(Ii);[0,1].includes(d)&&(c.osttc=`${d}`);b=Bn(Od(b.Lb,new Map(Object.entries(c)))).then(e=>{Sq==null&&(e.init(a),Sq=e,vr(e))});zk(723,b);b.finally(()=>{Tq.length=0;Ak("slotcar",{event:"api_ld",time:Date.now()-hh,time_pr:Date.now()-Vq});xp(N(sp),If(23))})} 
function vr(a){for(const [c,d]of Uq){var b=c;const e=d;e!==-1&&(p.clearTimeout(e),Uq.delete(b))}for(b=0;b<Tq.length;b++){if(Uq.has(b))continue;const c=Tq[b],d=lr(c);xk(723,()=>{d===3?a.handleAdConfig(c):d===2&&zk(730,a.handleAdBreakBeforeReady(c))})}} 
function mr(a){var b=Tq.length;if(lr(a)===2&&a.type==="preroll"&&a.adBreakDone!=null){var c=a.adBreakDone;Vq===-1&&(Vq=Date.now());var d=p.setTimeout(()=>{try{c({breakType:"preroll",breakName:a.name,breakFormat:"preroll",breakStatus:"timeout"}),Uq.set(b,-1),Ak("slotcar",{event:"pr_to",source:"adsbygoogle"}),xp(N(sp),If(22))}catch(e){console.error("[Ad Placement API] adBreakDone callback threw an error:",e instanceof Error?e:Error(String(e)))}},U(Pi)*1E3);Uq.set(b,d)}};(function(a,b,c,d=()=>{}){(T(bi)?uk:tk).fb(Ck);xk(166,()=>{const e=new xg(2,a);try{$a(n=>{kk(e,1191,n)})}catch(n){}const f=pq(b);var g=wn(f);gq(f,g);d();re(16,[1,uc(f)]);var h=ue(te(O))||O,k=Ln({ua:a,Ba:K(f,2)});const l=c(k,f);k=O.document.currentScript===null?1:Ap(l.Nb);eq(h,f,k);T(Fi)&&sq(h.document,K(f,29));rp(n=>{var m=ad(n,1)+1;D(n,1,z(m),0);O.top===O&&(m=ad(n,2)+1,D(n,2,z(m),0));bd(Ef(n),1)||(n=Ef(n),hd(n,1))});zk(1086,vp(k===0));if(!Fa()||ua(Ka(),11)>=0){wk(T(Ri));mo();um(Qc(f,tn,26));try{Jq()}catch{}lo(); 
ir(l,f);h=window;k=h.adsbygoogle;if(!k||!k.loaded){rr(f);g={push:n=>{br(n,l,f)},loaded:!0,pageState:JSON.stringify(uc(g))};try{Object.defineProperty(g,"requestNonPersonalizedAds",{set:sr}),Object.defineProperty(g,"pauseAdRequests",{set:tr}),Object.defineProperty(g,"onload",{set:ur})}catch{}if(k)for(const n of["requestNonPersonalizedAds","pauseAdRequests"])k[n]!==void 0&&(g[n]=k[n]);ar(k,l,f);h.adsbygoogle=g;k&&(g.onload=k.onload)}}})})(gg(),typeof sttc==="undefined"?void 0:sttc,function(a,b){b=ad(b, 
1)>2012?`_fy${ad(b,1)}`:"";Nd`data:text/javascript,//show_ads_impl_preview.js`;return{Lb:Nd`https://pagead2.googlesyndication.com/pagead/managed/js/adsense/${a}/slotcar_library${b}.js`,Jb:Nd`https://pagead2.googlesyndication.com/pagead/managed/js/adsense/${a}/show_ads_impl${b}.js`,Ib:Nd`https://pagead2.googlesyndication.com/pagead/managed/js/adsense/${a}/show_ads_impl_with_ama${b}.js`,Nb:/^(?:https?:)?\/\/(?:pagead2\.googlesyndication\.com|securepubads\.g\.doubleclick\.net)\/pagead\/(?:js\/)?(?:show_ads|adsbygoogle(_direct)?)\.js(?:[?#].*)?$/}}); 
}).call(this,"[2021,\"r20250211\",\"r20190131\",null,null,null,null,\".google.co.jp\",null,null,null,[[[698926295,null,null,[1]],[null,619278254,null,[null,10]],[676894296,null,null,[1]],[null,1130,null,[null,100]],[null,1340,null,[null,0.2]],[null,1338,null,[null,0.3]],[null,1336,null,[null,1.2]],[null,1339,null,[null,0.3]],[null,1032,null,[null,200],[[[12,null,null,null,4,null,\"Android\",[\"navigator.userAgent\"]],[null,500]]]],[null,1224,null,[null,0.01]],[null,1346,null,[null,6]],[null,1347,null,[null,3]],[null,1343,null,[null,300]],[null,1263,null,[null,-1]],[null,1323,null,[null,-1]],[null,1265,null,[null,-1]],[null,1264,null,[null,-1]],[1267,null,null,[1]],[null,66,null,[null,-1]],[null,65,null,[null,-1]],[1241,null,null,[1]],[1300,null,null,[1]],[null,null,null,[null,null,null,[\"en\",\"de\",\"fr\",\"es\",\"ja\"]],null,1273],[null,null,null,[null,null,null,[\"44786015\",\"44786016\"]],null,1261],[1318,null,null,[1]],[1372,null,null,[1]],[null,1364,null,[null,300]],[1378,null,null,[1]],[null,null,null,[null,null,null,[\"1\",\"2\",\"3\",\"4\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"24\",\"29\",\"30\",\"34\"]],null,null,null,627094447],[null,null,622128249,[null,null,\"#FFFFFF\"]],[null,null,622128250,[null,null,\"#1A73E8\"]],[null,null,null,[null,null,null,[\"33\",\"38\"]],null,null,null,641845510],[686023322,null,null,[1]],[622128248,null,null,[]],[681379804,null,null,[1]],[null,null,589752731,[null,null,\"#FFFFFF\"]],[null,null,589752730,[null,null,\"#1A73E8\"]],[null,null,null,[null,null,null,[\"29_18\",\"30_19\"]],null,null,null,635821288],[718840371,null,null,[1]],[null,null,null,[null,null,null,[\"29_5\",\"30_6\"]],null,null,null,636146137],[636570127,null,null,[1]],[null,null,null,[null,null,null,[\"1\",\"2\",\"4\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"24\",\"29\",\"30\",\"34\"]],null,null,null,627094446],[null,652486359,null,[null,3]],[null,626062006,null,[null,670]],[null,688905693,null,[null,2]],[null,666400580,null,[null,22]],[null,null,null,[null,null,null,[\"\",\"ar\",\"bn\",\"en\",\"es\",\"fr\",\"hi\",\"id\",\"ja\",\"ko\",\"mr\",\"pt\",\"ru\",\"sr\",\"te\",\"th\",\"tr\",\"uk\",\"vi\",\"zh\"]],null,712458671],[null,687270738,null,[null,500]],[null,null,null,[],null,null,null,683929765],[655991266,null,null,[1]],[686111728,null,null,[1]],[null,643258048,null,[null,0.15]],[null,643258049,null,[null,0.33938]],[null,618163195,null,[null,15000]],[null,624950166,null,[null,15000]],[null,623405755,null,[null,300]],[null,508040914,null,[null,500]],[null,547455356,null,[null,49]],[null,650548030,null,[null,2]],[null,650548032,null,[null,300]],[null,650548031,null,[null,1]],[null,655966487,null,[null,300]],[null,655966486,null,[null,250]],[null,469675170,null,[null,60000]],[711741274,null,null,[]],[null,684147713,null,[null,-1]],[null,684147711,null,[null,-1]],[null,684147712,null,[null,-1]],[45675855,null,null,[1]],[45669105,null,null,[1]],[45676172,null,null,[1]],[45675638,null,null,[1]],[45674344,null,null,[1]],[45664474,null,null,[1]],[45674084,null,null,[1]],[678806782,null,null,[1]],[570863962,null,null,[1]],[null,null,570879859,[null,null,\"control_1\\\\.\\\\d\"]],[null,570863961,null,[null,50]],[570879858,null,null,[1]],[null,1085,null,[null,5]],[null,63,null,[null,30]],[null,1080,null,[null,5]],[10016,null,null,[1]],[null,1027,null,[null,10]],[null,57,null,[null,120]],[null,1079,null,[null,5]],[null,1050,null,[null,30]],[null,58,null,[null,120]],[715572365,null,null,[1]],[715572366,null,null,[1]],[555237685,null,null,[1]],[45460956,null,null,[]],[45414947,null,null,[1]],[null,472785970,null,[null,500]],[null,629808663,null,[null,100]],[null,550718588,null,[null,250]],[null,624290870,null,[null,50]],[null,null,null,[null,null,null,[\"AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ==\",\"Amm8\/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq\/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ==\",\"A9wSqI5i0iwGdf6L1CERNdmsTPgVu44ewj8QxTBYgsv1LCPUVF7YmWOvTappqB1139jAymxUW\/RO8zmMqo4zlAAAAACNeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiRmxlZGdlQmlkZGluZ0FuZEF1Y3Rpb25TZXJ2ZXIiLCJleHBpcnkiOjE3MzY4MTI4MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9\",\"A+d7vJfYtay4OUbdtRPZA3y7bKQLsxaMEPmxgfhBGqKXNrdkCQeJlUwqa6EBbSfjwFtJWTrWIioXeMW+y8bWAgQAAACTeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiRmxlZGdlQmlkZGluZ0FuZEF1Y3Rpb25TZXJ2ZXIiLCJleHBpcnkiOjE3MzY4MTI4MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9\"]],null,1934],[485990406,null,null,[]]],[[12,[[10,[[31061690],[31061691,[[83,null,null,[1]],[84,null,null,[1]]]]],null,59],[40,[[95340252],[95340253,[[662101537,null,null,[1]]]]],[4,null,9,null,null,null,null,[\"LayoutShift\"]],71,null,null,null,800,null,null,null,null,null,5],[40,[[95340254],[95340255,[[662101539,null,null,[1]]]]],[4,null,9,null,null,null,null,[\"LayoutShift\"]],71,null,null,null,800,null,null,null,null,null,5]]],[13,[[500,[[31061692],[31061693,[[77,null,null,[1]],[78,null,null,[1]],[80,null,null,[1]],[76,null,null,[1]]]]],[4,null,6,null,null,null,null,[\"31061691\"]]]]],[10,[[50,[[31067422],[31067423,[[null,1032,null,[]]]]],[3,[[4,null,8,null,null,null,null,[\"gmaSdk.getQueryInfo\"]],[4,null,8,null,null,null,null,[\"webkit.messageHandlers.getGmaQueryInfo.postMessage\"]],[4,null,8,null,null,null,null,[\"webkit.messageHandlers.getGmaSig.postMessage\"]]]],69],[null,[[31081539],[31081540,[[711741274,null,null,[1]]]]]],[10,[[31083552],[44776368]],[3,[[4,null,8,null,null,null,null,[\"gmaSdk.getQueryInfo\"]],[4,null,8,null,null,null,null,[\"webkit.messageHandlers.getGmaQueryInfo.postMessage\"]],[4,null,8,null,null,null,null,[\"webkit.messageHandlers.getGmaSig.postMessage\"]]]],69],[10,[[31084127],[31084128]]],[1,[[31089421],[31089422,[[676460084,null,null,[1]]]]],null,139,null,null,null,998,null,null,null,null,null,8],[1,[[31089423],[31089424]],[4,null,61],139,null,null,null,998,null,null,null,null,null,8],[1,[[31089628],[31089629,[[710737579,null,null,[1]]]]]],[50,[[31089910],[31089911,[[713788640,null,null,[1]]]]]],[null,[[31090148],[31090149,[[675298507,null,null,[1]]]]]],[10,[[31090261],[31090262,[[45675667,null,null,[1]]]]]],[10,[[31090340],[31090341,[[682658313,null,null,[1]]]]]],[100,[[31090351],[31090352,[[-1401403511,null,null,[1]]]]]],[10,[[31090353],[31090354,[[1290,null,null,[1]]]]]],[1000,[[31090415,[[null,null,14,[null,null,\"31090415\"]]],[6,null,null,null,6,null,\"31090415\"]]],[4,null,55],63,null,null,null,null,null,null,null,null,2],[1000,[[31090416,[[null,null,14,[null,null,\"31090416\"]]],[6,null,null,null,6,null,\"31090416\"]]],[4,null,55],63,null,null,null,null,null,null,null,null,2],[1000,[[31090453,[[null,null,14,[null,null,\"31090453\"]]],[6,null,null,null,6,null,\"31090453\"]]],[4,null,55],63,null,null,null,null,null,null,null,null,2],[1000,[[31090454,[[null,null,14,[null,null,\"31090454\"]]],[6,null,null,null,6,null,\"31090454\"]]],[4,null,55],63,null,null,null,null,null,null,null,null,2],[1,[[42531513],[42531514,[[316,null,null,[1]]]]]],[1,[[42531644],[42531645,[[368,null,null,[1]]]],[42531646,[[369,null,null,[1]],[368,null,null,[1]]]]]],[50,[[42531705],[42531706]]],[1,[[42532242],[42532243,[[1256,null,null,[1]],[290,null,null,[1]]]]]],[50,[[42532523],[42532524,[[1300,null,null,[]]]]]],[null,[[42532525],[42532526]]],[1,[[44719338],[44719339,[[334,null,null,[1]],[null,54,null,[null,100]],[null,66,null,[null,10]],[null,65,null,[null,1000]]]]]],[1,[[44801778],[44801779,[[506914611,null,null,[1]]]]],[4,null,55]],[10,[[95330276],[95330278,[[null,1336,null,[null,1]]]],[95330279,[[null,1336,null,[null,0.8]]]],[95332928,[[null,1336,null,[null,0.5]]]]]],[50,[[95331832],[95331833,[[1342,null,null,[1]]]]]],[10,[[95332584],[95332585,[[null,1343,null,[null,600]]]],[95332586,[[null,1343,null,[null,900]]]],[95332587,[[null,1343,null,[null,1200]]]]]],[10,[[95332589],[95332590,[[1344,null,null,[1]]]]]],[10,[[95332923],[95332924,[[null,1338,null,[null,0.8]]]],[95332925,[[null,1339,null,[null,0.8]]]],[95332926,[[null,1340,null,[null,0.8]]]],[95332927,[[null,1340,null,[null,0.8]],[null,1338,null,[null,0.8]],[null,1339,null,[null,0.8]]]]]],[10,[[95333409],[95333410,[[null,1346,null,[null,-1]],[null,1347,null,[null,-1]]]],[95333411,[[null,1346,null,[null,3]],[null,1347,null,[null,1]]]],[95333412,[[null,1346,null,[null,8]],[null,1347,null,[null,5]]]]]],[360,[[95334516,[[null,null,null,[null,null,null,[\"95334518\"]],null,null,null,630330362]]],[95334517,[[626390500,null,null,[1]],[null,null,null,[null,null,null,[\"95334519\"]],null,null,null,630330362]]]],[2,[[4,null,55],[12,null,null,null,2,null,\"bjsvp14\\\\.space\/|bjsvp15\\\\.space\/|buzzfun\\\\.me\/|buzzsight\\\\.co\/|diggfun\\\\.co\/|games2kings\\\\.com\/|indiaimagine\\\\.com\/|postfunny\\\\.com\/|testname\\\\.me\/|yashbharat\\\\.com\/\"]]]],[50,[[95344787,[[null,null,null,[null,null,null,[\"95344792\"]],null,null,null,630330362]]],[95344788,[[566279275,null,null,[1]],[622128248,null,null,[1]],[null,null,null,[null,null,null,[\"95344793\"]],null,null,null,630330362]]],[95344789,[[622128248,null,null,[1]],[566279276,null,null,[1]],[null,null,null,[null,null,null,[\"95344794\"]],null,null,null,630330362]]],[95344790,[[566279275,null,null,[1]],[566279276,null,null,[1]],[null,null,null,[null,null,null,[\"95344795\"]],null,null,null,630330362]]],[95344791,[[566279275,null,null,[1]],[622128248,null,null,[1]],[566279276,null,null,[1]],[null,null,null,[null,null,null,[\"95344796\"]],null,null,null,630330362]]]],[4,null,55]],[1,[[95345037],[95345038,[[1377,null,null,[1]]]]],[4,null,55]],[10,[[95348574]]],[10,[[95348575,[[1367,null,null,[1]],[1349,null,null,[1]],[null,1366,null,[]],[null,1365,null,[null,2592000]]]]],null,138],[null,[[95348881],[95348882,[[45650867,null,null,[1]]]]],null,130,null,null,null,null,null,null,null,null,null,7],[10,[[95349395]]],[10,[[95349396,[[1367,null,null,[1]],[1349,null,null,[1]],[null,1366,null,[]],[null,1365,null,[null,2592000]],[45665162,null,null,[1]]]]],null,138],[200,[[95350441,[[null,null,null,[null,null,null,[\"95350443\"]],null,null,null,630330362]]],[95350442,[[707519017,null,null,[1]],[null,null,null,[null,null,null,[\"95350444\"]],null,null,null,630330362]]]],[4,null,55]],[100,[[95350548],[95350549,[[1381,null,null,[1]]]]]],[10,[[95352051,[[null,null,null,[null,null,null,[\"95352054\"]],null,null,null,630330362]]],[95352052,[[null,643258048,null,[]],[null,null,null,[null,null,null,[\"95352055\"]],null,null,null,630330362]]],[95352053,[[null,643258048,null,[]],[null,643258049,null,[]],[null,null,null,[null,null,null,[\"95352056\"]],null,null,null,630330362]]]],[4,null,55]],[500,[[95352068,[[null,null,null,[null,null,null,[\"95352070\"]],null,null,null,630330362]]],[95352069,[[717888913,null,null,[1]],[null,null,null,[null,null,null,[\"95352071\"]],null,null,null,630330362]]]],[4,null,55]],[10,[[95352076],[95352077,[[716210739,null,null,[1]]]]]],[50,[[95352637],[95352638]],null,51]]],[17,[[10,[[31084487],[31084488]],null,null,null,null,32,null,null,142,1],[10,[[31089209],[31089210]],null,null,null,null,39,null,null,189,1],[96,[[31090357]],[2,[[4,null,55],[7,null,null,15,null,20250512]]],null,null,null,null,null,null,194,1],[896,[[31090358,null,[4,null,71,null,null,null,null,[\"194\",\"14\"]]]],[2,[[4,null,55],[7,null,null,15,null,20250512]]],null,null,null,null,96,null,194,1],[500,[[95347432,[[null,null,null,[null,null,null,[\"95347434\"]],null,null,null,630330362]]],[95347433,[[636570127,null,null,[]],[null,null,null,[null,null,null,[\"95347435\"]],null,null,null,630330362]]]],[4,null,55],null,null,null,null,null,null,190,1],[100,[[95348347,[[null,null,null,[null,null,null,[\"95348349\"]],null,null,null,630330362]]],[95348348,[[null,652486359,null,[null,1]],[null,null,null,[null,null,null,[\"95348350\"]],null,null,null,630330362]]]],[4,null,55],null,null,null,null,null,null,191,1],[500,[[95350015,[[null,null,null,[null,null,null,[\"95350025\"]],null,null,null,630330362]]],[95350016,[[null,null,622128249,[null,null,\"#0B57D0\"]],[null,null,622128250,[null,null,\"#FFFFFF\"]],[null,null,null,[null,null,null,[\"95350026\"]],null,null,null,630330362]]]],[4,null,55],null,null,null,null,null,null,192,1],[null,[[95352177,[[null,null,null,[null,null,null,[\"95352177\",\"95352179\"]],null,null,null,631402549],[null,null,null,[null,null,null,[\"95352179\"]],null,null,null,630330362]]],[95352178,[[720093567,null,null,[1]],[null,null,null,[null,null,null,[\"95352178\",\"95352180\"]],null,null,null,631402549],[null,null,null,[null,null,null,[\"95352180\"]],null,null,null,630330362]]]],[4,null,55],null,null,null,null,null,null,193]]],[11,[[50,[[31088249],[31088250]],null,122,null,null,null,null,null,null,null,null,null,4]]]],null,null,[null,1000,1,1000]],null,null,\"31090415\",null,null,827254596,null,null,null,null,null,null,null,[0,0,0],[],null,\"m202502130101\"]");

</script>
<!-- auto_banner -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3500802105933440"
     data-ad-slot="9609810374"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div></aside>
<aside id="contents_aside_b">
</aside>
</section>
<footer id="main_footer">
<p id="main_footer_info"></p>
</footer>
</div>
<div id="reloadBtn" class="floating-btn" onclick="reload()">↻</div>
<div id="logoutBtn" class="floating-btn" onclick="backPage()">⇦</div>
</body>
<script>
    const urlParams = new URLSearchParams(location.search);
    const token1 = urlParams.get("key1");
    if(token1 !== localStorage.getItem("key1")){
        localStorage.setItem("key1", "unauthorized");
		localStorage.setItem("requestPage1", "page0002");
        location.href = "https://wakaruwakaru.github.io/game-sites/";
    }else{
        localStorage.setItem("key1", "");
		localStorage.setItem("requestPage1", "");
    }
    function reload(){
        const key1 = crypto.randomUUID();
        localStorage.setItem("key1", key1);
        location.href = "https://wakaruwakaru.github.io/game-sites/page0002?key1=" + key1;
    }
    function backPage(){
        const key1 = crypto.randomUUID();
        localStorage.setItem("key1", key1);
        location.href = "https://wakaruwakaru.github.io/game-sites/top0001?key1=" + key1;
    }
</script>
</html>
