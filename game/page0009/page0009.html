<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/game-sites/index/icon/icon1.png" >
  <link rel="stylesheet" href="./css/main.css">
  <title>ブロック崩し</title>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>ブロック崩し</h1>
        <p class="desc">矢印キー / マウス / タッチで操作　ハイスコアは自動保存されます</p>
      </div>
      <div>
        <button id="startBtn">ゲーム開始</button>
      </div>
    </header>

    <div class="game-area">
      <canvas id="gameCanvas" width="720" height="480"></canvas>

      <aside class="sidebar">
        <div class="stat"><div>ライフ</div><div id="lives">3</div></div>
        <div class="stat"><div>スコア</div><div id="score">0</div></div>
        <div class="stat"><div>レベル</div><div id="level">1</div></div>
        <div class="stat"><div>ハイスコア</div><div id="highscore">0</div></div>

        <div class="controls">
          <label>ボール速度 <input id="speed" type="range" min="2" max="8" value="4"></label>
          <label>パドル幅 <input id="paddleW" type="range" min="60" max="220" value="140"></label>
          <label><input id="soundToggle" type="checkbox"> サウンド有効</label>
          <button id="resetBtn">リセット</button>
        </div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0">
        <div style="font-size:13px;line-height:1.5">
          操作方法: 左右矢印 / マウス移動 / タッチでパドル操作<br>
          システム: 全ブロック破壊でレベルクリア  全部破壊すると次のレベルへ
        </div>
        <footer>Ver.1.1.0</footer>
      </aside>
    </div>
  </div>

<script src="./js/main.js"></script>
<div id="reloadBtn" class="floating-btn" onclick="reload()">↻</div>
<div id="logoutBtn" class="floating-btn" onclick="backPage()">⇦</div>
</body>
  <script>
    const urlParams = new URLSearchParams(location.search);
    const token1 = urlParams.get("key1");
    const token3 = localStorage.getItem("account1");
    localStorage.setItem("account1", "");
    if((token1 !== localStorage.getItem("key1")) || (token3 == "") || (token3 == null)){
      localStorage.setItem("key1", "unauthorized");
      localStorage.setItem("requestPage1", "game/page0009/page0009");
      location.href = "/game-sites/";
    }else{
      localStorage.setItem("key1", "");
      localStorage.setItem("requestPage1", "");
    }
    function reload(){
      const key1 = crypto.randomUUID();
      localStorage.setItem("key1", key1);
      localStorage.setItem("account1", token3);
      location.href = "/game-sites/game/page0009/page0009?key1=" + key1;
    }
    function backPage(){
      const key1 = crypto.randomUUID();
      localStorage.setItem("key1", key1);
      localStorage.setItem("account1", token3);
      location.href = "/game-sites/top/top0001/top0001?key1=" + key1;
    }
  </script>
</html>
