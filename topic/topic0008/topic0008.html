<html>
<head>
<meta charset="utf-8">
<title>新サービスが登場!</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="shortcut icon" href="/game-sites/index/icon/icon1.png" >
<link rel="stylesheet" href="/game-sites/topic/css/main.css" />
</head>
<body>
<h1>トピック</h1>
<hr />
<div id="articleArea">
<!-- 記事の画像や本文  -->

<div class="article-container">
    <div class="article-title">新サービスのチャットがリリース!</div>
    <img class="article-image" src="./picture0001.jpg" alt="記事画像" />
    <div class="article-body">
        <p>「game-sites」独自技術のチャットが登場! 一般的な連絡アプリと同程度のクオリティに</p>
        <h2>■ 「game-sites」独自のチャット</h2>
        <p>　新サービスのチャットが「game-sites」に登場しました。円滑なコミュニケーションや連絡、談話などの目的で利用でき、昨今普及している連絡アプリと同程度の機能も備わっているそうです。</p>
        <h2>■ アクセス方法</h2>
        <p>　「game-sites」トップから「チャット」をタップするだけでログインなどの操作なしでチャットを開くことができます。また不正アクセスとして弾かれてしまっても、その後再ログインすることでページショートカット機能により自動でチャットを開くことができます。</p>
        <h2>■ 使い方</h2>
        <p>　チャットを開くと画面中央にはメッセージ欄、画面右側には3つのボタン、画面下側にはユーザーの入力欄が表示されます。使い方は非常にシンプルで、画面下側のメッセージを送信と書かれた欄に送信したい内容を入力した後、その横の＋ボタンまたはEnterキーを押すことで内容が送信されます。他のユーザーからのメッセージは画面中央にアイコンと共に表示されます。</p>
        <h2>■ 便利機能</h2>
    </div>
    <img class="article-image2" src="./picture0002.png" alt="記事画像" />
    <div class="article-body">
        <p>　今回新リリースされたチャットは「game-sites」独自開発されたもので、様々な便利機能が実装されているそうです。その一部を以下で紹介します!!</p>
        <p>1,自動スクロール</p>
        <p>　メッセージ最下部を閲覧中に新着メッセージが届いたとき、自動で新着メッセージまでスクロールされます。過去のメッセージを閲覧中は自動スクロールが無効になります。</p>
        <p>2,新着メッセージ通知</p>
        <p>　過去のメッセージを閲覧中に新着メッセージが届いたとき、画面左下に通知が表示されます。この通知は新着メッセージを閲覧すると自動で消えます。</p>
        <p>3,低レート通信モード</p>
        <p>　メッセージの入力欄右側の黒いアイコンをタップするとマーク内部が光り、低レート通信モードに入ります。このモードが有効になると、チャットの更新頻度が低下する代わりに通信量とデバイスへの負荷が軽減されます。WiFiが使えない環境やデバイスに負荷をかけたくない場合に有効にすることが好ましいです。もう一度アイコンをタップすると低レート通信モードは無効になります。</p>
        <div class="side-set"><button id="copyBtn" class="neonButton">📥</button></div>
        <p style="margin-top: 30px; opacity: 0.7;">Ⓒgame-sites　　2025.12.12</p>
    </div>
</div>

<!-- 記録される記事の最後 -->
</div>
<hr />
<div id="reloadBtn" class="floating-btn" onclick="reload()">↻</div>
<div id="logoutBtn" class="floating-btn" onclick="backPage()">⇦</div>
<div id="toast" class="toast">記事をコピーしました</div>
</body>
    <script>
        const urlParams = new URLSearchParams(location.search);
        const token1 = urlParams.get("key1");
        const token3 = localStorage.getItem("account1");
        localStorage.setItem("account1", "");
        if((token1 !== localStorage.getItem("key1")) || (token3 == "") || (token3 == null)){
            localStorage.setItem("key1", "unauthorized");
            localStorage.setItem("requestPage1", "topic/topic0008/topic0008");
            location.href = "/game-sites/";
        }else{
            localStorage.setItem("key1", "");
            localStorage.setItem("requestPage1", "");
        }

        function jumpLink1(){
        //  const key1 = crypto.randomUUID();
        //  localStorage.setItem("key1", key1);
        //  localStorage.setItem("account1", token3);
        //  location.href = "/game-sites/page0007-1?key1=" + key1;
        }
        function reload(){
            const key1 = crypto.randomUUID();
            localStorage.setItem("key1", key1);
            localStorage.setItem("account1", token3);
            location.href = "/game-sites/topic/topic0008/topic0008?key1=" + key1;
        }
        function backPage(){
            const key1 = crypto.randomUUID();
            localStorage.setItem("key1", key1);
            localStorage.setItem("account1", token3);
            location.href = "/game-sites/topic/top-topic0001?key1=" + key1;
        }
    </script>
    <script src="/game-sites/index/dist/html2canvas.js"></script>
    <script>
      document.getElementById("copyBtn").addEventListener("click", async () => {
        try {
          const target = document.getElementById("articleArea");
          // 🎚️ 高画質スケール倍率（2～5で調整可能）
          const scale = 3;
          // 📸 高解像度スクショ生成
          const canvas = await html2canvas(target, {
          scale: scale,
          useCORS: true,          // 外部画像対策
          imageSmoothingEnabled: true,
          imageSmoothingQuality: "high",
          backgroundColor: null   // 背景透過（必要なければ削ってOK）
        });
        // 🔄 PNG Blob に変換
        const blob = await new Promise(resolve =>
          canvas.toBlob(resolve, "image/png")
        );
        // 📋 高画質画像をクリップボードにコピー
        await navigator.clipboard.write([
        new ClipboardItem({
          "image/png": blob
        })
      ]);
      /*alert("スクショ画像をコピーしました！\nクリップボードからペーストできます");*/
      showToast("記事をコピーしました");
    } catch (err) {
      console.error(err);
      /*alert("コピーに失敗しました\n対応していないブラウザの可能性があります");*/
      showToast("記事のコピーができませんでした");
    }
  });

      function showToast(msg = "コピーしました！"){
        const toast = document.getElementById("toast");
        toast.textContent = msg;
        toast.classList.add("show");
        setTimeout(() => {
          toast.classList.remove("show");
        }, 2500); // 2.5秒で消える
      }
</script>
</html>
